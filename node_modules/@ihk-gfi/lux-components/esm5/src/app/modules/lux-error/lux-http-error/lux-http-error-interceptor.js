import * as tslib_1 from "tslib";
import { HttpErrorResponse } from '@angular/common/http';
import { Injectable } from '@angular/core';
import { tap } from 'rxjs/operators';
import { ReplaySubject } from 'rxjs';
var LuxHttpErrorInterceptor = /** @class */ (function () {
    function LuxHttpErrorInterceptor() {
    }
    LuxHttpErrorInterceptor_1 = LuxHttpErrorInterceptor;
    LuxHttpErrorInterceptor.dataStream$ = function () {
        return LuxHttpErrorInterceptor_1.dataStream.asObservable();
    };
    LuxHttpErrorInterceptor.prototype.intercept = function (req, next) {
        return next.handle(req).pipe(tap(function () {
            LuxHttpErrorInterceptor_1.dataStream.next([]);
        }, function (error) {
            if (error instanceof HttpErrorResponse && error.status === 400) {
                LuxHttpErrorInterceptor_1.dataStream.next(error.error.errors);
            }
        }));
    };
    var LuxHttpErrorInterceptor_1;
    LuxHttpErrorInterceptor.dataStream = new ReplaySubject(1);
    LuxHttpErrorInterceptor = LuxHttpErrorInterceptor_1 = tslib_1.__decorate([
        Injectable(),
        tslib_1.__metadata("design:paramtypes", [])
    ], LuxHttpErrorInterceptor);
    return LuxHttpErrorInterceptor;
}());
export { LuxHttpErrorInterceptor };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibHV4LWh0dHAtZXJyb3ItaW50ZXJjZXB0b3IuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AaWhrLWdmaS9sdXgtY29tcG9uZW50cy8iLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kdWxlcy9sdXgtZXJyb3IvbHV4LWh0dHAtZXJyb3IvbHV4LWh0dHAtZXJyb3ItaW50ZXJjZXB0b3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxpQkFBaUIsRUFBd0QsTUFBTSxzQkFBc0IsQ0FBQztBQUMvRyxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBRSxHQUFHLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNyQyxPQUFPLEVBQWMsYUFBYSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBR2pEO0lBR0U7SUFBZSxDQUFDO2dDQUhMLHVCQUF1QjtJQUszQixtQ0FBVyxHQUFsQjtRQUNFLE9BQU8seUJBQXVCLENBQUMsVUFBVSxDQUFDLFlBQVksRUFBRSxDQUFDO0lBQzNELENBQUM7SUFFRCwyQ0FBUyxHQUFULFVBQVUsR0FBcUIsRUFBRSxJQUFpQjtRQUNoRCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUMxQixHQUFHLENBQ0Q7WUFDRSx5QkFBdUIsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQzlDLENBQUMsRUFDRCxVQUFBLEtBQUs7WUFDSCxJQUFJLEtBQUssWUFBWSxpQkFBaUIsSUFBSSxLQUFLLENBQUMsTUFBTSxLQUFLLEdBQUcsRUFBRTtnQkFDOUQseUJBQXVCLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO2FBQzdEO1FBQ0gsQ0FBQyxDQUNGLENBQ0YsQ0FBQztJQUNKLENBQUM7O0lBckJNLGtDQUFVLEdBQXVCLElBQUksYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRGxELHVCQUF1QjtRQURuQyxVQUFVLEVBQUU7O09BQ0EsdUJBQXVCLENBdUJuQztJQUFELDhCQUFDO0NBQUEsQUF2QkQsSUF1QkM7U0F2QlksdUJBQXVCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSHR0cEVycm9yUmVzcG9uc2UsIEh0dHBFdmVudCwgSHR0cEhhbmRsZXIsIEh0dHBJbnRlcmNlcHRvciwgSHR0cFJlcXVlc3QgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyB0YXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBSZXBsYXlTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBMdXhIdHRwRXJyb3JJbnRlcmNlcHRvciBpbXBsZW1lbnRzIEh0dHBJbnRlcmNlcHRvciB7XG4gIHN0YXRpYyBkYXRhU3RyZWFtOiBSZXBsYXlTdWJqZWN0PGFueT4gPSBuZXcgUmVwbGF5U3ViamVjdCgxKTtcblxuICBjb25zdHJ1Y3RvcigpIHt9XG5cbiAgc3RhdGljIGRhdGFTdHJlYW0kKCk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgcmV0dXJuIEx1eEh0dHBFcnJvckludGVyY2VwdG9yLmRhdGFTdHJlYW0uYXNPYnNlcnZhYmxlKCk7XG4gIH1cblxuICBpbnRlcmNlcHQocmVxOiBIdHRwUmVxdWVzdDxhbnk+LCBuZXh0OiBIdHRwSGFuZGxlcik6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+IHtcbiAgICByZXR1cm4gbmV4dC5oYW5kbGUocmVxKS5waXBlKFxuICAgICAgdGFwKFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgTHV4SHR0cEVycm9ySW50ZXJjZXB0b3IuZGF0YVN0cmVhbS5uZXh0KFtdKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3IgPT4ge1xuICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEh0dHBFcnJvclJlc3BvbnNlICYmIGVycm9yLnN0YXR1cyA9PT0gNDAwKSB7XG4gICAgICAgICAgICBMdXhIdHRwRXJyb3JJbnRlcmNlcHRvci5kYXRhU3RyZWFtLm5leHQoZXJyb3IuZXJyb3IuZXJyb3JzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIClcbiAgICApO1xuICB9XG59XG4iXX0=