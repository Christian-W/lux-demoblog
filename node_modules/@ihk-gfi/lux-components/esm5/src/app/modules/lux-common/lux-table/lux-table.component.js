import * as tslib_1 from "tslib";
// tslint:disable:member-ordering
import { Component, ContentChildren, ElementRef, EventEmitter, Input, Output, QueryList, ViewChild } from '@angular/core';
import { MatPaginator, MatPaginatorIntl, MatSort } from '@angular/material';
import { LuxTableDataSource } from './lux-table-data-source';
import { of, Subject } from 'rxjs';
import { catchError, debounceTime, distinctUntilChanged, tap } from 'rxjs/operators';
import { LuxUtil } from '../../lux-util/lux-util';
import { LuxPaginatorIntl } from '../../lux-util/lux-paginator-intl';
import { LuxMediaQueryObserverService } from '../../lux-util/lux-media-query-observer.service';
import { LuxTableColumnComponent } from './lux-table-subcomponents/lux-table-column.component';
import { LuxConsoleService } from '../../lux-util/lux-console.service';
import { LiveAnnouncer } from '@angular/cdk/a11y';
var LuxTableComponent = /** @class */ (function () {
    // endregion
    function LuxTableComponent(queryObserver, luxConsole, liveAnnouncer) {
        var _this = this;
        this.queryObserver = queryObserver;
        this.luxConsole = luxConsole;
        this.liveAnnouncer = liveAnnouncer;
        this._luxClasses = [];
        this._luxShowPagination = false;
        this._dataColumnDefs = [];
        this._luxShowFilter = false;
        this._dataSource = new LuxTableDataSource([]);
        this._luxPickValue = function (o) { return o; };
        this._luxCompareWith = function (o1, o2) { return o1 === o2; };
        this.httpRequestConf = {};
        this.columnSubscriptions = [];
        this.filtered$ = new Subject();
        this.currentCustomClasses = [];
        this.isIE = false;
        this.movedTableColumns = [];
        this.luxColWidthsPercent = [];
        this.luxFilterText = 'Filter';
        this.luxNoDataText = 'Keine Daten gefunden.';
        this.luxPageSize = 10;
        this.luxPageSizeOptions = [5, 10, 25, 50];
        this.luxMinWidthPx = -1;
        this.luxAutoPaginate = true;
        this.luxHideBorders = false;
        this.luxSelectedChange = new EventEmitter();
        this._luxSelected = new Set();
        /**
         * Eigene Implementierung der Filterung für diese Tabelle.
         * Iteriert über die Values des einzelnen Objektes und prüft dann ob der Filter-Wert irgendwo vorkommt.
         * @param data
         * @param filter
         */
        this.customFilterPredicate = function (data, filter) {
            if (filter === void 0) { filter = ''; }
            for (var property in data) {
                if (data.hasOwnProperty(property)) {
                    var dataEntry = data[property];
                    if (LuxUtil.isDate(dataEntry)) {
                        if (dataEntry
                            .toLocaleString()
                            .toLowerCase()
                            .indexOf(filter) > -1) {
                            return true;
                        }
                    }
                    else {
                        if ((dataEntry + '').toLowerCase().indexOf(filter) > -1) {
                            return true;
                        }
                    }
                }
            }
            return false;
        };
        // Datasource um eigene Filter-Funktionalitaet ergaenzen
        this.dataSource.filterPredicate = this.customFilterPredicate;
        this.isIE = LuxUtil.isIEorEdge();
        this.mediaQuerySubscription = this.queryObserver.getMediaQueryChangedAsObservable().subscribe(function (query) {
            _this.mediaQuery = query;
            _this.updateColumnsByMediaQuery();
        });
    }
    LuxTableComponent_1 = LuxTableComponent;
    Object.defineProperty(LuxTableComponent.prototype, "luxClasses", {
        // region Setter/Getters
        get: function () {
            return this._luxClasses;
        },
        set: function (classes) {
            if (classes && !Array.isArray(classes)) {
                classes = [classes];
            }
            this._luxClasses = classes;
            this.insertCustomCSSClasses();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LuxTableComponent.prototype, "luxShowPagination", {
        get: function () {
            return this._luxShowPagination;
        },
        set: function (show) {
            var _this = this;
            this._luxShowPagination = show;
            setTimeout(function () {
                _this.handlePagination();
            });
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LuxTableComponent.prototype, "luxShowFilter", {
        get: function () {
            return this._luxShowFilter;
        },
        set: function (show) {
            this._luxShowFilter = show;
            this.handleFilter();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LuxTableComponent.prototype, "dataColumnDefs", {
        get: function () {
            return this._dataColumnDefs;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LuxTableComponent.prototype, "dataSource", {
        get: function () {
            return this._dataSource;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LuxTableComponent.prototype, "luxData", {
        get: function () {
            return this.dataSource.data;
        },
        set: function (data) {
            var _this = this;
            data = data ? data : [];
            this.dataSource.data = data;
            if (this.dataSource) {
                setTimeout(function () {
                    _this.updateDataSourceAttributes(data);
                    _this.handleSort();
                    _this.insertCustomCSSClasses();
                    _this.updateColumnsByMediaQuery();
                    _this.calculateProportions();
                    _this.updateSelection();
                });
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LuxTableComponent.prototype, "luxMultiSelect", {
        get: function () {
            return this._luxMultiSelect;
        },
        set: function (multiSelect) {
            var _this = this;
            this._luxMultiSelect = multiSelect;
            if (this.luxMultiSelect) {
                this.luxSelected.clear();
                this._dataColumnDefs.unshift('multiSelect');
            }
            else {
                this._dataColumnDefs = this._dataColumnDefs.filter(function (col) { return col !== 'multiSelect'; });
            }
            setTimeout(function () {
                _this.calculateProportions();
            });
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LuxTableComponent.prototype, "luxSelected", {
        get: function () {
            return this._luxSelected;
        },
        /**
         * Die Auswahl der Selektierten Elemente ist eigentlich ein Set,
         * nimmt aber Arrays von Außen entgegen (zur Vereinfachung).
         * @param selected
         */
        set: function (selected) {
            var _this = this;
            this.luxSelected.clear();
            if (selected) {
                selected.forEach(function (entry) {
                    _this.luxSelected.add(entry);
                });
            }
            if (this.luxData && this.luxData.length > 0) {
                this.updateSelection();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LuxTableComponent.prototype, "luxPickValue", {
        get: function () {
            return this._luxPickValue;
        },
        // Funktion, um den zu vergleichenden Wert aus den einzelnen Objekten zu ziehen.
        // Standardmäßig einfach das Objekt zurückgeben.
        set: function (pickFn) {
            this._luxPickValue = pickFn ? pickFn : function (o) { return o; };
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LuxTableComponent.prototype, "luxCompareWith", {
        get: function () {
            return this._luxCompareWith;
        },
        // Vergleichsfunktion; vergleicht standardmäßig einfach die Referenzen der beiden Objekte.
        set: function (compareFn) {
            this._luxCompareWith = compareFn ? compareFn : function (o1, o2) { return o1 === o2; };
        },
        enumerable: true,
        configurable: true
    });
    LuxTableComponent.prototype.ngOnInit = function () {
        var _this = this;
        setTimeout(function () {
            if (_this.luxHttpDAO) {
                _this.loadHttpDAOData();
            }
            else {
                _this.updateDataSourceAttributes(_this.luxData);
                _this.handleSort();
                _this.insertCustomCSSClasses();
            }
        });
    };
    LuxTableComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        if (this.tableColumns) {
            // Für den Fall das Spalten wegfallen/dazu kommen
            this.tableColumnsChangedSubscription = this.tableColumns.changes.subscribe(function () {
                _this.updateColumnsByMediaQuery();
                _this.updateColumnSubscriptions();
            });
            // Für den Fall das sich Änderungen innerhalb der Spalten ergeben
            this.updateColumnSubscriptions();
            // Nach dem Init sollten einmal die Spalten aktualisiert werden
            setTimeout(function () {
                _this.updateColumnsByMediaQuery();
            });
        }
        if (this.luxShowPagination) {
            this.handlePagination();
        }
    };
    LuxTableComponent.prototype.ngDoCheck = function () {
        if (this.tableContainerElement.nativeElement.offsetWidth !== this.previousWidth ||
            this.tableContainerElement.nativeElement.offsetHeight !== this.previousHeight) {
            this.previousWidth = this.tableContainerElement.nativeElement.offsetWidth;
            this.previousHeight = this.tableContainerElement.nativeElement.offsetHeight;
            this.calculateProportions();
        }
    };
    LuxTableComponent.prototype.ngOnDestroy = function () {
        // Subscriptions auflösen
        this.columnSubscriptions.forEach(function (subscription) {
            subscription.unsubscribe();
        });
        if (this.httpDaoSubscription) {
            this.httpDaoSubscription.unsubscribe();
        }
        if (this.filterChangedSubscription) {
            this.filterChangedSubscription.unsubscribe();
        }
        if (this.tableColumnsChangedSubscription) {
            this.tableColumnsChangedSubscription.unsubscribe();
        }
        if (this.sortChangedSubscription) {
            this.sortChangedSubscription.unsubscribe();
        }
        if (this.paginatorPageSubscription) {
            this.paginatorPageSubscription.unsubscribe();
        }
        if (this.selectedSubscription) {
            this.selectedSubscription.unsubscribe();
        }
    };
    /**
     * Zieht sich die aktuellen CSS-Klassen aus den zugewiesenen
     * CSS-Klassen.
     * @param row
     * @returns string
     */
    LuxTableComponent.prototype.getCustomClassesForIndex = function (row) {
        var customClasses = this.currentCustomClasses.find(function (value) { return value.entry === row; });
        return customClasses ? customClasses.classes : '';
    };
    /**
     * TrackBy-Funktion um die Tabelle etwas schneller zu machen.
     * @param index
     * @param item
     */
    LuxTableComponent.prototype.trackFn = function (index, item) {
        return index;
    };
    /**
     * Wird beim Klick auf eine Row aufgerufen und handelt das Sichern und Entfernen von
     * selektierten Einträgen.
     * @param entry
     */
    LuxTableComponent.prototype.changeSelectedEntry = function (entry) {
        if (this.luxMultiSelect) {
            if (this.luxSelected.has(entry)) {
                this.luxSelected.delete(entry);
            }
            else {
                this.luxSelected.add(entry);
            }
        }
        else {
            if (this.luxSelected.has(entry)) {
                // Wenn der selektierte Eintrag erneut angeklickt wird,
                // wird die Selektion entfernt.
                this.luxSelected.clear();
            }
            else {
                this.luxSelected.clear();
                this.luxSelected.add(entry);
            }
        }
        this.luxSelectedChange.next(Array.from(this.luxSelected));
        this.dataSource.selectedEntries = this.luxSelected;
        this.allSelected = this.checkFilteredAllSelected();
    };
    /**
     * Selektiert/Deselektiert alle Einträge in dieser Tabelle.
     *
     * Voraussetzung dafür ist, das Multiselect aktiv ist und keine Http-Table vorliegt.
     */
    LuxTableComponent.prototype.changeSelectedEntries = function () {
        var _this = this;
        if (this.luxMultiSelect && !this.luxHttpDAO) {
            if (this.checkFilteredAllSelected()) {
                this.dataSource.filteredData.forEach(function (dataEntry) { return _this.luxSelected.delete(dataEntry); });
            }
            else {
                this.dataSource.filteredData.forEach(function (dataEntry) { return _this.luxSelected.add(dataEntry); });
            }
            this.luxSelectedChange.next(Array.from(this.luxSelected));
            this.dataSource.selectedEntries = this.luxSelected;
            this.allSelected = this.checkFilteredAllSelected();
        }
    };
    /**
     * Prüft ob die aktuell angezeigten Einträge alle selektiert sind oder nicht.
     */
    LuxTableComponent.prototype.checkFilteredAllSelected = function () {
        var _this = this;
        var result = true;
        if (this.luxSelected.size === 0) {
            result = false;
        }
        else {
            // Prüfen ob die gefilterten Daten selected sind
            this.dataSource.filteredData.forEach(function (dataEntry) {
                if (!_this.luxSelected.has(dataEntry)) {
                    result = false;
                }
            });
        }
        return result;
    };
    /**
     * Gibt zurück, ob irgendein Footer-Element für diese Tabelle aktuell sichtbar ist.
     */
    LuxTableComponent.prototype.anyFootersAvailable = function () {
        return this.luxMultiSelect || !!this.tableColumns.find(function (column) { return !!column.footer; });
    };
    /**
     * Aktualisiert die DataSource und evtl. Subscriptions sowie die CustomCSS-Classes
     * nach einer Änderung.
     */
    LuxTableComponent.prototype.updateDataSourceAttributes = function (data) {
        if (!this.luxHttpDAO && this.luxAutoPaginate && data && data.length > LuxTableComponent_1.AUTO_PAGINATION_START) {
            this.luxShowPagination = true;
        }
        if (!this.luxHttpDAO) {
            if (this.luxShowPagination) {
                this.handlePagination();
            }
        }
        if (!this.luxHttpDAO) {
            this.dataSource.sort = this.sort;
        }
        if (!this.luxHttpDAO) {
            this.dataSource.totalElements = this.dataSource.data ? this.dataSource.data.length : 0;
        }
    };
    /**
     * Prueft anhand der mitgegebenen Callbacks die CSS-Klassen
     * fuer die einzelnen Rows.
     */
    LuxTableComponent.prototype.insertCustomCSSClasses = function () {
        var _this = this;
        if (this.luxClasses && this.dataSource.data) {
            this.currentCustomClasses = [];
            this.dataSource.data.forEach(function (entry, i) {
                var classes = '';
                _this.luxClasses.forEach(function (cssClass) {
                    if (cssClass.check(entry)) {
                        classes += cssClass.class + ' ';
                    }
                });
                _this.currentCustomClasses.push({ entry: entry, classes: classes });
            });
        }
    };
    /**
     * Gibt das Aria-Label für die Sortierung der Spalten-Überschrift zurück.
     * @param tableColumnDef
     */
    LuxTableComponent.prototype.getAriaSortingLabel = function (tableColumnDef) {
        if (this.sort.active === tableColumnDef) {
            if (this.sort.direction === 'asc') {
                return 'aufsteigend sortiert';
            }
            if (this.sort.direction === 'desc') {
                return 'absteigend sortiert';
            }
        }
        return 'nicht sortiert';
    };
    /**
     * Gibt über den liveAnnouncer eine Nachricht aus, dass sich die Sortierung einer Spalte geändert hat.
     * @param $event
     */
    LuxTableComponent.prototype.announceSortChange = function ($event) {
        var index = this.tableColumns
            .toArray()
            .findIndex(function (tableColumn) { return $event.active === tableColumn.luxColumnDef; });
        var columnDef = index > -1 ? this.tableColumns.toArray()[index].luxColumnDef : null;
        if (columnDef === null) {
            columnDef = $event.active === 'multiSelect' ? 'multiSelect' : null;
        }
        if (columnDef !== null) {
            var directionDescription = void 0;
            switch ($event.direction) {
                case 'desc':
                    directionDescription = 'absteigend';
                    break;
                case 'asc':
                    directionDescription = 'aufsteigend';
                    break;
                case '':
                    directionDescription = 'nicht mehr';
                    break;
            }
            this.liveAnnouncer.announce("Spalte " + columnDef + " sortiert nun " + directionDescription, 'assertive');
        }
    };
    /**
     * Aktualisiert die momentan angezeigten Spalten anhand der für sie definierten
     * Responsive-Queries und Verhaltensweisen.
     */
    LuxTableComponent.prototype.updateColumnsByMediaQuery = function () {
        var _this = this;
        if (!this.tableColumns) {
            return;
        }
        this._dataColumnDefs = [];
        // wenn Multiselect, dann benötigen wir hier noch eine Spalte mehr
        if (this.luxMultiSelect) {
            this._dataColumnDefs.push('multiSelect');
        }
        this.tableColumns.forEach(function (column) { return _this._dataColumnDefs.push(column.luxColumnDef); });
        this.movedTableColumns = [];
        // Zuerst die auszublendenden Spalten durchgehen
        this.tableColumns.forEach(function (tableColumn) {
            if ((tableColumn.luxResponsiveAt && !tableColumn.luxResponsiveBehaviour) ||
                (!tableColumn.luxResponsiveAt && tableColumn.luxResponsiveBehaviour)) {
                _this.luxConsole.error("Achtung! Die Column '" + tableColumn.luxColumnDef + "' hat entweder keine Media-Queries " +
                    "oder kein Responsive-Verhalten zugewiesen bekommen.");
            }
            else if (_this.doesResponsiveAtApply(tableColumn.luxResponsiveAt)) {
                // Schauen, ob eine Spalte angegeben wurde, in welche sich diese hier verschieben kann
                if (_this._dataColumnDefs.find(function (column) { return column === tableColumn.luxResponsiveBehaviour; })) {
                    // Wenn ja, die Spalte merken und vorerst ausblenden
                    _this.movedTableColumns.push(tableColumn);
                }
                _this._dataColumnDefs = _this.dataColumnDefs.filter(function (dataColumn) { return dataColumn !== tableColumn.luxColumnDef; });
            }
        });
    };
    /**
     * Prüft ob die aktuelle MediaQuery mit der übergebenen MediaQuery/den übergebenen MediaQueries übereinstimmt.
     * @param responsiveAt
     */
    LuxTableComponent.prototype.doesResponsiveAtApply = function (responsiveAt) {
        var e_1, _a;
        var mediaQueries = [];
        if (!Array.isArray(responsiveAt)) {
            mediaQueries.push(responsiveAt);
        }
        else {
            mediaQueries.push.apply(mediaQueries, tslib_1.__spread(responsiveAt));
        }
        try {
            for (var mediaQueries_1 = tslib_1.__values(mediaQueries), mediaQueries_1_1 = mediaQueries_1.next(); !mediaQueries_1_1.done; mediaQueries_1_1 = mediaQueries_1.next()) {
                var mediaQuery = mediaQueries_1_1.value;
                if (mediaQuery === this.mediaQuery) {
                    return true;
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (mediaQueries_1_1 && !mediaQueries_1_1.done && (_a = mediaQueries_1.return)) _a.call(mediaQueries_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return false;
    };
    /**
     * Durchläuft die aktuellen TableColumns und hört auf Changes in den Properties
     * der Columns und merkt sich die Subscriptions.
     */
    LuxTableComponent.prototype.updateColumnSubscriptions = function () {
        var _this = this;
        this.columnSubscriptions.forEach(function (subscription) {
            subscription.unsubscribe();
        });
        this.columnSubscriptions = [];
        this.tableColumns.forEach(function (column) {
            _this.columnSubscriptions.push(column.change$.subscribe(function () {
                _this.updateColumnsByMediaQuery();
            }));
        });
    };
    /**
     * Triggert über das DAO die Abfrage nach neuen Daten.
     * Sendet dabei das Request-Conf Objekt, welches Informationen bzgl.
     * page, pageSize, filter, sort, order mitgibt.
     * @param filteredBy?
     */
    LuxTableComponent.prototype.loadHttpDAOData = function (filteredBy) {
        var _this = this;
        this.isLoadingResults = true;
        this.luxHttpDAO
            .loadData(this.httpRequestConf)
            .pipe(tap(function (data) {
            _this.isLoadingResults = false;
            // Wenn ein Filter-Text gegeben ist, sich dieser aber vom Aktuellen unterscheiden, brechen wir die Datenaktualisierung ab
            if (filteredBy && _this.httpRequestConf.filter !== filteredBy) {
                return;
            }
            if (data) {
                _this.dataSource.totalElements = data.totalCount;
                _this.luxData = data.items;
                if (_this.luxAutoPaginate && data.totalCount > LuxTableComponent_1.AUTO_PAGINATION_START) {
                    _this.luxShowPagination = true;
                }
            }
            else {
                _this.dataSource.totalElements = 0;
                _this.luxData = [];
            }
        }), catchError(function (error) {
            _this.isLoadingResults = false;
            return of(error);
        }))
            .subscribe();
    };
    /**
     * Wird aufgerufen wenn der Sort neu zur DataSource hinzugefügt werden soll (Data wurde neu gesetzt).
     * Resettet die Pagination und aktualisiert wenn es sich um eine asynchrone Tabelle handelt die
     * requestConf.
     */
    LuxTableComponent.prototype.handleSort = function () {
        var _this = this;
        if (this.sort) {
            if (this.sortChangedSubscription) {
                this.sortChangedSubscription.unsubscribe();
            }
            this.sortChangedSubscription = this.sort.sortChange.subscribe(function (sort) {
                _this.paginator.pageIndex = 0;
                if (_this.luxHttpDAO) {
                    _this.httpRequestConf.page = _this.paginator.pageIndex;
                    _this.httpRequestConf.sort = sort.active;
                    _this.httpRequestConf.order = sort.direction;
                    _this.loadHttpDAOData();
                }
            });
        }
        this.calculateProportions();
    };
    /**
     * Wird nach dem set von luxShowFilter aufgerufen und fängt neue Filter-Operationen ab und
     * aktualisiert dementsprechend die Daten.
     */
    LuxTableComponent.prototype.handleFilter = function () {
        var _this = this;
        if (this.filterChangedSubscription) {
            this.filterChangedSubscription.unsubscribe();
        }
        if (this.luxShowFilter) {
            this.filterChangedSubscription = this.filtered$
                .asObservable()
                .pipe(tap(function () { return (_this.isLoadingResults = true); }), debounceTime(500), distinctUntilChanged(function (x, y) {
                if (x === y) {
                    _this.isLoadingResults = false;
                }
                return x === y;
            }))
                .subscribe(function (filterValue) {
                filterValue = filterValue.trim();
                filterValue = filterValue.toLocaleLowerCase();
                _this.paginator.pageIndex = 0;
                _this.isLoadingResults = false;
                if (!_this.luxHttpDAO) {
                    _this.dataSource.filter = filterValue;
                }
                if (_this.luxHttpDAO) {
                    _this.httpRequestConf.filter = filterValue;
                    _this.loadHttpDAOData(filterValue);
                }
            });
        }
        this.calculateProportions();
    };
    /**
     * Wird nach dem set von luxShowPagination aufgerufen und setzt wenn es sich hier um
     * eine asynchrone Tabelle handelt eine Subscription um Pagination-Änderungen zu erhalten.
     */
    LuxTableComponent.prototype.handlePagination = function () {
        var _this = this;
        if (this.luxShowPagination) {
            if (this.luxHttpDAO) {
                if (this.paginatorPageSubscription) {
                    this.paginatorPageSubscription.unsubscribe();
                }
                this.paginatorPageSubscription = this.paginator.page.subscribe(function () {
                    _this.httpRequestConf.page = _this.paginator.pageIndex;
                    _this.httpRequestConf.pageSize = _this.paginator.pageSize;
                    _this.loadHttpDAOData();
                });
                this.httpRequestConf.page = this.paginator.pageIndex;
                this.httpRequestConf.pageSize = this.paginator.pageSize;
            }
            if (!this.luxHttpDAO) {
                this.dataSource.paginator = this.paginator;
            }
        }
        else {
            this.dataSource.paginator = null;
        }
        this.calculateProportions();
    };
    /**
     * Erzeugt einen neuen String für die Höhenberechnung der Tabelle und setzt die Minimalbreite für die Tabelle
     * (wenn möglich).
     */
    LuxTableComponent.prototype.calculateProportions = function () {
        var _this = this;
        setTimeout(function () {
            var filter = _this.filterElement ? _this.filterElement.nativeElement.offsetHeight : 0;
            var pagination = _this.paginatorElement ? _this.paginatorElement.nativeElement.scrollHeight : 0;
            var temp = 'calc(100% - ' + pagination + 'px' + ' - ' + filter + 'px)';
            if (temp !== _this.tableHeightCSSCalc) {
                _this.tableHeightCSSCalc = temp;
            }
            _this.tableMinWidth = _this.luxMinWidthPx > -1 ? _this.luxMinWidthPx + 'px' : 'unset';
        });
    };
    /**
     * Aktualisiert die selectedEntries dieser Component anhand der aktuell gesetzten luxSelected-Elemente.
     *
     * Dabei werden die einzelnen Elemente zuerst mithilfe der luxCompareWith- und luxPickValue-Functions miteinander
     * verglichen.
     */
    LuxTableComponent.prototype.updateSelection = function () {
        var _this = this;
        // Prüfen ob selected gesetzt ist
        if (this.luxSelected.size > 0) {
            // Die selected-Einträge durchgehen und schauen ob diese im data-Block enthalten sind
            var foundEntries_1 = [];
            this.luxSelected.forEach(function (entry) {
                var newEntry = _this.dataSource.data.find(function (dataEntry) {
                    return _this.luxCompareWith(_this.luxPickValue(entry), _this.luxPickValue(dataEntry));
                });
                // Merkt sich die Entry wenn sie noch nicht in der Selected-Liste ist (wenn es sich um eine HTTP-Tabelle handelt)
                if (newEntry && (!_this.luxHttpDAO || (_this.luxHttpDAO && !_this.luxSelected.has(newEntry)))) {
                    foundEntries_1.push(newEntry);
                    _this.luxSelected.delete(entry);
                }
            });
            // Nur bei nicht-HTTP-Tabellen die Selektion einmal leeren
            if (!this.luxHttpDAO) {
                this.luxSelected.clear();
            }
            foundEntries_1.forEach(function (entry) { return _this.luxSelected.add(entry); });
        }
        this.dataSource.selectedEntries = this.luxSelected;
        this.luxSelectedChange.next(Array.from(this.luxSelected));
        this.allSelected = this.checkFilteredAllSelected();
    };
    var LuxTableComponent_1;
    LuxTableComponent.AUTO_PAGINATION_START = 100; // 100 Elemente bis automatisch die Pagination aktiviert wird
    LuxTableComponent.ctorParameters = function () { return [
        { type: LuxMediaQueryObserverService },
        { type: LuxConsoleService },
        { type: LiveAnnouncer }
    ]; };
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Array)
    ], LuxTableComponent.prototype, "luxColWidthsPercent", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", String)
    ], LuxTableComponent.prototype, "luxFilterText", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", String)
    ], LuxTableComponent.prototype, "luxNoDataText", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Number)
    ], LuxTableComponent.prototype, "luxPageSize", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Object)
    ], LuxTableComponent.prototype, "luxPageSizeOptions", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Object)
    ], LuxTableComponent.prototype, "luxHttpDAO", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Number)
    ], LuxTableComponent.prototype, "luxMinWidthPx", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Boolean)
    ], LuxTableComponent.prototype, "luxAutoPaginate", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Boolean)
    ], LuxTableComponent.prototype, "luxHideBorders", void 0);
    tslib_1.__decorate([
        Output(),
        tslib_1.__metadata("design:type", EventEmitter)
    ], LuxTableComponent.prototype, "luxSelectedChange", void 0);
    tslib_1.__decorate([
        ViewChild(MatPaginator, { static: true }),
        tslib_1.__metadata("design:type", MatPaginator)
    ], LuxTableComponent.prototype, "paginator", void 0);
    tslib_1.__decorate([
        ViewChild(MatSort, { static: true }),
        tslib_1.__metadata("design:type", MatSort)
    ], LuxTableComponent.prototype, "sort", void 0);
    tslib_1.__decorate([
        ViewChild('paginator', { read: ElementRef, static: true }),
        tslib_1.__metadata("design:type", ElementRef)
    ], LuxTableComponent.prototype, "paginatorElement", void 0);
    tslib_1.__decorate([
        ViewChild('filter', { read: ElementRef, static: true }),
        tslib_1.__metadata("design:type", ElementRef)
    ], LuxTableComponent.prototype, "filterElement", void 0);
    tslib_1.__decorate([
        ViewChild('tableContainer', { read: ElementRef, static: true }),
        tslib_1.__metadata("design:type", ElementRef)
    ], LuxTableComponent.prototype, "tableContainerElement", void 0);
    tslib_1.__decorate([
        ContentChildren(LuxTableColumnComponent),
        tslib_1.__metadata("design:type", QueryList)
    ], LuxTableComponent.prototype, "tableColumns", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Object),
        tslib_1.__metadata("design:paramtypes", [Object])
    ], LuxTableComponent.prototype, "luxClasses", null);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Boolean),
        tslib_1.__metadata("design:paramtypes", [Boolean])
    ], LuxTableComponent.prototype, "luxShowPagination", null);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Boolean),
        tslib_1.__metadata("design:paramtypes", [Boolean])
    ], LuxTableComponent.prototype, "luxShowFilter", null);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Array),
        tslib_1.__metadata("design:paramtypes", [Array])
    ], LuxTableComponent.prototype, "luxData", null);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Boolean),
        tslib_1.__metadata("design:paramtypes", [Boolean])
    ], LuxTableComponent.prototype, "luxMultiSelect", null);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Set),
        tslib_1.__metadata("design:paramtypes", [Set])
    ], LuxTableComponent.prototype, "luxSelected", null);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Object),
        tslib_1.__metadata("design:paramtypes", [Object])
    ], LuxTableComponent.prototype, "luxPickValue", null);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Object),
        tslib_1.__metadata("design:paramtypes", [Object])
    ], LuxTableComponent.prototype, "luxCompareWith", null);
    LuxTableComponent = LuxTableComponent_1 = tslib_1.__decorate([
        Component({
            selector: 'lux-table',
            template: "<div fxLayout=\"column\" fxFlex=\"0 0 100%\" class=\"lux-table\">\n  <!-- Progress f\u00FCr das Laden/Filtern von Daten -->\n  <div fxFlex=\"0 0 15px\">\n    <lux-progress\n      luxTagId=\"tableProgress\"\n      luxType=\"Progressbar\"\n      class=\"lux-mb-3\"\n      *ngIf=\"isLoadingResults\"\n    ></lux-progress>\n  </div>\n  <!-- Input-Feld f\u00FCr das Filtern der Datens\u00E4tze dieser Tabelle -->\n  <lux-input\n    class=\"lux-table-filter\"\n    [luxTagId]=\"luxFilterText\"\n    [luxLabel]=\"luxFilterText\"\n    (luxValueChange)=\"filtered$.next($event)\"\n    [ngClass]=\"{ 'lux-hide': !luxShowFilter }\"\n    #filter\n  >\n  </lux-input>\n  <!-- Die eigentliche Struktur der Tabelle -->\n  <div\n    [ngStyle]=\"{ height: tableHeightCSSCalc }\"\n    class=\"lux-table\"\n    [ngClass]=\"{ 'lux-block-pointer-events': isLoadingResults, 'lux-hide-borders': luxHideBorders }\"\n    #tableContainer\n  >\n    <!-- Overlay, welches bei der Anzeige des Ladebalkens die Interaktion mit der Tabelle unterbindet -->\n    <div class=\"lux-table-overlay\" [ngClass]=\"{ 'lux-table-overlay-active': isLoadingResults }\"></div>\n\n    <div class=\"lux-table-content\">\n      <table\n        mat-table\n        [dataSource]=\"dataSource\"\n        [ngClass]=\"{ 'lux-table-ie': isIE, 'lux-multiselect-table': luxMultiSelect }\"\n        [ngStyle]=\"{ 'min-width': tableMinWidth }\"\n        [trackBy]=\"trackFn\"\n        matSort\n        (matSortChange)=\"announceSortChange($event)\"\n        #table\n      >\n        <ng-container *ngIf=\"tableColumns\">\n          <!-- Zellen, welche nur bei Multiselect-Tabellen dargestellt werden und die Checkboxen + Counter beinhalten -->\n          <ng-container matColumnDef=\"multiSelect\" *ngIf=\"luxMultiSelect\">\n            <th\n              class=\"lux-multiselect-th\"\n              [luxAriaLabel]=\"'Spalte multiSelect ' + getAriaSortingLabel('multiSelect')\"\n              luxAriaLabelSelector=\"button\"\n              mat-header-cell\n              *matHeaderCellDef\n              mat-sort-header\n            >\n              <div fxLayout=\"column\">\n                <span class=\"lux-selected-count\"\n                  >{{ luxSelected.size }} {{ !luxHttpDAO ? '/ ' + dataSource.totalElements : '' }}</span\n                >\n              </div>\n            </th>\n            <td class=\"lux-multiselect-td\" mat-cell *matCellDef=\"let element; let i = index\">\n              <lux-checkbox\n                luxTagId=\"lux-table-multiselect-content-{{ i }}\"\n                class=\"lux-multiselect-toggle\"\n                luxTabIndex=\"-1\"\n                [luxApplyToChildren]=\"['input']\"\n                [luxAriaLabel]=\"'Reihe ' + i\"\n                luxAriaLabelSelector=\"input\"\n                [luxChecked]=\"luxSelected.has(element)\"\n              >\n              </lux-checkbox>\n            </td>\n            <td\n              class=\"lux-multiselect-tf\"\n              [ngClass]=\"{ 'lux-ignore-multiselect-tf': !!luxHttpDAO }\"\n              mat-footer-cell\n              *matFooterCellDef\n            >\n              <div\n                fxLayout=\"column\"\n                fxLayoutAlign=\"center\"\n                fxFill\n                class=\"lux-multiselect-toggle-all-wrapper\"\n                *ngIf=\"!luxHttpDAO\"\n              >\n                <lux-checkbox\n                  luxTagId=\"lux-table-multiselect-header\"\n                  class=\"lux-multiselect-toggle-all\"\n                  luxAriaLabel=\"Alle Eintr\u00E4ge\"\n                  luxAriaLabelSelector=\"input\"\n                  luxTabIndex=\"-1\"\n                  [luxApplyToChildren]=\"['input']\"\n                  [luxChecked]=\"allSelected\"\n                >\n                </lux-checkbox>\n              </div>\n            </td>\n          </ng-container>\n          <!-- Diese Zelle wird nur dargestellt wenn keine Daten/die dataSource.totalElements === 0 sind -->\n          <ng-container matColumnDef=\"noData\">\n            <th mat-header-cell *matHeaderCellDef [colSpan]=\"tableColumns.length\">\n              <span class=\"lux-no-data-text\">{{ luxNoDataText }}</span>\n            </th>\n          </ng-container>\n          <!-- Hier sind die eigentlichen Inhalts-Zellen -->\n          <ng-container *ngFor=\"let tableColumn of tableColumns.toArray(); let i = index\">\n            <ng-container\n              [matColumnDef]=\"tableColumn.luxColumnDef\"\n              [sticky]=\"i === 0 && tableColumn.luxSticky\"\n              [stickyEnd]=\"i === tableColumns.length - 1 && tableColumn.luxSticky\"\n            >\n              <th\n                [luxAriaLabel]=\"\n                  'Spalte ' + tableColumn.luxColumnDef + ' ' + getAriaSortingLabel(tableColumn.luxColumnDef)\n                \"\n                luxAriaLabelSelector=\"button\"\n                mat-header-cell\n                *matHeaderCellDef\n                mat-sort-header\n                [ngClass]=\"\n                  'lux-table-column-header-' +\n                  i +\n                  (!tableColumn.luxSortable ? ' lux-table-header-blocked' : '') +\n                  (!tableColumn.header ? ' lux-table-column-header-empty' : '')\n                \"\n                [ngStyle]=\"{\n                  width: luxColWidthsPercent && luxColWidthsPercent[i] ? luxColWidthsPercent[i] + '%' : 'unset'\n                }\"\n              >\n                <ng-container *ngTemplateOutlet=\"tableColumn.header?.tempRef\"></ng-container>\n              </th>\n\n              <!-- Hier enstehen die Zellen mit den Inhalten -->\n              <td\n                mat-cell\n                *matCellDef=\"let element\"\n                [ngStyle]=\"{\n                  width: luxColWidthsPercent && luxColWidthsPercent[i] ? luxColWidthsPercent[i] + '%' : 'unset'\n                }\"\n              >\n                <ng-container\n                  *ngTemplateOutlet=\"tableColumn.content?.tempRef; context: { $implicit: element }\"\n                ></ng-container>\n\n                <!-- Hier werden die aufgrund von Responsive-Verhalten verschobenen Spalten innerhalb dieser Spalte dargestellt -->\n                <ng-container *ngFor=\"let movedTableColumn of movedTableColumns\">\n                  <ng-container *ngIf=\"movedTableColumn.luxResponsiveBehaviour === tableColumn.luxColumnDef\">\n                    <div class=\"lux-moved-header-title lux-label\">\n                      <ng-container *ngTemplateOutlet=\"movedTableColumn.header?.tempRef\"></ng-container>\n                    </div>\n                    <div>\n                      <ng-container\n                        *ngTemplateOutlet=\"movedTableColumn.content.tempRef; context: { $implicit: element }\"\n                      ></ng-container>\n                    </div>\n                  </ng-container>\n                </ng-container>\n              </td>\n              <td mat-footer-cell *matFooterCellDef>\n                <ng-container *ngTemplateOutlet=\"tableColumn.footer?.tempRef\"></ng-container>\n              </td>\n            </ng-container>\n          </ng-container>\n\n          <!-- Die Table-Row f\u00FCr die Header (standardm\u00E4\u00DFig sticky) -->\n          <tr mat-header-row *matHeaderRowDef=\"dataColumnDefs; sticky: true\"></tr>\n          <!-- Die Table-Row f\u00FCr die \"no-data\"-Anzeige -->\n          <tr\n            mat-header-row\n            *matHeaderRowDef=\"['noData']; sticky: true\"\n            class=\"lux-table-header-no-data\"\n            [ngClass]=\"{ 'lux-display-none': dataSource.totalElements > 0 && dataSource.filteredData.length > 0 }\"\n          ></tr>\n          <!-- Die Table-Rows f\u00FCr alle Inhalts-Spalten -->\n          <tr\n            mat-row\n            *matRowDef=\"let rowData; columns: dataColumnDefs; let i = index\"\n            class=\"lux-row {{ getCustomClassesForIndex(rowData) }}\"\n            tabindex=\"0\"\n            [ngClass]=\"{ 'lux-multiselect-field': luxMultiSelect, 'lux-row-selected': luxSelected.has(rowData) }\"\n            (click)=\"changeSelectedEntry(rowData)\"\n            (keydown.space)=\"changeSelectedEntry(rowData)\"\n            (keydown.enter)=\"changeSelectedEntry(rowData)\"\n          ></tr>\n          <!-- Die Table-Row f\u00FCr den Footer dieser Tabelle -->\n          <tr\n            mat-footer-row\n            *matFooterRowDef=\"dataColumnDefs; sticky: true\"\n            ngClass=\"lux-footer-row\"\n            [ngClass]=\"{\n              'lux-display-none': !anyFootersAvailable(),\n              'lux-multiselect-field': luxMultiSelect && !luxHttpDAO\n            }\"\n            tabindex=\"0\"\n            (click)=\"changeSelectedEntries()\"\n            (keydown.space)=\"changeSelectedEntries()\"\n            (keydown.enter)=\"changeSelectedEntries()\"\n          ></tr>\n        </ng-container>\n      </table>\n    </div>\n  </div>\n  <mat-paginator\n    #paginator\n    [length]=\"dataSource.totalElements\"\n    [pageSize]=\"luxPageSize\"\n    [pageSizeOptions]=\"luxPageSizeOptions\"\n    [showFirstLastButtons]=\"true\"\n    [ngClass]=\"{ 'lux-hide': !luxShowPagination }\"\n    [ngClass.xs]=\"{ 'lux-paginator-xs': true, 'lux-hide': !luxShowPagination }\"\n    fxFlex=\"auto\"\n  >\n  </mat-paginator>\n</div>\n",
            providers: [{ provide: MatPaginatorIntl, useClass: LuxPaginatorIntl }],
            styles: ["@charset \"UTF-8\";lux-side-nav .lux-side-nav-item,lux-side-nav lux-link{box-sizing:border-box}lux-side-nav .lux-side-nav-item.lux-side-nav-item-selected,lux-side-nav lux-link.lux-side-nav-item-selected{background-color:rgba(112,141,170,.2)!important;position:relative;border-radius:4px}lux-side-nav .lux-side-nav-item.lux-side-nav-item-selected:after,lux-side-nav lux-link.lux-side-nav-item-selected:after{content:'';left:0;width:6px;top:0;bottom:0;position:absolute;border-left:6px solid #0073b3;border-radius:4px 0 0 4px}lux-side-nav .lux-side-nav-item button .mat-button-focus-overlay,lux-side-nav lux-link button .mat-button-focus-overlay{display:none}lux-side-nav .lux-side-nav-item button:focus,lux-side-nav lux-link button:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}lux-side-nav .lux-side-nav-item button:hover,lux-side-nav lux-link button:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-list{border:4px solid transparent}lux-list:focus{outline-width:0;border:4px solid rgba(112,141,170,.2)!important}lux-list lux-list-item:focus{outline-width:0}lux-list lux-list-item:focus mat-card{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}lux-list lux-list-item lux-card.lux-list-item-selected mat-card{background-color:rgba(112,141,170,.2)!important;position:relative;border-radius:4px}lux-list lux-list-item lux-card.lux-list-item-selected mat-card:after{content:'';left:0;width:6px;top:0;bottom:0;position:absolute;border-left:6px solid #0073b3;border-radius:4px 0 0 4px}lux-list lux-list-item lux-card mat-card{box-sizing:border-box}lux-list lux-list-item lux-card mat-card:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .lux-form-control-label>*{color:#335c85}lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .cdk-focused .mat-radio-container,lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .mat-checkbox-inner-container,lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .mat-slide-toggle-thumb{position:relative}lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .cdk-focused .mat-radio-container:after,lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .mat-checkbox-inner-container:after,lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .mat-slide-toggle-thumb:after{content:\"\";border:1px solid rgba(112,141,170,.2);background-color:rgba(112,141,170,.2);display:block;top:-4px;left:-4px;right:-4px;bottom:-4px;border-radius:15px;z-index:1;position:absolute}lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .lux-form-control-container:after{content:'';display:block;box-sizing:border-box;left:0;right:0;position:absolute;height:2px;border-bottom:2px solid #0073b3}lux-datepicker mat-datepicker-toggle button:focus:after{content:\"\";border:1px solid rgba(112,141,170,.2);background-color:rgba(112,141,170,.2);display:block;top:-4px;left:-4px;right:-4px;bottom:-4px;border-radius:15px;z-index:1;position:absolute}.lux-datepicker-panel .mat-calendar-header button .mat-button-focus-overlay,lux-datepicker mat-datepicker-toggle .mat-button-focus-overlay{display:none}.lux-datepicker-panel .mat-calendar-header button:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}.lux-datepicker-panel .mat-calendar-header button:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}.lux-datepicker-panel .mat-calendar-content td.mat-calendar-body-cell:hover>div{background-color:rgba(0,0,0,.2)!important;border-radius:999px}.lux-datepicker-panel .mat-calendar-content td.mat-calendar-body-cell.mat-calendar-body-active>div{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:999px}lux-table tr:hover>td,lux-table tr:hover>th{border-radius:0;background-color:#cfcfcf!important}lux-table th button.mat-sort-header-button:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}.lux-select-panel mat-option{border-left:0;box-sizing:border-box}.lux-select-panel mat-option.mat-selected{background-color:rgba(112,141,170,.2)!important;position:relative;border-radius:4px}.lux-select-panel mat-option.mat-selected:after{content:'';left:0;width:6px;top:0;bottom:0;position:absolute;border-left:6px solid #0073b3;border-radius:4px 0 0 4px}.lux-select-panel mat-option:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}.lux-select-panel mat-option.mat-active,.lux-select-panel mat-option:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-button button:not([disabled]) .mat-button-focus-overlay{display:none}lux-button button:not([disabled]):not(.mat-fab):not(.mat-raised-button):focus{background-color:rgba(112,141,170,.2)!important}lux-button button:not([disabled]):not(.mat-fab):not(.mat-raised-button):hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-button button:not([disabled]).mat-fab:focus,lux-button button:not([disabled]).mat-raised-button:focus{background-color:rgba(112,141,170,.2)!important}lux-button button:not([disabled]).mat-fab:focus.mat-accent,lux-button button:not([disabled]).mat-raised-button:focus.mat-accent{background-color:#b6d184!important}lux-button button:not([disabled]).mat-fab:focus.mat-warn,lux-button button:not([disabled]).mat-raised-button:focus.mat-warn{background-color:#ea2524!important}lux-button button:not([disabled]).mat-fab:focus.mat-primary,lux-button button:not([disabled]).mat-raised-button:focus.mat-primary{background-color:#4b82ba!important}.lux-autocomplete-panel mat-option{border-left:0;box-sizing:border-box}.lux-autocomplete-panel mat-option:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}.lux-autocomplete-panel mat-option.mat-active,.lux-autocomplete-panel mat-option:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-tabs mat-ink-bar{background-color:#0073b3!important}lux-tabs .mat-tab-label:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}lux-panel mat-expansion-panel-header:hover,lux-stepper mat-step-header:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-panel mat-expansion-panel-header:focus,lux-stepper mat-step-header:focus,lux-stepper mat-step-header[aria-selected=true],lux-tile mat-card:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}lux-master-detail lux-master-header .lux-master-header-collapse button.lux-button:not(.mat-fab):not(.mat-raised-button):focus{background-color:rgba(0,0,0,.2)!important}lux-file-list .lux-file-list{border:4px solid transparent}lux-file-list .lux-file-list:focus{outline-width:0;border:4px solid rgba(112,141,170,.2)!important}lux-file-list .lux-file-list .lux-file-list-entry{border:4px solid transparent}lux-file-list .lux-file-list .lux-file-list-entry:focus{outline-width:0;border:4px solid rgba(112,141,170,.2)!important}lux-file-list .lux-file-list mat-card{margin:4px}.lux-menu-panel .lux-menu-item:not([disabled=true]):focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}.lux-menu-panel .lux-menu-item:not([disabled=true]):hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-dialog-structure lux-dialog-content:focus,lux-dialog-structure lux-dialog-title:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}example-root .example-base-components-list .example-component-list-item,example-root .example-base-components-list mat-expansion-panel-header{box-sizing:border-box}example-root .example-base-components-list .example-component-list-item.example-component-list-item-selected,example-root .example-base-components-list mat-expansion-panel-header.example-component-list-item-selected{background-color:rgba(112,141,170,.2)!important;position:relative;border-radius:4px}example-root .example-base-components-list .example-component-list-item.example-component-list-item-selected:after,example-root .example-base-components-list mat-expansion-panel-header.example-component-list-item-selected:after{content:'';left:0;width:6px;top:0;bottom:0;position:absolute;border-left:6px solid #0073b3;border-radius:4px 0 0 4px}example-root .example-base-components-list .example-component-list-item:focus,example-root .example-base-components-list mat-expansion-panel-header:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}example-root .example-base-components-list .example-component-list-item:hover,example-root .example-base-components-list mat-expansion-panel-header:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}.lux-app-container,body,html{height:100%}.lux-app-container{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex}body{-webkit-overflow-scrolling:touch}div{font-family:Roboto,Helvetica Neue,sans-serif}.cdk-overlay-backdrop.cdk-overlay-backdrop-showing.lux-file-preview-backdrop{background:#000;opacity:.8!important}lux-card.lux-card-grow{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;width:400px;min-width:0}lux-card.lux-card-grow mat-card,lux-card.lux-card-grow mat-card-content{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0}.lux-crop{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.lux-label{color:rgba(0,0,0,.54);font-size:75%}.lux-hint{color:rgba(0,0,0,.6);font-size:12px}.lux-display-none{display:none}.lux-hidden{visibility:hidden}.lux-nowrap{white-space:nowrap}.lux-cursor{cursor:pointer}.lux-block-pointer-events{pointer-events:none}.lux-vertical-align-baseline{vertical-align:baseline!important}.lux-black-semi-transparent{color:rgba(0,0,0,.87)}.lux-semi-transparent{opacity:.6}.lux-overflow-y-hidden{overflow-y:hidden}.lux-overflow-y-auto{overflow-y:auto}.lux-overflow-wrap-break-word{overflow-wrap:break-word}.lux-bold{font-weight:700!important}.lux-uppercase{text-transform:uppercase!important}.lux-lowercase{text-transform:lowercase!important}.lux-hyphenate{overflow-wrap:break-word;word-wrap:break-word;word-break:normal;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow-x:auto}.lux-p-footer,.lux-p-header{padding:8px}.lux-snackbar{top:68px;right:8px;position:absolute;margin:0!important;min-width:unset!important;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-snack-bar-handset .lux-snackbar{left:8px;width:auto!important}.lux-mt-0{margin-top:0}.lux-pt-0{padding-top:0}.lux-mt-1{margin-top:2px}.lux-pt-1{padding-top:2px}.lux-mt-2{margin-top:4px}.lux-pt-2{padding-top:4px}.lux-mt-3{margin-top:8px}.lux-pt-3{padding-top:8px}.lux-mt-4{margin-top:16px}.lux-pt-4{padding-top:16px}.lux-mb-0{margin-bottom:0}.lux-pb-0{padding-bottom:0}.lux-mb-1{margin-bottom:2px}.lux-pb-1{padding-bottom:2px}.lux-mb-2{margin-bottom:4px}.lux-pb-2{padding-bottom:4px}.lux-mb-3{margin-bottom:8px}.lux-pb-3{padding-bottom:8px}.lux-mb-4{margin-bottom:16px}.lux-pb-4{padding-bottom:16px}.lux-ml-0{margin-left:0}.lux-pl-0{padding-left:0}.lux-ml-1{margin-left:2px}.lux-pl-1{padding-left:2px}.lux-ml-2{margin-left:4px}.lux-pl-2{padding-left:4px}.lux-ml-3{margin-left:8px}.lux-pl-3{padding-left:8px}.lux-ml-4{margin-left:16px}.lux-pl-4{padding-left:16px}.lux-m-0{margin:0}.lux-mr-0{margin-right:0}.lux-p-0{padding:0}.lux-pr-0{padding-right:0}.lux-m-1{margin:2px}.lux-mr-1{margin-right:2px}.lux-p-1{padding:2px}.lux-pr-1{padding-right:2px}.lux-m-2{margin:4px}.lux-mr-2{margin-right:4px}.lux-p-2{padding:4px}.lux-pr-2{padding-right:4px}.lux-m-3{margin:8px}.lux-mr-3{margin-right:8px}.lux-p-3{padding:8px}.lux-pr-3{padding-right:8px}.lux-m-4{margin:16px}.lux-mr-4{margin-right:16px}.lux-p-4{padding:16px}.lux-pr-4{padding-right:16px}.lux-flex-layout-gap-10[style*=row]>:not(:last-child){margin-right:10px}.lux-flex-layout-gap-10[style*=column]>:not(:last-child){margin-bottom:10px}.lux-flex-layout-gap-20[style*=row]>:not(:last-child){margin-right:20px}.lux-flex-layout-gap-20[style*=column]>:not(:last-child){margin-bottom:20px}.lux-flex-layout-gap-30[style*=row]>:not(:last-child){margin-right:30px}.lux-flex-layout-gap-30[style*=column]>:not(:last-child){margin-bottom:30px}.lux-z-index-100{z-index:100}.lux-z-index-500{z-index:500}.lux-z-index-1000{z-index:1000}.lux-uppercase>lux-button .lux-button-label,lux-button.lux-uppercase .lux-button-label{text-transform:uppercase}.lux-bg-color-red{background:#b01211}.lux-bg-color-green{background:#95bc4c}.lux-bg-color-yellow{background:#ebc000}.lux-bg-color-blue{background:#335c85}.lux-bg-color-gray{background:#c8c8c8}.lux-bg-color-orange{background:#ec9c1b}.lux-bg-color-brown{background:#783f04}.lux-font-color-black{color:#000}.lux-font-color-white{color:#fff}.lux-badge-notification.mat-badge-large .mat-badge-content{font-size:15px}.lux-badge-notification.lux-badge-color-default .mat-badge-content{color:#000;background:#fff;border:1px solid rgba(0,0,0,.87)}lux-progress ::ng-deep mat-progress-bar{margin-bottom:8px}.lux-row-selected{background-color:rgba(112,141,170,.2)!important}:host{display:block;height:100%}:host>div{padding-bottom:8px}.lux-table{height:100%}.lux-table .lux-table-content{position:relative;overflow:auto;height:100%;width:100%}.lux-table .lux-table-content table{width:100%}.lux-table .lux-table-content table td.mat-table-sticky{z-index:103!important}.lux-table .lux-table-content table td:not(.mat-table-sticky){z-index:97!important}.lux-table .lux-table-content table td.mat-header-cell{z-index:103!important}.lux-table .lux-table-content table ::ng-deep tfoot td.mat-table-sticky:first-of-type{z-index:105!important}.lux-table .lux-table-content table th{vertical-align:top;height:30px}.lux-table .lux-table-content table .lux-table-header-no-data th{height:30px;vertical-align:middle}.lux-table .lux-table-content table td,.lux-table .lux-table-content table th{padding:8px}.lux-table .lux-table-content table td.lux-multiselect-td+td,.lux-table .lux-table-content table td.lux-multiselect-tf+td,.lux-table .lux-table-content table th.lux-multiselect-th+th{padding-left:16px}.lux-table .lux-table-content table ::ng-deep tr.mat-header-row{height:auto}.lux-table .lux-table-content table .lux-moved-header-title{font-size:12px;margin-top:4px}.lux-table .lux-table-content table .lux-moved-header-title:first-of-type{margin-top:8px}.lux-table .lux-table-content table td.mat-cell:last-of-type,.lux-table .lux-table-content table td.mat-footer-cell:last-of-type,.lux-table .lux-table-content table th.mat-header-cell:last-of-type{padding-right:0}.lux-table .lux-table-content table ::ng-deep tbody tr:last-of-type td{border-bottom:none}.lux-table .lux-table-content table .mat-footer-row>td{border-top:1px solid rgba(0,0,0,.12)}.lux-table .lux-table-content .lux-table-header-blocked{pointer-events:none}.lux-table.lux-hide-borders .lux-multiselect-td,.lux-table.lux-hide-borders .lux-multiselect-tf,.lux-table.lux-hide-borders td,.lux-table.lux-hide-borders th{border:unset!important}.lux-table th.lux-table-column-header-empty{display:none}.lux-table-overlay{-webkit-transition:opacity 1s;transition:opacity 1s;position:absolute}.lux-table-overlay-active{pointer-events:none;z-index:1003;left:0;right:0;top:0;bottom:0;opacity:0}.lux-table-ie mat-cell,.lux-table-ie mat-header-cell{height:1em}.lux-hide{display:none!important}.lux-multiselect-td,.lux-multiselect-tf,.lux-multiselect-th{max-width:70px;min-width:70px;width:70px;padding-right:6px;margin-right:6px}.lux-multiselect-td lux-checkbox,.lux-multiselect-tf lux-checkbox,.lux-multiselect-th lux-checkbox{pointer-events:none}.lux-multiselect-td lux-checkbox ::ng-deep .lux-form-control-label,.lux-multiselect-tf lux-checkbox ::ng-deep .lux-form-control-label,.lux-multiselect-th lux-checkbox ::ng-deep .lux-form-control-label{display:none}.lux-multiselect-td ::ng-deep .lux-form-field,.lux-multiselect-tf ::ng-deep .lux-form-field,.lux-multiselect-th ::ng-deep .lux-form-field{margin-bottom:0}.lux-multiselect-td+td,.lux-multiselect-td+th,.lux-multiselect-tf+td,.lux-multiselect-tf+th,.lux-multiselect-th+td,.lux-multiselect-th+th{padding-left:6px}.lux-multiselect-th{padding-left:6px!important;width:1%!important}.lux-multiselect-th span{text-align:start}.lux-multiselect-td,.lux-multiselect-tf:not(.lux-ignore-multiselect-tf){border-right:1px solid rgba(0,0,0,.12)}.lux-multiselect-field{cursor:pointer}.lux-table-header-no-data th{border:unset!important}.lux-multiselect-toggle-all-wrapper{position:relative}::ng-deep .lux-multiselect-toggle ::ng-deep .lux-form-control-label,::ng-deep .lux-multiselect-toggle-all ::ng-deep .lux-form-control-label{display:none}.lux-paginator-xs:not(.lux-hide) ::ng-deep .mat-paginator-container{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.lux-paginator-xs:not(.lux-hide) ::ng-deep .mat-paginator-range-actions{display:block;margin-top:10px}.lux-paginator-xs:not(.lux-hide) ::ng-deep .mat-paginator-range-actions button:first-of-type{margin-left:-10px}.lux-paginator-xs:not(.lux-hide) ::ng-deep .mat-paginator-range-label{margin:0}.lux-table-filter{display:block}.lux-aria-visible{position:absolute;font-size:0;color:transparent;width:0;height:0}"]
        }),
        tslib_1.__metadata("design:paramtypes", [LuxMediaQueryObserverService,
            LuxConsoleService,
            LiveAnnouncer])
    ], LuxTableComponent);
    return LuxTableComponent;
}());
export { LuxTableComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibHV4LXRhYmxlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BpaGstZ2ZpL2x1eC1jb21wb25lbnRzLyIsInNvdXJjZXMiOlsic3JjL2FwcC9tb2R1bGVzL2x1eC1jb21tb24vbHV4LXRhYmxlL2x1eC10YWJsZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLGlDQUFpQztBQUNqQyxPQUFPLEVBRUwsU0FBUyxFQUNULGVBQWUsRUFFZixVQUFVLEVBQ1YsWUFBWSxFQUNaLEtBQUssRUFHTCxNQUFNLEVBQ04sU0FBUyxFQUNULFNBQVMsRUFDVixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsWUFBWSxFQUFFLGdCQUFnQixFQUFFLE9BQU8sRUFBUSxNQUFNLG1CQUFtQixDQUFDO0FBRWxGLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBRzdELE9BQU8sRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFnQixNQUFNLE1BQU0sQ0FBQztBQUNqRCxPQUFPLEVBQUUsVUFBVSxFQUFFLFlBQVksRUFBRSxvQkFBb0IsRUFBRSxHQUFHLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNyRixPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDbEQsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFDckUsT0FBTyxFQUFFLDRCQUE0QixFQUFFLE1BQU0saURBQWlELENBQUM7QUFDL0YsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sc0RBQXNELENBQUM7QUFDL0YsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sb0NBQW9DLENBQUM7QUFDdkUsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBUWxEO0lBNk1FLFlBQVk7SUFFWiwyQkFDVSxhQUEyQyxFQUMzQyxVQUE2QixFQUM3QixhQUE0QjtRQUh0QyxpQkFjQztRQWJTLGtCQUFhLEdBQWIs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RSxJQUFJLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsQ0FBQzswQ0FBZ0IsVUFBVTs0REFBQztJQUNsQjtRQUFoRSxTQUFTLENBQUMsZ0JBQWdCLEVBQUUsRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsQ0FBQzswQ0FBd0IsVUFBVTtvRUFBQztJQUN6RDtRQUF6QyxlQUFlLENBQUMsdUJBQXVCLENBQUM7MENBQWUsU0FBUzsyREFBMEI7SUFPbEY7UUFBUixLQUFLLEVBQUU7Ozt1REFPUDtJQU1RO1FBQVIsS0FBSyxFQUFFOzs7OERBS1A7SUFNUTtRQUFSLEtBQUssRUFBRTs7OzBEQUdQO0lBZUQ7UUFEQyxLQUFLLEVBQUU7OztvREFjUDtJQU1RO1FBQVIsS0FBSyxFQUFFOzs7MkRBWVA7SUFhUTtRQUFSLEtBQUssRUFBRTswQ0FBMkIsR0FBRztpREFBSCxHQUFHO3dEQVVyQztJQVFRO1FBQVIsS0FBSyxFQUFFOzs7eURBRVA7SUFPUTtRQUFSLEtBQUssRUFBRTs7OzJEQUVQO0lBOUtVLGlCQUFpQjtRQU43QixTQUFTLENBQUM7WUFDVCxRQUFRLEVBQUUsV0FBVztZQUNyQix5blNBQXlDO1lBRXpDLFNBQVMsRUFBRSxDQUFDLEVBQUUsT0FBTyxFQUFFLGdCQUFnQixFQUFFLFFBQVEsRUFBRSxnQkFBZ0IsRUFBRSxDQUFDOztTQUN2RSxDQUFDO2lEQWlOeUIsNEJBQTRCO1lBQy9CLGlCQUFpQjtZQUNkLGFBQWE7T0FsTjNCLGlCQUFpQixDQTJ0QjdCO0lBQUQsd0JBQUM7Q0FBQSxBQTN0QkQsSUEydEJDO1NBM3RCWSxpQkFBaUIiLCJzb3VyY2VzQ29udGVudCI6WyIvLyB0c2xpbnQ6ZGlzYWJsZTptZW1iZXItb3JkZXJpbmdcbmltcG9ydCB7XG4gIEFmdGVyVmlld0luaXQsXG4gIENvbXBvbmVudCxcbiAgQ29udGVudENoaWxkcmVuLFxuICBEb0NoZWNrLFxuICBFbGVtZW50UmVmLFxuICBFdmVudEVtaXR0ZXIsXG4gIElucHV0LFxuICBPbkRlc3Ryb3ksXG4gIE9uSW5pdCxcbiAgT3V0cHV0LFxuICBRdWVyeUxpc3QsXG4gIFZpZXdDaGlsZFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE1hdFBhZ2luYXRvciwgTWF0UGFnaW5hdG9ySW50bCwgTWF0U29ydCwgU29ydCB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsJztcbmltcG9ydCB7IElDdXN0b21DU1NDb25maWcgfSBmcm9tICcuL2x1eC10YWJsZS1jdXN0b20tY3NzLWNvbmZpZy5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgTHV4VGFibGVEYXRhU291cmNlIH0gZnJvbSAnLi9sdXgtdGFibGUtZGF0YS1zb3VyY2UnO1xuaW1wb3J0IHsgSUx1eFRhYmxlSHR0cERhb1N0cnVjdHVyZSB9IGZyb20gJy4vbHV4LXRhYmxlLWh0dHAvbHV4LXRhYmxlLWh0dHAtZGFvLXN0cnVjdHVyZS5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgSUx1eFRhYmxlSHR0cERhbyB9IGZyb20gJy4vbHV4LXRhYmxlLWh0dHAvbHV4LXRhYmxlLWh0dHAtZGFvLmludGVyZmFjZSc7XG5pbXBvcnQgeyBvZiwgU3ViamVjdCwgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBjYXRjaEVycm9yLCBkZWJvdW5jZVRpbWUsIGRpc3RpbmN0VW50aWxDaGFuZ2VkLCB0YXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBMdXhVdGlsIH0gZnJvbSAnLi4vLi4vbHV4LXV0aWwvbHV4LXV0aWwnO1xuaW1wb3J0IHsgTHV4UGFnaW5hdG9ySW50bCB9IGZyb20gJy4uLy4uL2x1eC11dGlsL2x1eC1wYWdpbmF0b3ItaW50bCc7XG5pbXBvcnQgeyBMdXhNZWRpYVF1ZXJ5T2JzZXJ2ZXJTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vbHV4LXV0aWwvbHV4LW1lZGlhLXF1ZXJ5LW9ic2VydmVyLnNlcnZpY2UnO1xuaW1wb3J0IHsgTHV4VGFibGVDb2x1bW5Db21wb25lbnQgfSBmcm9tICcuL2x1eC10YWJsZS1zdWJjb21wb25lbnRzL2x1eC10YWJsZS1jb2x1bW4uY29tcG9uZW50JztcbmltcG9ydCB7IEx1eENvbnNvbGVTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vbHV4LXV0aWwvbHV4LWNvbnNvbGUuc2VydmljZSc7XG5pbXBvcnQgeyBMaXZlQW5ub3VuY2VyIH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2ExMXknO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdsdXgtdGFibGUnLFxuICB0ZW1wbGF0ZVVybDogJy4vbHV4LXRhYmxlLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vbHV4LXRhYmxlLmNvbXBvbmVudC5zY3NzJ10sXG4gIHByb3ZpZGVyczogW3sgcHJvdmlkZTogTWF0UGFnaW5hdG9ySW50bCwgdXNlQ2xhc3M6IEx1eFBhZ2luYXRvckludGwgfV1cbn0pXG5leHBvcnQgY2xhc3MgTHV4VGFibGVDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQsIERvQ2hlY2ssIE9uRGVzdHJveSB7XG4gIHN0YXRpYyBBVVRPX1BBR0lOQVRJT05fU1RBUlQ6IG51bWJlciA9IDEwMDsgLy8gMTAwIEVsZW1lbnRlIGJpcyBhdXRvbWF0aXNjaCBkaWUgUGFnaW5hdGlvbiBha3RpdmllcnQgd2lyZFxuXG4gIHByaXZhdGUgX2x1eENsYXNzZXM6IElDdXN0b21DU1NDb25maWcgfCBJQ3VzdG9tQ1NTQ29uZmlnW10gPSBbXTtcbiAgcHJpdmF0ZSBfbHV4U2hvd1BhZ2luYXRpb246IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBfZGF0YUNvbHVtbkRlZnM6IHN0cmluZ1tdID0gW107XG4gIHByaXZhdGUgX2x1eE11bHRpU2VsZWN0OiBib29sZWFuO1xuICBwcml2YXRlIF9sdXhTaG93RmlsdGVyOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgX2RhdGFTb3VyY2U6IEx1eFRhYmxlRGF0YVNvdXJjZTxhbnk+ID0gbmV3IEx1eFRhYmxlRGF0YVNvdXJjZTxhbnk+KFtdKTtcbiAgcHJpdmF0ZSBfbHV4UGlja1ZhbHVlID0gbyA9PiBvO1xuICBwcml2YXRlIF9sdXhDb21wYXJlV2l0aCA9IChvMSwgbzIpID0+IG8xID09PSBvMjtcblxuICBwcml2YXRlIHByZXZpb3VzV2lkdGg6IG51bWJlcjtcbiAgcHJpdmF0ZSBwcmV2aW91c0hlaWdodDogbnVtYmVyO1xuICBwcml2YXRlIGh0dHBSZXF1ZXN0Q29uZjogeyBwYWdlPzsgcGFnZVNpemU/OyBmaWx0ZXI/OyBzb3J0Pzsgb3JkZXI/IH0gPSB7fTtcblxuICBwcml2YXRlIG1lZGlhUXVlcnlTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcbiAgcHJpdmF0ZSBodHRwRGFvU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XG4gIHByaXZhdGUgZmlsdGVyQ2hhbmdlZFN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xuICBwcml2YXRlIGNvbHVtblN1YnNjcmlwdGlvbnM6IFN1YnNjcmlwdGlvbltdID0gW107XG4gIHByaXZhdGUgdGFibGVDb2x1bW5zQ2hhbmdlZFN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xuICBwcml2YXRlIHNvcnRDaGFuZ2VkU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XG4gIHByaXZhdGUgcGFnaW5hdG9yUGFnZVN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xuICBwcml2YXRlIHNlbGVjdGVkU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XG5cbiAgZmlsdGVyZWQkOiBTdWJqZWN0PHN0cmluZz4gPSBuZXcgU3ViamVjdDxzdHJpbmc+KCk7XG4gIGN1cnJlbnRDdXN0b21DbGFzc2VzOiB7IGVudHJ5OiBhbnk7IGNsYXNzZXM6IHN0cmluZyB9W10gPSBbXTtcbiAgaXNMb2FkaW5nUmVzdWx0czogYm9vbGVhbjtcbiAgaXNJRTogYm9vbGVhbiA9IGZhbHNlO1xuICBhbGxTZWxlY3RlZDogYm9vbGVhbjtcbiAgbWVkaWFRdWVyeTogc3RyaW5nO1xuICBtb3ZlZFRhYmxlQ29sdW1uczogTHV4VGFibGVDb2x1bW5Db21wb25lbnRbXSA9IFtdO1xuICB0YWJsZU1pbldpZHRoOiBzdHJpbmc7XG4gIHRhYmxlSGVpZ2h0Q1NTQ2FsYzogc3RyaW5nO1xuXG4gIEBJbnB1dCgpIGx1eENvbFdpZHRoc1BlcmNlbnQ6IG51bWJlcltdID0gW107XG4gIEBJbnB1dCgpIGx1eEZpbHRlclRleHQ6IHN0cmluZyA9ICdGaWx0ZXInO1xuICBASW5wdXQoKSBsdXhOb0RhdGFUZXh0OiBzdHJpbmcgPSAnS2VpbmUgRGF0ZW4gZ2VmdW5kZW4uJztcbiAgQElucHV0KCkgbHV4UGFnZVNpemU6IG51bWJlciA9IDEwO1xuICBASW5wdXQoKSBsdXhQYWdlU2l6ZU9wdGlvbnMgPSBbNSwgMTAsIDI1LCA1MF07XG4gIEBJbnB1dCgpIGx1eEh0dHBEQU86IElMdXhUYWJsZUh0dHBEYW87XG4gIEBJbnB1dCgpIGx1eE1pbldpZHRoUHg6IG51bWJlciA9IC0xO1xuICBASW5wdXQoKSBsdXhBdXRvUGFnaW5hdGU6IGJvb2xlYW4gPSB0cnVlO1xuICBASW5wdXQoKSBsdXhIaWRlQm9yZGVyczogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIEBPdXRwdXQoKSBsdXhTZWxlY3RlZENoYW5nZTogRXZlbnRFbWl0dGVyPGFueVtdPiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55W10+KCk7XG5cbiAgQFZpZXdDaGlsZChNYXRQYWdpbmF0b3IsIHsgc3RhdGljOiB0cnVlIH0pIHBhZ2luYXRvcjogTWF0UGFnaW5hdG9yO1xuICBAVmlld0NoaWxkKE1hdFNvcnQsIHsgc3RhdGljOiB0cnVlIH0pIHNvcnQ6IE1hdFNvcnQ7XG4gIEBWaWV3Q2hpbGQoJ3BhZ2luYXRvcicsIHsgcmVhZDogRWxlbWVudFJlZiwgc3RhdGljOiB0cnVlIH0pIHBhZ2luYXRvckVsZW1lbnQ6IEVsZW1lbnRSZWY7XG4gIEBWaWV3Q2hpbGQoJ2ZpbHRlcicsIHsgcmVhZDogRWxlbWVudFJlZiwgc3RhdGljOiB0cnVlIH0pIGZpbHRlckVsZW1lbnQ6IEVsZW1lbnRSZWY7XG4gIEBWaWV3Q2hpbGQoJ3RhYmxlQ29udGFpbmVyJywgeyByZWFkOiBFbGVtZW50UmVmLCBzdGF0aWM6IHRydWUgfSkgdGFibGVDb250YWluZXJFbGVtZW50OiBFbGVtZW50UmVmO1xuICBAQ29udGVudENoaWxkcmVuKEx1eFRhYmxlQ29sdW1uQ29tcG9uZW50KSB0YWJsZUNvbHVtbnM6IFF1ZXJ5TGlzdDxMdXhUYWJsZUNvbHVtbkNvbXBvbmVudD47XG5cbiAgLy8gcmVnaW9uIFNldHRlci9HZXR0ZXJzXG4gIGdldCBsdXhDbGFzc2VzKCk6IElDdXN0b21DU1NDb25maWcgfCBJQ3VzdG9tQ1NTQ29uZmlnW10ge1xuICAgIHJldHVybiB0aGlzLl9sdXhDbGFzc2VzO1xuICB9XG5cbiAgQElucHV0KCkgc2V0IGx1eENsYXNzZXMoY2xhc3NlczogSUN1c3RvbUNTU0NvbmZpZyB8IElDdXN0b21DU1NDb25maWdbXSkge1xuICAgIGlmIChjbGFzc2VzICYmICFBcnJheS5pc0FycmF5KGNsYXNzZXMpKSB7XG4gICAgICBjbGFzc2VzID0gW2NsYXNzZXNdO1xuICAgIH1cblxuICAgIHRoaXMuX2x1eENsYXNzZXMgPSBjbGFzc2VzO1xuICAgIHRoaXMuaW5zZXJ0Q3VzdG9tQ1NTQ2xhc3NlcygpO1xuICB9XG5cbiAgZ2V0IGx1eFNob3dQYWdpbmF0aW9uKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9sdXhTaG93UGFnaW5hdGlvbjtcbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBsdXhTaG93UGFnaW5hdGlvbihzaG93OiBib29sZWFuKSB7XG4gICAgdGhpcy5fbHV4U2hvd1BhZ2luYXRpb24gPSBzaG93O1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5oYW5kbGVQYWdpbmF0aW9uKCk7XG4gICAgfSk7XG4gIH1cblxuICBnZXQgbHV4U2hvd0ZpbHRlcigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fbHV4U2hvd0ZpbHRlcjtcbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBsdXhTaG93RmlsdGVyKHNob3c6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9sdXhTaG93RmlsdGVyID0gc2hvdztcbiAgICB0aGlzLmhhbmRsZUZpbHRlcigpO1xuICB9XG5cbiAgZ2V0IGRhdGFDb2x1bW5EZWZzKCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gdGhpcy5fZGF0YUNvbHVtbkRlZnM7XG4gIH1cblxuICBnZXQgZGF0YVNvdXJjZSgpOiBMdXhUYWJsZURhdGFTb3VyY2U8YW55PiB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGFTb3VyY2U7XG4gIH1cblxuICBnZXQgbHV4RGF0YSgpOiBhbnlbXSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YVNvdXJjZS5kYXRhO1xuICB9XG5cbiAgQElucHV0KClcbiAgc2V0IGx1eERhdGEoZGF0YTogYW55W10pIHtcbiAgICBkYXRhID0gZGF0YSA/IGRhdGEgOiBbXTtcbiAgICB0aGlzLmRhdGFTb3VyY2UuZGF0YSA9IGRhdGE7XG4gICAgaWYgKHRoaXMuZGF0YVNvdXJjZSkge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMudXBkYXRlRGF0YVNvdXJjZUF0dHJpYnV0ZXMoZGF0YSk7XG4gICAgICAgIHRoaXMuaGFuZGxlU29ydCgpO1xuICAgICAgICB0aGlzLmluc2VydEN1c3RvbUNTU0NsYXNzZXMoKTtcbiAgICAgICAgdGhpcy51cGRhdGVDb2x1bW5zQnlNZWRpYVF1ZXJ5KCk7XG4gICAgICAgIHRoaXMuY2FsY3VsYXRlUHJvcG9ydGlvbnMoKTtcbiAgICAgICAgdGhpcy51cGRhdGVTZWxlY3Rpb24oKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGdldCBsdXhNdWx0aVNlbGVjdCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fbHV4TXVsdGlTZWxlY3Q7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgbHV4TXVsdGlTZWxlY3QobXVsdGlTZWxlY3Q6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9sdXhNdWx0aVNlbGVjdCA9IG11bHRpU2VsZWN0O1xuICAgIGlmICh0aGlzLmx1eE11bHRpU2VsZWN0KSB7XG4gICAgICB0aGlzLmx1eFNlbGVjdGVkLmNsZWFyKCk7XG4gICAgICB0aGlzLl9kYXRhQ29sdW1uRGVmcy51bnNoaWZ0KCdtdWx0aVNlbGVjdCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9kYXRhQ29sdW1uRGVmcyA9IHRoaXMuX2RhdGFDb2x1bW5EZWZzLmZpbHRlcigoY29sOiBzdHJpbmcpID0+IGNvbCAhPT0gJ211bHRpU2VsZWN0Jyk7XG4gICAgfVxuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmNhbGN1bGF0ZVByb3BvcnRpb25zKCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIF9sdXhTZWxlY3RlZDogU2V0PGFueT4gPSBuZXcgU2V0KCk7XG5cbiAgZ2V0IGx1eFNlbGVjdGVkKCk6IFNldDxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy5fbHV4U2VsZWN0ZWQ7XG4gIH1cblxuICAvKipcbiAgICogRGllIEF1c3dhaGwgZGVyIFNlbGVrdGllcnRlbiBFbGVtZW50ZSBpc3QgZWlnZW50bGljaCBlaW4gU2V0LFxuICAgKiBuaW1tdCBhYmVyIEFycmF5cyB2b24gQXXDn2VuIGVudGdlZ2VuICh6dXIgVmVyZWluZmFjaHVuZykuXG4gICAqIEBwYXJhbSBzZWxlY3RlZFxuICAgKi9cbiAgQElucHV0KCkgc2V0IGx1eFNlbGVjdGVkKHNlbGVjdGVkOiBTZXQ8YW55Pikge1xuICAgIHRoaXMubHV4U2VsZWN0ZWQuY2xlYXIoKTtcbiAgICBpZiAoc2VsZWN0ZWQpIHtcbiAgICAgIHNlbGVjdGVkLmZvckVhY2goZW50cnkgPT4ge1xuICAgICAgICB0aGlzLmx1eFNlbGVjdGVkLmFkZChlbnRyeSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHRoaXMubHV4RGF0YSAmJiB0aGlzLmx1eERhdGEubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy51cGRhdGVTZWxlY3Rpb24oKTtcbiAgICB9XG4gIH1cblxuICBnZXQgbHV4UGlja1ZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLl9sdXhQaWNrVmFsdWU7XG4gIH1cblxuICAvLyBGdW5rdGlvbiwgdW0gZGVuIHp1IHZlcmdsZWljaGVuZGVuIFdlcnQgYXVzIGRlbiBlaW56ZWxuZW4gT2JqZWt0ZW4genUgemllaGVuLlxuICAvLyBTdGFuZGFyZG3DpMOfaWcgZWluZmFjaCBkYXMgT2JqZWt0IHp1csO8Y2tnZWJlbi5cbiAgQElucHV0KCkgc2V0IGx1eFBpY2tWYWx1ZShwaWNrRm4pIHtcbiAgICB0aGlzLl9sdXhQaWNrVmFsdWUgPSBwaWNrRm4gPyBwaWNrRm4gOiBvID0+IG87XG4gIH1cblxuICBnZXQgbHV4Q29tcGFyZVdpdGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2x1eENvbXBhcmVXaXRoO1xuICB9XG5cbiAgLy8gVmVyZ2xlaWNoc2Z1bmt0aW9uOyB2ZXJnbGVpY2h0IHN0YW5kYXJkbcOkw59pZyBlaW5mYWNoIGRpZSBSZWZlcmVuemVuIGRlciBiZWlkZW4gT2JqZWt0ZS5cbiAgQElucHV0KCkgc2V0IGx1eENvbXBhcmVXaXRoKGNvbXBhcmVGbikge1xuICAgIHRoaXMuX2x1eENvbXBhcmVXaXRoID0gY29tcGFyZUZuID8gY29tcGFyZUZuIDogKG8xLCBvMikgPT4gbzEgPT09IG8yO1xuICB9XG5cbiAgLyoqXG4gICAqIEVpZ2VuZSBJbXBsZW1lbnRpZXJ1bmcgZGVyIEZpbHRlcnVuZyBmw7xyIGRpZXNlIFRhYmVsbGUuXG4gICAqIEl0ZXJpZXJ0IMO8YmVyIGRpZSBWYWx1ZXMgZGVzIGVpbnplbG5lbiBPYmpla3RlcyB1bmQgcHLDvGZ0IGRhbm4gb2IgZGVyIEZpbHRlci1XZXJ0IGlyZ2VuZHdvIHZvcmtvbW10LlxuICAgKiBAcGFyYW0gZGF0YVxuICAgKiBAcGFyYW0gZmlsdGVyXG4gICAqL1xuICBwcml2YXRlIGN1c3RvbUZpbHRlclByZWRpY2F0ZSA9IChkYXRhOiBhbnksIGZpbHRlcjogc3RyaW5nID0gJycpID0+IHtcbiAgICBmb3IgKGNvbnN0IHByb3BlcnR5IGluIGRhdGEpIHtcbiAgICAgIGlmIChkYXRhLmhhc093blByb3BlcnR5KHByb3BlcnR5KSkge1xuICAgICAgICBjb25zdCBkYXRhRW50cnkgPSBkYXRhW3Byb3BlcnR5XTtcbiAgICAgICAgaWYgKEx1eFV0aWwuaXNEYXRlKGRhdGFFbnRyeSkpIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBkYXRhRW50cnlcbiAgICAgICAgICAgICAgLnRvTG9jYWxlU3RyaW5nKClcbiAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgLmluZGV4T2YoZmlsdGVyKSA+IC0xXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKChkYXRhRW50cnkgKyAnJykudG9Mb3dlckNhc2UoKS5pbmRleE9mKGZpbHRlcikgPiAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICAvLyBlbmRyZWdpb25cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHF1ZXJ5T2JzZXJ2ZXI6IEx1eE1lZGlhUXVlcnlPYnNlcnZlclNlcnZpY2UsXG4gICAgcHJpdmF0ZSBsdXhDb25zb2xlOiBMdXhDb25zb2xlU2VydmljZSxcbiAgICBwcml2YXRlIGxpdmVBbm5vdW5jZXI6IExpdmVBbm5vdW5jZXJcbiAgKSB7XG4gICAgLy8gRGF0YXNvdXJjZSB1bSBlaWdlbmUgRmlsdGVyLUZ1bmt0aW9uYWxpdGFldCBlcmdhZW56ZW5cbiAgICB0aGlzLmRhdGFTb3VyY2UuZmlsdGVyUHJlZGljYXRlID0gdGhpcy5jdXN0b21GaWx0ZXJQcmVkaWNhdGU7XG5cbiAgICB0aGlzLmlzSUUgPSBMdXhVdGlsLmlzSUVvckVkZ2UoKTtcblxuICAgIHRoaXMubWVkaWFRdWVyeVN1YnNjcmlwdGlvbiA9IHRoaXMucXVlcnlPYnNlcnZlci5nZXRNZWRpYVF1ZXJ5Q2hhbmdlZEFzT2JzZXJ2YWJsZSgpLnN1YnNjcmliZSgocXVlcnk6IHN0cmluZykgPT4ge1xuICAgICAgdGhpcy5tZWRpYVF1ZXJ5ID0gcXVlcnk7XG4gICAgICB0aGlzLnVwZGF0ZUNvbHVtbnNCeU1lZGlhUXVlcnkoKTtcbiAgICB9KTtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMubHV4SHR0cERBTykge1xuICAgICAgICB0aGlzLmxvYWRIdHRwREFPRGF0YSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy51cGRhdGVEYXRhU291cmNlQXR0cmlidXRlcyh0aGlzLmx1eERhdGEpO1xuICAgICAgICB0aGlzLmhhbmRsZVNvcnQoKTtcbiAgICAgICAgdGhpcy5pbnNlcnRDdXN0b21DU1NDbGFzc2VzKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgaWYgKHRoaXMudGFibGVDb2x1bW5zKSB7XG4gICAgICAvLyBGw7xyIGRlbiBGYWxsIGRhcyBTcGFsdGVuIHdlZ2ZhbGxlbi9kYXp1IGtvbW1lblxuICAgICAgdGhpcy50YWJsZUNvbHVtbnNDaGFuZ2VkU3Vic2NyaXB0aW9uID0gdGhpcy50YWJsZUNvbHVtbnMuY2hhbmdlcy5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICB0aGlzLnVwZGF0ZUNvbHVtbnNCeU1lZGlhUXVlcnkoKTtcbiAgICAgICAgdGhpcy51cGRhdGVDb2x1bW5TdWJzY3JpcHRpb25zKCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gRsO8ciBkZW4gRmFsbCBkYXMgc2ljaCDDhG5kZXJ1bmdlbiBpbm5lcmhhbGIgZGVyIFNwYWx0ZW4gZXJnZWJlblxuICAgICAgdGhpcy51cGRhdGVDb2x1bW5TdWJzY3JpcHRpb25zKCk7XG5cbiAgICAgIC8vIE5hY2ggZGVtIEluaXQgc29sbHRlbiBlaW5tYWwgZGllIFNwYWx0ZW4gYWt0dWFsaXNpZXJ0IHdlcmRlblxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMudXBkYXRlQ29sdW1uc0J5TWVkaWFRdWVyeSgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMubHV4U2hvd1BhZ2luYXRpb24pIHtcbiAgICAgIHRoaXMuaGFuZGxlUGFnaW5hdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIG5nRG9DaGVjaygpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLnRhYmxlQ29udGFpbmVyRWxlbWVudC5uYXRpdmVFbGVtZW50Lm9mZnNldFdpZHRoICE9PSB0aGlzLnByZXZpb3VzV2lkdGggfHxcbiAgICAgIHRoaXMudGFibGVDb250YWluZXJFbGVtZW50Lm5hdGl2ZUVsZW1lbnQub2Zmc2V0SGVpZ2h0ICE9PSB0aGlzLnByZXZpb3VzSGVpZ2h0XG4gICAgKSB7XG4gICAgICB0aGlzLnByZXZpb3VzV2lkdGggPSB0aGlzLnRhYmxlQ29udGFpbmVyRWxlbWVudC5uYXRpdmVFbGVtZW50Lm9mZnNldFdpZHRoO1xuICAgICAgdGhpcy5wcmV2aW91c0hlaWdodCA9IHRoaXMudGFibGVDb250YWluZXJFbGVtZW50Lm5hdGl2ZUVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuXG4gICAgICB0aGlzLmNhbGN1bGF0ZVByb3BvcnRpb25zKCk7XG4gICAgfVxuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgLy8gU3Vic2NyaXB0aW9ucyBhdWZsw7ZzZW5cbiAgICB0aGlzLmNvbHVtblN1YnNjcmlwdGlvbnMuZm9yRWFjaCgoc3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb24pID0+IHtcbiAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIH0pO1xuICAgIGlmICh0aGlzLmh0dHBEYW9TdWJzY3JpcHRpb24pIHtcbiAgICAgIHRoaXMuaHR0cERhb1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5maWx0ZXJDaGFuZ2VkU3Vic2NyaXB0aW9uKSB7XG4gICAgICB0aGlzLmZpbHRlckNoYW5nZWRTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMudGFibGVDb2x1bW5zQ2hhbmdlZFN1YnNjcmlwdGlvbikge1xuICAgICAgdGhpcy50YWJsZUNvbHVtbnNDaGFuZ2VkU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLnNvcnRDaGFuZ2VkU3Vic2NyaXB0aW9uKSB7XG4gICAgICB0aGlzLnNvcnRDaGFuZ2VkU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLnBhZ2luYXRvclBhZ2VTdWJzY3JpcHRpb24pIHtcbiAgICAgIHRoaXMucGFnaW5hdG9yUGFnZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5zZWxlY3RlZFN1YnNjcmlwdGlvbikge1xuICAgICAgdGhpcy5zZWxlY3RlZFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBaaWVodCBzaWNoIGRpZSBha3R1ZWxsZW4gQ1NTLUtsYXNzZW4gYXVzIGRlbiB6dWdld2llc2VuZW5cbiAgICogQ1NTLUtsYXNzZW4uXG4gICAqIEBwYXJhbSByb3dcbiAgICogQHJldHVybnMgc3RyaW5nXG4gICAqL1xuICBnZXRDdXN0b21DbGFzc2VzRm9ySW5kZXgocm93OiBhbnkpOiBzdHJpbmcge1xuICAgIGNvbnN0IGN1c3RvbUNsYXNzZXMgPSB0aGlzLmN1cnJlbnRDdXN0b21DbGFzc2VzLmZpbmQodmFsdWUgPT4gdmFsdWUuZW50cnkgPT09IHJvdyk7XG4gICAgcmV0dXJuIGN1c3RvbUNsYXNzZXMgPyBjdXN0b21DbGFzc2VzLmNsYXNzZXMgOiAnJztcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFja0J5LUZ1bmt0aW9uIHVtIGRpZSBUYWJlbGxlIGV0d2FzIHNjaG5lbGxlciB6dSBtYWNoZW4uXG4gICAqIEBwYXJhbSBpbmRleFxuICAgKiBAcGFyYW0gaXRlbVxuICAgKi9cbiAgdHJhY2tGbihpbmRleCwgaXRlbSkge1xuICAgIHJldHVybiBpbmRleDtcbiAgfVxuXG4gIC8qKlxuICAgKiBXaXJkIGJlaW0gS2xpY2sgYXVmIGVpbmUgUm93IGF1ZmdlcnVmZW4gdW5kIGhhbmRlbHQgZGFzIFNpY2hlcm4gdW5kIEVudGZlcm5lbiB2b25cbiAgICogc2VsZWt0aWVydGVuIEVpbnRyw6RnZW4uXG4gICAqIEBwYXJhbSBlbnRyeVxuICAgKi9cbiAgY2hhbmdlU2VsZWN0ZWRFbnRyeShlbnRyeTogYW55KSB7XG4gICAgaWYgKHRoaXMubHV4TXVsdGlTZWxlY3QpIHtcbiAgICAgIGlmICh0aGlzLmx1eFNlbGVjdGVkLmhhcyhlbnRyeSkpIHtcbiAgICAgICAgdGhpcy5sdXhTZWxlY3RlZC5kZWxldGUoZW50cnkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5sdXhTZWxlY3RlZC5hZGQoZW50cnkpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5sdXhTZWxlY3RlZC5oYXMoZW50cnkpKSB7XG4gICAgICAgIC8vIFdlbm4gZGVyIHNlbGVrdGllcnRlIEVpbnRyYWcgZXJuZXV0IGFuZ2VrbGlja3Qgd2lyZCxcbiAgICAgICAgLy8gd2lyZCBkaWUgU2VsZWt0aW9uIGVudGZlcm50LlxuICAgICAgICB0aGlzLmx1eFNlbGVjdGVkLmNsZWFyKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmx1eFNlbGVjdGVkLmNsZWFyKCk7XG4gICAgICAgIHRoaXMubHV4U2VsZWN0ZWQuYWRkKGVudHJ5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmx1eFNlbGVjdGVkQ2hhbmdlLm5leHQoQXJyYXkuZnJvbSh0aGlzLmx1eFNlbGVjdGVkKSk7XG4gICAgdGhpcy5kYXRhU291cmNlLnNlbGVjdGVkRW50cmllcyA9IHRoaXMubHV4U2VsZWN0ZWQ7XG4gICAgdGhpcy5hbGxTZWxlY3RlZCA9IHRoaXMuY2hlY2tGaWx0ZXJlZEFsbFNlbGVjdGVkKCk7XG4gIH1cblxuICAvKipcbiAgICogU2VsZWt0aWVydC9EZXNlbGVrdGllcnQgYWxsZSBFaW50csOkZ2UgaW4gZGllc2VyIFRhYmVsbGUuXG4gICAqXG4gICAqIFZvcmF1c3NldHp1bmcgZGFmw7xyIGlzdCwgZGFzIE11bHRpc2VsZWN0IGFrdGl2IGlzdCB1bmQga2VpbmUgSHR0cC1UYWJsZSB2b3JsaWVndC5cbiAgICovXG4gIGNoYW5nZVNlbGVjdGVkRW50cmllcygpIHtcbiAgICBpZiAodGhpcy5sdXhNdWx0aVNlbGVjdCAmJiAhdGhpcy5sdXhIdHRwREFPKSB7XG4gICAgICBpZiAodGhpcy5jaGVja0ZpbHRlcmVkQWxsU2VsZWN0ZWQoKSkge1xuICAgICAgICB0aGlzLmRhdGFTb3VyY2UuZmlsdGVyZWREYXRhLmZvckVhY2goKGRhdGFFbnRyeTogYW55KSA9PiB0aGlzLmx1eFNlbGVjdGVkLmRlbGV0ZShkYXRhRW50cnkpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZGF0YVNvdXJjZS5maWx0ZXJlZERhdGEuZm9yRWFjaCgoZGF0YUVudHJ5OiBhbnkpID0+IHRoaXMubHV4U2VsZWN0ZWQuYWRkKGRhdGFFbnRyeSkpO1xuICAgICAgfVxuICAgICAgdGhpcy5sdXhTZWxlY3RlZENoYW5nZS5uZXh0KEFycmF5LmZyb20odGhpcy5sdXhTZWxlY3RlZCkpO1xuICAgICAgdGhpcy5kYXRhU291cmNlLnNlbGVjdGVkRW50cmllcyA9IHRoaXMubHV4U2VsZWN0ZWQ7XG4gICAgICB0aGlzLmFsbFNlbGVjdGVkID0gdGhpcy5jaGVja0ZpbHRlcmVkQWxsU2VsZWN0ZWQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUHLDvGZ0IG9iIGRpZSBha3R1ZWxsIGFuZ2V6ZWlndGVuIEVpbnRyw6RnZSBhbGxlIHNlbGVrdGllcnQgc2luZCBvZGVyIG5pY2h0LlxuICAgKi9cbiAgY2hlY2tGaWx0ZXJlZEFsbFNlbGVjdGVkKCk6IGJvb2xlYW4ge1xuICAgIGxldCByZXN1bHQgPSB0cnVlO1xuICAgIGlmICh0aGlzLmx1eFNlbGVjdGVkLnNpemUgPT09IDApIHtcbiAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBQcsO8ZmVuIG9iIGRpZSBnZWZpbHRlcnRlbiBEYXRlbiBzZWxlY3RlZCBzaW5kXG4gICAgICB0aGlzLmRhdGFTb3VyY2UuZmlsdGVyZWREYXRhLmZvckVhY2goKGRhdGFFbnRyeTogYW55KSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5sdXhTZWxlY3RlZC5oYXMoZGF0YUVudHJ5KSkge1xuICAgICAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIEdpYnQgenVyw7xjaywgb2IgaXJnZW5kZWluIEZvb3Rlci1FbGVtZW50IGbDvHIgZGllc2UgVGFiZWxsZSBha3R1ZWxsIHNpY2h0YmFyIGlzdC5cbiAgICovXG4gIGFueUZvb3RlcnNBdmFpbGFibGUoKSB7XG4gICAgcmV0dXJuIHRoaXMubHV4TXVsdGlTZWxlY3QgfHwgISF0aGlzLnRhYmxlQ29sdW1ucy5maW5kKChjb2x1bW46IEx1eFRhYmxlQ29sdW1uQ29tcG9uZW50KSA9PiAhIWNvbHVtbi5mb290ZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFrdHVhbGlzaWVydCBkaWUgRGF0YVNvdXJjZSB1bmQgZXZ0bC4gU3Vic2NyaXB0aW9ucyBzb3dpZSBkaWUgQ3VzdG9tQ1NTLUNsYXNzZXNcbiAgICogbmFjaCBlaW5lciDDhG5kZXJ1bmcuXG4gICAqL1xuICBwcml2YXRlIHVwZGF0ZURhdGFTb3VyY2VBdHRyaWJ1dGVzKGRhdGE6IGFueVtdKSB7XG4gICAgaWYgKCF0aGlzLmx1eEh0dHBEQU8gJiYgdGhpcy5sdXhBdXRvUGFnaW5hdGUgJiYgZGF0YSAmJiBkYXRhLmxlbmd0aCA+IEx1eFRhYmxlQ29tcG9uZW50LkFVVE9fUEFHSU5BVElPTl9TVEFSVCkge1xuICAgICAgdGhpcy5sdXhTaG93UGFnaW5hdGlvbiA9IHRydWU7XG4gICAgfVxuICAgIGlmICghdGhpcy5sdXhIdHRwREFPKSB7XG4gICAgICBpZiAodGhpcy5sdXhTaG93UGFnaW5hdGlvbikge1xuICAgICAgICB0aGlzLmhhbmRsZVBhZ2luYXRpb24oKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0aGlzLmx1eEh0dHBEQU8pIHtcbiAgICAgIHRoaXMuZGF0YVNvdXJjZS5zb3J0ID0gdGhpcy5zb3J0O1xuICAgIH1cbiAgICBpZiAoIXRoaXMubHV4SHR0cERBTykge1xuICAgICAgdGhpcy5kYXRhU291cmNlLnRvdGFsRWxlbWVudHMgPSB0aGlzLmRhdGFTb3VyY2UuZGF0YSA/IHRoaXMuZGF0YVNvdXJjZS5kYXRhLmxlbmd0aCA6IDA7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFBydWVmdCBhbmhhbmQgZGVyIG1pdGdlZ2ViZW5lbiBDYWxsYmFja3MgZGllIENTUy1LbGFzc2VuXG4gICAqIGZ1ZXIgZGllIGVpbnplbG5lbiBSb3dzLlxuICAgKi9cbiAgcHJpdmF0ZSBpbnNlcnRDdXN0b21DU1NDbGFzc2VzKCkge1xuICAgIGlmICh0aGlzLmx1eENsYXNzZXMgJiYgdGhpcy5kYXRhU291cmNlLmRhdGEpIHtcbiAgICAgIHRoaXMuY3VycmVudEN1c3RvbUNsYXNzZXMgPSBbXTtcbiAgICAgIHRoaXMuZGF0YVNvdXJjZS5kYXRhLmZvckVhY2goKGVudHJ5OiBhbnksIGk6IG51bWJlcikgPT4ge1xuICAgICAgICBsZXQgY2xhc3NlcyA9ICcnO1xuICAgICAgICAoPElDdXN0b21DU1NDb25maWdbXT50aGlzLmx1eENsYXNzZXMpLmZvckVhY2goKGNzc0NsYXNzOiBJQ3VzdG9tQ1NTQ29uZmlnKSA9PiB7XG4gICAgICAgICAgaWYgKGNzc0NsYXNzLmNoZWNrKGVudHJ5KSkge1xuICAgICAgICAgICAgY2xhc3NlcyArPSBjc3NDbGFzcy5jbGFzcyArICcgJztcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmN1cnJlbnRDdXN0b21DbGFzc2VzLnB1c2goeyBlbnRyeTogZW50cnksIGNsYXNzZXM6IGNsYXNzZXMgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2lidCBkYXMgQXJpYS1MYWJlbCBmw7xyIGRpZSBTb3J0aWVydW5nIGRlciBTcGFsdGVuLcOcYmVyc2NocmlmdCB6dXLDvGNrLlxuICAgKiBAcGFyYW0gdGFibGVDb2x1bW5EZWZcbiAgICovXG4gIGdldEFyaWFTb3J0aW5nTGFiZWwodGFibGVDb2x1bW5EZWY6IHN0cmluZykge1xuICAgIGlmICh0aGlzLnNvcnQuYWN0aXZlID09PSB0YWJsZUNvbHVtbkRlZikge1xuICAgICAgaWYgKHRoaXMuc29ydC5kaXJlY3Rpb24gPT09ICdhc2MnKSB7XG4gICAgICAgIHJldHVybiAnYXVmc3RlaWdlbmQgc29ydGllcnQnO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuc29ydC5kaXJlY3Rpb24gPT09ICdkZXNjJykge1xuICAgICAgICByZXR1cm4gJ2Fic3RlaWdlbmQgc29ydGllcnQnO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gJ25pY2h0IHNvcnRpZXJ0JztcbiAgfVxuXG4gIC8qKlxuICAgKiBHaWJ0IMO8YmVyIGRlbiBsaXZlQW5ub3VuY2VyIGVpbmUgTmFjaHJpY2h0IGF1cywgZGFzcyBzaWNoIGRpZSBTb3J0aWVydW5nIGVpbmVyIFNwYWx0ZSBnZcOkbmRlcnQgaGF0LlxuICAgKiBAcGFyYW0gJGV2ZW50XG4gICAqL1xuICBhbm5vdW5jZVNvcnRDaGFuZ2UoJGV2ZW50OiBTb3J0KSB7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLnRhYmxlQ29sdW1uc1xuICAgICAgLnRvQXJyYXkoKVxuICAgICAgLmZpbmRJbmRleCgodGFibGVDb2x1bW46IEx1eFRhYmxlQ29sdW1uQ29tcG9uZW50KSA9PiAkZXZlbnQuYWN0aXZlID09PSB0YWJsZUNvbHVtbi5sdXhDb2x1bW5EZWYpO1xuICAgIGxldCBjb2x1bW5EZWYgPSBpbmRleCA+IC0xID8gdGhpcy50YWJsZUNvbHVtbnMudG9BcnJheSgpW2luZGV4XS5sdXhDb2x1bW5EZWYgOiBudWxsO1xuICAgIGlmIChjb2x1bW5EZWYgPT09IG51bGwpIHtcbiAgICAgIGNvbHVtbkRlZiA9ICRldmVudC5hY3RpdmUgPT09ICdtdWx0aVNlbGVjdCcgPyAnbXVsdGlTZWxlY3QnIDogbnVsbDtcbiAgICB9XG4gICAgaWYgKGNvbHVtbkRlZiAhPT0gbnVsbCkge1xuICAgICAgbGV0IGRpcmVjdGlvbkRlc2NyaXB0aW9uO1xuICAgICAgc3dpdGNoICgkZXZlbnQuZGlyZWN0aW9uKSB7XG4gICAgICAgIGNhc2UgJ2Rlc2MnOlxuICAgICAgICAgIGRpcmVjdGlvbkRlc2NyaXB0aW9uID0gJ2Fic3RlaWdlbmQnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdhc2MnOlxuICAgICAgICAgIGRpcmVjdGlvbkRlc2NyaXB0aW9uID0gJ2F1ZnN0ZWlnZW5kJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnJzpcbiAgICAgICAgICBkaXJlY3Rpb25EZXNjcmlwdGlvbiA9ICduaWNodCBtZWhyJztcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHRoaXMubGl2ZUFubm91bmNlci5hbm5vdW5jZShgU3BhbHRlICR7Y29sdW1uRGVmfSBzb3J0aWVydCBudW4gJHtkaXJlY3Rpb25EZXNjcmlwdGlvbn1gLCAnYXNzZXJ0aXZlJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFrdHVhbGlzaWVydCBkaWUgbW9tZW50YW4gYW5nZXplaWd0ZW4gU3BhbHRlbiBhbmhhbmQgZGVyIGbDvHIgc2llIGRlZmluaWVydGVuXG4gICAqIFJlc3BvbnNpdmUtUXVlcmllcyB1bmQgVmVyaGFsdGVuc3dlaXNlbi5cbiAgICovXG4gIHByaXZhdGUgdXBkYXRlQ29sdW1uc0J5TWVkaWFRdWVyeSgpIHtcbiAgICBpZiAoIXRoaXMudGFibGVDb2x1bW5zKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fZGF0YUNvbHVtbkRlZnMgPSBbXTtcblxuICAgIC8vIHdlbm4gTXVsdGlzZWxlY3QsIGRhbm4gYmVuw7Z0aWdlbiB3aXIgaGllciBub2NoIGVpbmUgU3BhbHRlIG1laHJcbiAgICBpZiAodGhpcy5sdXhNdWx0aVNlbGVjdCkge1xuICAgICAgdGhpcy5fZGF0YUNvbHVtbkRlZnMucHVzaCgnbXVsdGlTZWxlY3QnKTtcbiAgICB9XG5cbiAgICB0aGlzLnRhYmxlQ29sdW1ucy5mb3JFYWNoKChjb2x1bW46IEx1eFRhYmxlQ29sdW1uQ29tcG9uZW50KSA9PiB0aGlzLl9kYXRhQ29sdW1uRGVmcy5wdXNoKGNvbHVtbi5sdXhDb2x1bW5EZWYpKTtcbiAgICB0aGlzLm1vdmVkVGFibGVDb2x1bW5zID0gW107XG4gICAgLy8gWnVlcnN0IGRpZSBhdXN6dWJsZW5kZW5kZW4gU3BhbHRlbiBkdXJjaGdlaGVuXG4gICAgdGhpcy50YWJsZUNvbHVtbnMuZm9yRWFjaCgodGFibGVDb2x1bW46IEx1eFRhYmxlQ29sdW1uQ29tcG9uZW50KSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgICh0YWJsZUNvbHVtbi5sdXhSZXNwb25zaXZlQXQgJiYgIXRhYmxlQ29sdW1uLmx1eFJlc3BvbnNpdmVCZWhhdmlvdXIpIHx8XG4gICAgICAgICghdGFibGVDb2x1bW4ubHV4UmVzcG9uc2l2ZUF0ICYmIHRhYmxlQ29sdW1uLmx1eFJlc3BvbnNpdmVCZWhhdmlvdXIpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5sdXhDb25zb2xlLmVycm9yKFxuICAgICAgICAgIGBBY2h0dW5nISBEaWUgQ29sdW1uICcke3RhYmxlQ29sdW1uLmx1eENvbHVtbkRlZn0nIGhhdCBlbnR3ZWRlciBrZWluZSBNZWRpYS1RdWVyaWVzIGAgK1xuICAgICAgICAgICAgYG9kZXIga2VpbiBSZXNwb25zaXZlLVZlcmhhbHRlbiB6dWdld2llc2VuIGJla29tbWVuLmBcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5kb2VzUmVzcG9uc2l2ZUF0QXBwbHkodGFibGVDb2x1bW4ubHV4UmVzcG9uc2l2ZUF0KSkge1xuICAgICAgICAvLyBTY2hhdWVuLCBvYiBlaW5lIFNwYWx0ZSBhbmdlZ2ViZW4gd3VyZGUsIGluIHdlbGNoZSBzaWNoIGRpZXNlIGhpZXIgdmVyc2NoaWViZW4ga2FublxuICAgICAgICBpZiAodGhpcy5fZGF0YUNvbHVtbkRlZnMuZmluZCgoY29sdW1uOiBzdHJpbmcpID0+IGNvbHVtbiA9PT0gdGFibGVDb2x1bW4ubHV4UmVzcG9uc2l2ZUJlaGF2aW91cikpIHtcbiAgICAgICAgICAvLyBXZW5uIGphLCBkaWUgU3BhbHRlIG1lcmtlbiB1bmQgdm9yZXJzdCBhdXNibGVuZGVuXG4gICAgICAgICAgdGhpcy5tb3ZlZFRhYmxlQ29sdW1ucy5wdXNoKHRhYmxlQ29sdW1uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2RhdGFDb2x1bW5EZWZzID0gdGhpcy5kYXRhQ29sdW1uRGVmcy5maWx0ZXIoXG4gICAgICAgICAgKGRhdGFDb2x1bW46IHN0cmluZykgPT4gZGF0YUNvbHVtbiAhPT0gdGFibGVDb2x1bW4ubHV4Q29sdW1uRGVmXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUHLDvGZ0IG9iIGRpZSBha3R1ZWxsZSBNZWRpYVF1ZXJ5IG1pdCBkZXIgw7xiZXJnZWJlbmVuIE1lZGlhUXVlcnkvZGVuIMO8YmVyZ2ViZW5lbiBNZWRpYVF1ZXJpZXMgw7xiZXJlaW5zdGltbXQuXG4gICAqIEBwYXJhbSByZXNwb25zaXZlQXRcbiAgICovXG4gIHByaXZhdGUgZG9lc1Jlc3BvbnNpdmVBdEFwcGx5KHJlc3BvbnNpdmVBdDogc3RyaW5nIHwgc3RyaW5nW10pIHtcbiAgICBjb25zdCBtZWRpYVF1ZXJpZXM6IHN0cmluZ1tdID0gW107XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHJlc3BvbnNpdmVBdCkpIHtcbiAgICAgIG1lZGlhUXVlcmllcy5wdXNoKHJlc3BvbnNpdmVBdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1lZGlhUXVlcmllcy5wdXNoKC4uLnJlc3BvbnNpdmVBdCk7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBtZWRpYVF1ZXJ5IG9mIG1lZGlhUXVlcmllcykge1xuICAgICAgaWYgKG1lZGlhUXVlcnkgPT09IHRoaXMubWVkaWFRdWVyeSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIER1cmNobMOkdWZ0IGRpZSBha3R1ZWxsZW4gVGFibGVDb2x1bW5zIHVuZCBow7ZydCBhdWYgQ2hhbmdlcyBpbiBkZW4gUHJvcGVydGllc1xuICAgKiBkZXIgQ29sdW1ucyB1bmQgbWVya3Qgc2ljaCBkaWUgU3Vic2NyaXB0aW9ucy5cbiAgICovXG4gIHByaXZhdGUgdXBkYXRlQ29sdW1uU3Vic2NyaXB0aW9ucygpIHtcbiAgICB0aGlzLmNvbHVtblN1YnNjcmlwdGlvbnMuZm9yRWFjaCgoc3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb24pID0+IHtcbiAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIH0pO1xuICAgIHRoaXMuY29sdW1uU3Vic2NyaXB0aW9ucyA9IFtdO1xuICAgIHRoaXMudGFibGVDb2x1bW5zLmZvckVhY2goKGNvbHVtbjogTHV4VGFibGVDb2x1bW5Db21wb25lbnQpID0+IHtcbiAgICAgIHRoaXMuY29sdW1uU3Vic2NyaXB0aW9ucy5wdXNoKFxuICAgICAgICBjb2x1bW4uY2hhbmdlJC5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgIHRoaXMudXBkYXRlQ29sdW1uc0J5TWVkaWFRdWVyeSgpO1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmlnZ2VydCDDvGJlciBkYXMgREFPIGRpZSBBYmZyYWdlIG5hY2ggbmV1ZW4gRGF0ZW4uXG4gICAqIFNlbmRldCBkYWJlaSBkYXMgUmVxdWVzdC1Db25mIE9iamVrdCwgd2VsY2hlcyBJbmZvcm1hdGlvbmVuIGJ6Z2wuXG4gICAqIHBhZ2UsIHBhZ2VTaXplLCBmaWx0ZXIsIHNvcnQsIG9yZGVyIG1pdGdpYnQuXG4gICAqIEBwYXJhbSBmaWx0ZXJlZEJ5P1xuICAgKi9cbiAgcHJpdmF0ZSBsb2FkSHR0cERBT0RhdGEoZmlsdGVyZWRCeT86IHN0cmluZykge1xuICAgIHRoaXMuaXNMb2FkaW5nUmVzdWx0cyA9IHRydWU7XG4gICAgdGhpcy5sdXhIdHRwREFPXG4gICAgICAubG9hZERhdGEodGhpcy5odHRwUmVxdWVzdENvbmYpXG4gICAgICAucGlwZShcbiAgICAgICAgdGFwKChkYXRhOiBJTHV4VGFibGVIdHRwRGFvU3RydWN0dXJlKSA9PiB7XG4gICAgICAgICAgdGhpcy5pc0xvYWRpbmdSZXN1bHRzID0gZmFsc2U7XG4gICAgICAgICAgLy8gV2VubiBlaW4gRmlsdGVyLVRleHQgZ2VnZWJlbiBpc3QsIHNpY2ggZGllc2VyIGFiZXIgdm9tIEFrdHVlbGxlbiB1bnRlcnNjaGVpZGVuLCBicmVjaGVuIHdpciBkaWUgRGF0ZW5ha3R1YWxpc2llcnVuZyBhYlxuICAgICAgICAgIGlmIChmaWx0ZXJlZEJ5ICYmIHRoaXMuaHR0cFJlcXVlc3RDb25mLmZpbHRlciAhPT0gZmlsdGVyZWRCeSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFTb3VyY2UudG90YWxFbGVtZW50cyA9IGRhdGEudG90YWxDb3VudDtcbiAgICAgICAgICAgIHRoaXMubHV4RGF0YSA9IGRhdGEuaXRlbXM7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmx1eEF1dG9QYWdpbmF0ZSAmJiBkYXRhLnRvdGFsQ291bnQgPiBMdXhUYWJsZUNvbXBvbmVudC5BVVRPX1BBR0lOQVRJT05fU1RBUlQpIHtcbiAgICAgICAgICAgICAgdGhpcy5sdXhTaG93UGFnaW5hdGlvbiA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZS50b3RhbEVsZW1lbnRzID0gMDtcbiAgICAgICAgICAgIHRoaXMubHV4RGF0YSA9IFtdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICAgIGNhdGNoRXJyb3IoZXJyb3IgPT4ge1xuICAgICAgICAgIHRoaXMuaXNMb2FkaW5nUmVzdWx0cyA9IGZhbHNlO1xuICAgICAgICAgIHJldHVybiBvZihlcnJvcik7XG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICAuc3Vic2NyaWJlKCk7XG4gIH1cblxuICAvKipcbiAgICogV2lyZCBhdWZnZXJ1ZmVuIHdlbm4gZGVyIFNvcnQgbmV1IHp1ciBEYXRhU291cmNlIGhpbnp1Z2Vmw7xndCB3ZXJkZW4gc29sbCAoRGF0YSB3dXJkZSBuZXUgZ2VzZXR6dCkuXG4gICAqIFJlc2V0dGV0IGRpZSBQYWdpbmF0aW9uIHVuZCBha3R1YWxpc2llcnQgd2VubiBlcyBzaWNoIHVtIGVpbmUgYXN5bmNocm9uZSBUYWJlbGxlIGhhbmRlbHQgZGllXG4gICAqIHJlcXVlc3RDb25mLlxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVTb3J0KCkge1xuICAgIGlmICh0aGlzLnNvcnQpIHtcbiAgICAgIGlmICh0aGlzLnNvcnRDaGFuZ2VkU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgIHRoaXMuc29ydENoYW5nZWRTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc29ydENoYW5nZWRTdWJzY3JpcHRpb24gPSB0aGlzLnNvcnQuc29ydENoYW5nZS5zdWJzY3JpYmUoKHNvcnQ6IGFueSkgPT4ge1xuICAgICAgICB0aGlzLnBhZ2luYXRvci5wYWdlSW5kZXggPSAwO1xuXG4gICAgICAgIGlmICh0aGlzLmx1eEh0dHBEQU8pIHtcbiAgICAgICAgICB0aGlzLmh0dHBSZXF1ZXN0Q29uZi5wYWdlID0gdGhpcy5wYWdpbmF0b3IucGFnZUluZGV4O1xuICAgICAgICAgIHRoaXMuaHR0cFJlcXVlc3RDb25mLnNvcnQgPSBzb3J0LmFjdGl2ZTtcbiAgICAgICAgICB0aGlzLmh0dHBSZXF1ZXN0Q29uZi5vcmRlciA9IHNvcnQuZGlyZWN0aW9uO1xuICAgICAgICAgIHRoaXMubG9hZEh0dHBEQU9EYXRhKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuY2FsY3VsYXRlUHJvcG9ydGlvbnMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXaXJkIG5hY2ggZGVtIHNldCB2b24gbHV4U2hvd0ZpbHRlciBhdWZnZXJ1ZmVuIHVuZCBmw6RuZ3QgbmV1ZSBGaWx0ZXItT3BlcmF0aW9uZW4gYWIgdW5kXG4gICAqIGFrdHVhbGlzaWVydCBkZW1lbnRzcHJlY2hlbmQgZGllIERhdGVuLlxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVGaWx0ZXIoKSB7XG4gICAgaWYgKHRoaXMuZmlsdGVyQ2hhbmdlZFN1YnNjcmlwdGlvbikge1xuICAgICAgdGhpcy5maWx0ZXJDaGFuZ2VkU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLmx1eFNob3dGaWx0ZXIpIHtcbiAgICAgIHRoaXMuZmlsdGVyQ2hhbmdlZFN1YnNjcmlwdGlvbiA9IHRoaXMuZmlsdGVyZWQkXG4gICAgICAgIC5hc09ic2VydmFibGUoKVxuICAgICAgICAucGlwZShcbiAgICAgICAgICB0YXAoKCkgPT4gKHRoaXMuaXNMb2FkaW5nUmVzdWx0cyA9IHRydWUpKSxcbiAgICAgICAgICBkZWJvdW5jZVRpbWUoNTAwKSxcbiAgICAgICAgICBkaXN0aW5jdFVudGlsQ2hhbmdlZCgoeDogc3RyaW5nLCB5OiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIGlmICh4ID09PSB5KSB7XG4gICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nUmVzdWx0cyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4geCA9PT0geTtcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICAgIC5zdWJzY3JpYmUoKGZpbHRlclZhbHVlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICBmaWx0ZXJWYWx1ZSA9IGZpbHRlclZhbHVlLnRyaW0oKTtcbiAgICAgICAgICBmaWx0ZXJWYWx1ZSA9IGZpbHRlclZhbHVlLnRvTG9jYWxlTG93ZXJDYXNlKCk7XG4gICAgICAgICAgdGhpcy5wYWdpbmF0b3IucGFnZUluZGV4ID0gMDtcbiAgICAgICAgICB0aGlzLmlzTG9hZGluZ1Jlc3VsdHMgPSBmYWxzZTtcbiAgICAgICAgICBpZiAoIXRoaXMubHV4SHR0cERBTykge1xuICAgICAgICAgICAgdGhpcy5kYXRhU291cmNlLmZpbHRlciA9IGZpbHRlclZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodGhpcy5sdXhIdHRwREFPKSB7XG4gICAgICAgICAgICB0aGlzLmh0dHBSZXF1ZXN0Q29uZi5maWx0ZXIgPSBmaWx0ZXJWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMubG9hZEh0dHBEQU9EYXRhKGZpbHRlclZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB0aGlzLmNhbGN1bGF0ZVByb3BvcnRpb25zKCk7XG4gIH1cblxuICAvKipcbiAgICogV2lyZCBuYWNoIGRlbSBzZXQgdm9uIGx1eFNob3dQYWdpbmF0aW9uIGF1ZmdlcnVmZW4gdW5kIHNldHp0IHdlbm4gZXMgc2ljaCBoaWVyIHVtXG4gICAqIGVpbmUgYXN5bmNocm9uZSBUYWJlbGxlIGhhbmRlbHQgZWluZSBTdWJzY3JpcHRpb24gdW0gUGFnaW5hdGlvbi3DhG5kZXJ1bmdlbiB6dSBlcmhhbHRlbi5cbiAgICovXG4gIHByaXZhdGUgaGFuZGxlUGFnaW5hdGlvbigpIHtcbiAgICBpZiAodGhpcy5sdXhTaG93UGFnaW5hdGlvbikge1xuICAgICAgaWYgKHRoaXMubHV4SHR0cERBTykge1xuICAgICAgICBpZiAodGhpcy5wYWdpbmF0b3JQYWdlU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgdGhpcy5wYWdpbmF0b3JQYWdlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYWdpbmF0b3JQYWdlU3Vic2NyaXB0aW9uID0gdGhpcy5wYWdpbmF0b3IucGFnZS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgIHRoaXMuaHR0cFJlcXVlc3RDb25mLnBhZ2UgPSB0aGlzLnBhZ2luYXRvci5wYWdlSW5kZXg7XG4gICAgICAgICAgdGhpcy5odHRwUmVxdWVzdENvbmYucGFnZVNpemUgPSB0aGlzLnBhZ2luYXRvci5wYWdlU2l6ZTtcbiAgICAgICAgICB0aGlzLmxvYWRIdHRwREFPRGF0YSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5odHRwUmVxdWVzdENvbmYucGFnZSA9IHRoaXMucGFnaW5hdG9yLnBhZ2VJbmRleDtcbiAgICAgICAgdGhpcy5odHRwUmVxdWVzdENvbmYucGFnZVNpemUgPSB0aGlzLnBhZ2luYXRvci5wYWdlU2l6ZTtcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5sdXhIdHRwREFPKSB7XG4gICAgICAgIHRoaXMuZGF0YVNvdXJjZS5wYWdpbmF0b3IgPSB0aGlzLnBhZ2luYXRvcjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kYXRhU291cmNlLnBhZ2luYXRvciA9IG51bGw7XG4gICAgfVxuICAgIHRoaXMuY2FsY3VsYXRlUHJvcG9ydGlvbnMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFcnpldWd0IGVpbmVuIG5ldWVuIFN0cmluZyBmw7xyIGRpZSBIw7ZoZW5iZXJlY2hudW5nIGRlciBUYWJlbGxlIHVuZCBzZXR6dCBkaWUgTWluaW1hbGJyZWl0ZSBmw7xyIGRpZSBUYWJlbGxlXG4gICAqICh3ZW5uIG3DtmdsaWNoKS5cbiAgICovXG4gIHByaXZhdGUgY2FsY3VsYXRlUHJvcG9ydGlvbnMoKSB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb25zdCBmaWx0ZXIgPSB0aGlzLmZpbHRlckVsZW1lbnQgPyB0aGlzLmZpbHRlckVsZW1lbnQubmF0aXZlRWxlbWVudC5vZmZzZXRIZWlnaHQgOiAwO1xuICAgICAgY29uc3QgcGFnaW5hdGlvbiA9IHRoaXMucGFnaW5hdG9yRWxlbWVudCA/IHRoaXMucGFnaW5hdG9yRWxlbWVudC5uYXRpdmVFbGVtZW50LnNjcm9sbEhlaWdodCA6IDA7XG4gICAgICBjb25zdCB0ZW1wID0gJ2NhbGMoMTAwJSAtICcgKyBwYWdpbmF0aW9uICsgJ3B4JyArICcgLSAnICsgZmlsdGVyICsgJ3B4KSc7XG5cbiAgICAgIGlmICh0ZW1wICE9PSB0aGlzLnRhYmxlSGVpZ2h0Q1NTQ2FsYykge1xuICAgICAgICB0aGlzLnRhYmxlSGVpZ2h0Q1NTQ2FsYyA9IHRlbXA7XG4gICAgICB9XG5cbiAgICAgIHRoaXMudGFibGVNaW5XaWR0aCA9IHRoaXMubHV4TWluV2lkdGhQeCA+IC0xID8gdGhpcy5sdXhNaW5XaWR0aFB4ICsgJ3B4JyA6ICd1bnNldCc7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQWt0dWFsaXNpZXJ0IGRpZSBzZWxlY3RlZEVudHJpZXMgZGllc2VyIENvbXBvbmVudCBhbmhhbmQgZGVyIGFrdHVlbGwgZ2VzZXR6dGVuIGx1eFNlbGVjdGVkLUVsZW1lbnRlLlxuICAgKlxuICAgKiBEYWJlaSB3ZXJkZW4gZGllIGVpbnplbG5lbiBFbGVtZW50ZSB6dWVyc3QgbWl0aGlsZmUgZGVyIGx1eENvbXBhcmVXaXRoLSB1bmQgbHV4UGlja1ZhbHVlLUZ1bmN0aW9ucyBtaXRlaW5hbmRlclxuICAgKiB2ZXJnbGljaGVuLlxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVTZWxlY3Rpb24oKSB7XG4gICAgLy8gUHLDvGZlbiBvYiBzZWxlY3RlZCBnZXNldHp0IGlzdFxuICAgIGlmICh0aGlzLmx1eFNlbGVjdGVkLnNpemUgPiAwKSB7XG4gICAgICAvLyBEaWUgc2VsZWN0ZWQtRWludHLDpGdlIGR1cmNoZ2VoZW4gdW5kIHNjaGF1ZW4gb2IgZGllc2UgaW0gZGF0YS1CbG9jayBlbnRoYWx0ZW4gc2luZFxuICAgICAgY29uc3QgZm91bmRFbnRyaWVzID0gW107XG4gICAgICB0aGlzLmx1eFNlbGVjdGVkLmZvckVhY2goKGVudHJ5OiBhbnkpID0+IHtcbiAgICAgICAgY29uc3QgbmV3RW50cnkgPSB0aGlzLmRhdGFTb3VyY2UuZGF0YS5maW5kKChkYXRhRW50cnk6IGFueSkgPT4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLmx1eENvbXBhcmVXaXRoKHRoaXMubHV4UGlja1ZhbHVlKGVudHJ5KSwgdGhpcy5sdXhQaWNrVmFsdWUoZGF0YUVudHJ5KSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIE1lcmt0IHNpY2ggZGllIEVudHJ5IHdlbm4gc2llIG5vY2ggbmljaHQgaW4gZGVyIFNlbGVjdGVkLUxpc3RlIGlzdCAod2VubiBlcyBzaWNoIHVtIGVpbmUgSFRUUC1UYWJlbGxlIGhhbmRlbHQpXG4gICAgICAgIGlmIChuZXdFbnRyeSAmJiAoIXRoaXMubHV4SHR0cERBTyB8fCAodGhpcy5sdXhIdHRwREFPICYmICF0aGlzLmx1eFNlbGVjdGVkLmhhcyhuZXdFbnRyeSkpKSkge1xuICAgICAgICAgIGZvdW5kRW50cmllcy5wdXNoKG5ld0VudHJ5KTtcbiAgICAgICAgICB0aGlzLmx1eFNlbGVjdGVkLmRlbGV0ZShlbnRyeSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgLy8gTnVyIGJlaSBuaWNodC1IVFRQLVRhYmVsbGVuIGRpZSBTZWxla3Rpb24gZWlubWFsIGxlZXJlblxuICAgICAgaWYgKCF0aGlzLmx1eEh0dHBEQU8pIHtcbiAgICAgICAgdGhpcy5sdXhTZWxlY3RlZC5jbGVhcigpO1xuICAgICAgfVxuICAgICAgZm91bmRFbnRyaWVzLmZvckVhY2goKGVudHJ5OiBib29sZWFuKSA9PiB0aGlzLmx1eFNlbGVjdGVkLmFkZChlbnRyeSkpO1xuICAgIH1cblxuICAgIHRoaXMuZGF0YVNvdXJjZS5zZWxlY3RlZEVudHJpZXMgPSB0aGlzLmx1eFNlbGVjdGVkO1xuICAgIHRoaXMubHV4U2VsZWN0ZWRDaGFuZ2UubmV4dChBcnJheS5mcm9tKHRoaXMubHV4U2VsZWN0ZWQpKTtcbiAgICB0aGlzLmFsbFNlbGVjdGVkID0gdGhpcy5jaGVja0ZpbHRlcmVkQWxsU2VsZWN0ZWQoKTtcbiAgfVxufVxuIl19