import * as tslib_1 from "tslib";
import { Component, ElementRef, Inject, ViewChild } from '@angular/core';
import { DomSanitizer } from '@angular/platform-browser';
import { LuxFilePreviewBase } from '../lux-file-preview-base/lux-file-preview-base';
import { LUX_FILE_PREVIEW_DATA } from '../lux-file-preview-config';
import { LuxFilePreviewRef } from '../lux-file-preview-ref';
var LuxFilePreviewImgViewerComponent = /** @class */ (function (_super) {
    tslib_1.__extends(LuxFilePreviewImgViewerComponent, _super);
    function LuxFilePreviewImgViewerComponent(previewRef, previewData, sanitizer) {
        var _this = _super.call(this, previewRef, previewData, sanitizer) || this;
        _this.previewRef = previewRef;
        _this.previewData = previewData;
        _this.sanitizer = sanitizer;
        _this.zoomActive = false;
        _this.zoomWidth = 0;
        _this.zoomStep = 250;
        return _this;
    }
    LuxFilePreviewImgViewerComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        setTimeout(function () {
            _this.zoomActive =
                _this.previewImg && _this.previewImg.nativeElement.naturalWidth - _this.paddingWith > window.innerWidth;
        });
    };
    LuxFilePreviewImgViewerComponent.prototype.onLoad = function (event) {
        this.zoomActive =
            this.previewImg && this.previewImg.nativeElement.naturalWidth - this.paddingWith > window.innerWidth;
        this.loadingFinished();
    };
    LuxFilePreviewImgViewerComponent.prototype.onZoomIn = function () {
        this.zoomWidth += this.zoomStep;
        this.clearFocus();
    };
    LuxFilePreviewImgViewerComponent.prototype.onZoomOut = function () {
        this.zoomWidth -= this.zoomStep;
        this.clearFocus();
    };
    LuxFilePreviewImgViewerComponent.ctorParameters = function () { return [
        { type: LuxFilePreviewRef },
        { type: undefined, decorators: [{ type: Inject, args: [LUX_FILE_PREVIEW_DATA,] }] },
        { type: DomSanitizer }
    ]; };
    tslib_1.__decorate([
        ViewChild('previewImg', { static: false }),
        tslib_1.__metadata("design:type", ElementRef)
    ], LuxFilePreviewImgViewerComponent.prototype, "previewImg", void 0);
    LuxFilePreviewImgViewerComponent = tslib_1.__decorate([
        Component({
            selector: 'lux-file-preview-imgviewer',
            template: "<lux-file-preview-toolbar>\n  <lux-button\n    fxFlex=\"none\"\n    luxIconName=\"fas fa-search-plus\"\n    *ngIf=\"zoomActive\"\n    (luxClicked)=\"onZoomIn()\"\n    luxRaised=\"true\"\n    luxTagId=\"file-preview-zoomin-btn\"\n    luxAriaLabel=\"Hinein zoomen\"\n  ></lux-button>\n  <lux-button\n    fxFlex=\"none\"\n    luxIconName=\"fas fa-search-minus\"\n    (luxClicked)=\"onZoomOut()\"\n    *ngIf=\"zoomActive\"\n    luxRaised=\"true\"\n    luxTagId=\"file-preview-zoomout-btn\"\n    luxAriaLabel=\"Heraus zoomen\"\n  ></lux-button>\n  <lux-button\n    fxFlex=\"none\"\n    [luxIconName]=\"downloadIconName\"\n    (luxClicked)=\"onDownload()\"\n    luxColor=\"accent\"\n    luxRaised=\"true\"\n    [luxTagId]=\"downloadTagId\"\n    [luxAriaLabel]=\"downloadAriaLabel\"\n  ></lux-button>\n  <lux-button\n    fxFlex=\"none\"\n    [luxIconName]=\"closeIconName\"\n    (luxClicked)=\"onClose()\"\n    luxRaised=\"true\"\n    [luxTagId]=\"closeTagId\"\n    [luxAriaLabel]=\"closeAriaLabel\"\n  ></lux-button>\n</lux-file-preview-toolbar>\n\n<div class=\"overlay-content\" [ngStyle]=\"{ 'max-width': width + 'px', 'max-height': height + 'px' }\">\n  <img\n    [src]=\"this.sanitizer.bypassSecurityTrustResourceUrl(this.url)\"\n    *ngIf=\"url\"\n    (load)=\"onLoad($event)\"\n    [ngStyle]=\"{\n      'max-width': width + zoomWidth + 'px',\n      'max-height': height + zoomWidth + 'px',\n      display: loading ? 'none' : 'block'\n    }\"\n    #previewImg\n  />\n  <div *ngIf=\"loading && !startPhase\" class=\"message-box\">\n    Lade...\n  </div>\n</div>\n",
            styles: [".overlay-content{overflow:auto}img{height:auto}"]
        }),
        tslib_1.__param(1, Inject(LUX_FILE_PREVIEW_DATA)),
        tslib_1.__metadata("design:paramtypes", [LuxFilePreviewRef, Object, DomSanitizer])
    ], LuxFilePreviewImgViewerComponent);
    return LuxFilePreviewImgViewerComponent;
}(LuxFilePreviewBase));
export { LuxFilePreviewImgViewerComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibHV4LWZpbGUtcHJldmlldy1pbWd2aWV3ZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGloay1nZmkvbHV4LWNvbXBvbmVudHMvIiwic291cmNlcyI6WyJzcmMvYXBwL21vZHVsZXMvbHV4LWZpbGUtcHJldmlldy9sdXgtZmlsZS1wcmV2aWV3LWltZ3ZpZXdlci9sdXgtZmlsZS1wcmV2aWV3LWltZ3ZpZXdlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBaUIsU0FBUyxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQVUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ2hHLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUN6RCxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxnREFBZ0QsQ0FBQztBQUNwRixPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUVuRSxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQU81RDtJQUFzRCw0REFBa0I7SUFPdEUsMENBQ1ksVUFBNkIsRUFDRSxXQUErQixFQUNqRSxTQUF1QjtRQUhoQyxZQUtFLGtCQUFNLFVBQVUsRUFBRSxXQUFXLEVBQUUsU0FBUyxDQUFDLFNBQzFDO1FBTFcsZ0JBQVUsR0FBVixVQUFVLENBQW1CO1FBQ0UsaUJBQVcsR0FBWCxXQUFXLENBQW9CO1FBQ2pFLGVBQVMsR0FBVCxTQUFTLENBQWM7UUFQaEMsZ0JBQVUsR0FBRyxLQUFLLENBQUM7UUFDbkIsZUFBUyxHQUFHLENBQUMsQ0FBQztRQUNkLGNBQVEsR0FBRyxHQUFHLENBQUM7O0lBUWYsQ0FBQztJQUVELDBEQUFlLEdBQWY7UUFBQSxpQkFLQztRQUpDLFVBQVUsQ0FBQztZQUNULEtBQUksQ0FBQyxVQUFVO2dCQUNiLEtBQUksQ0FBQyxVQUFVLElBQUksS0FBSSxDQUFDLFVBQVUsQ0FBQyxhQUFhLENBQUMsWUFBWSxHQUFHLEtBQUksQ0FBQyxXQUFXLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQztRQUN6RyxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCxpREFBTSxHQUFOLFVBQU8sS0FBWTtRQUNqQixJQUFJLENBQUMsVUFBVTtZQUNiLElBQUksQ0FBQyxVQUFVLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxhQUFhLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxXQUFXLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQztRQUN2RyxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7SUFDekIsQ0FBQztJQUVELG1EQUFRLEdBQVI7UUFDRSxJQUFJLENBQUMsU0FBUyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUM7UUFDaEMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO0lBQ3BCLENBQUM7SUFFRCxvREFBUyxHQUFUO1FBQ0UsSUFBSSxDQUFDLFNBQVMsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDO1FBQ2hDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztJQUNwQixDQUFDOztnQkE1QnVCLGlCQUFpQjtnREFDdEMsTUFBTSxTQUFDLHFCQUFxQjtnQkFDWCxZQUFZOztJQVRZO1FBQTNDLFNBQVMsQ0FBQyxZQUFZLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLENBQUM7MENBQWEsVUFBVTt3RUFBQztJQUR4RCxnQ0FBZ0M7UUFMNUMsU0FBUyxDQUFDO1lBQ1QsUUFBUSxFQUFFLDRCQUE0QjtZQUN0QyxxaURBQTBEOztTQUUzRCxDQUFDO1FBVUcsbUJBQUEsTUFBTSxDQUFDLHFCQUFxQixDQUFDLENBQUE7aURBRFIsaUJBQWlCLFVBRXJCLFlBQVk7T0FWckIsZ0NBQWdDLENBcUM1QztJQUFELHVDQUFDO0NBQUEsQUFyQ0QsQ0FBc0Qsa0JBQWtCLEdBcUN2RTtTQXJDWSxnQ0FBZ0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBZnRlclZpZXdJbml0LCBDb21wb25lbnQsIEVsZW1lbnRSZWYsIEluamVjdCwgT25Jbml0LCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IERvbVNhbml0aXplciB9IGZyb20gJ0Bhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXInO1xuaW1wb3J0IHsgTHV4RmlsZVByZXZpZXdCYXNlIH0gZnJvbSAnLi4vbHV4LWZpbGUtcHJldmlldy1iYXNlL2x1eC1maWxlLXByZXZpZXctYmFzZSc7XG5pbXBvcnQgeyBMVVhfRklMRV9QUkVWSUVXX0RBVEEgfSBmcm9tICcuLi9sdXgtZmlsZS1wcmV2aWV3LWNvbmZpZyc7XG5pbXBvcnQgeyBMdXhGaWxlUHJldmlld0RhdGEgfSBmcm9tICcuLi9sdXgtZmlsZS1wcmV2aWV3LWRhdGEnO1xuaW1wb3J0IHsgTHV4RmlsZVByZXZpZXdSZWYgfSBmcm9tICcuLi9sdXgtZmlsZS1wcmV2aWV3LXJlZic7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2x1eC1maWxlLXByZXZpZXctaW1ndmlld2VyJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2x1eC1maWxlLXByZXZpZXctaW1ndmlld2VyLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vbHV4LWZpbGUtcHJldmlldy1pbWd2aWV3ZXIuY29tcG9uZW50LnNjc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBMdXhGaWxlUHJldmlld0ltZ1ZpZXdlckNvbXBvbmVudCBleHRlbmRzIEx1eEZpbGVQcmV2aWV3QmFzZSBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCB7XG4gIEBWaWV3Q2hpbGQoJ3ByZXZpZXdJbWcnLCB7IHN0YXRpYzogZmFsc2UgfSkgcHJldmlld0ltZzogRWxlbWVudFJlZjtcblxuICB6b29tQWN0aXZlID0gZmFsc2U7XG4gIHpvb21XaWR0aCA9IDA7XG4gIHpvb21TdGVwID0gMjUwO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByb3RlY3RlZCBwcmV2aWV3UmVmOiBMdXhGaWxlUHJldmlld1JlZixcbiAgICBASW5qZWN0KExVWF9GSUxFX1BSRVZJRVdfREFUQSkgcHJvdGVjdGVkIHByZXZpZXdEYXRhOiBMdXhGaWxlUHJldmlld0RhdGEsXG4gICAgcHVibGljIHNhbml0aXplcjogRG9tU2FuaXRpemVyXG4gICkge1xuICAgIHN1cGVyKHByZXZpZXdSZWYsIHByZXZpZXdEYXRhLCBzYW5pdGl6ZXIpO1xuICB9XG5cbiAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy56b29tQWN0aXZlID1cbiAgICAgICAgdGhpcy5wcmV2aWV3SW1nICYmIHRoaXMucHJldmlld0ltZy5uYXRpdmVFbGVtZW50Lm5hdHVyYWxXaWR0aCAtIHRoaXMucGFkZGluZ1dpdGggPiB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICB9KTtcbiAgfVxuXG4gIG9uTG9hZChldmVudDogRXZlbnQpIHtcbiAgICB0aGlzLnpvb21BY3RpdmUgPVxuICAgICAgdGhpcy5wcmV2aWV3SW1nICYmIHRoaXMucHJldmlld0ltZy5uYXRpdmVFbGVtZW50Lm5hdHVyYWxXaWR0aCAtIHRoaXMucGFkZGluZ1dpdGggPiB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICB0aGlzLmxvYWRpbmdGaW5pc2hlZCgpO1xuICB9XG5cbiAgb25ab29tSW4oKSB7XG4gICAgdGhpcy56b29tV2lkdGggKz0gdGhpcy56b29tU3RlcDtcbiAgICB0aGlzLmNsZWFyRm9jdXMoKTtcbiAgfVxuXG4gIG9uWm9vbU91dCgpIHtcbiAgICB0aGlzLnpvb21XaWR0aCAtPSB0aGlzLnpvb21TdGVwO1xuICAgIHRoaXMuY2xlYXJGb2N1cygpO1xuICB9XG59XG4iXX0=