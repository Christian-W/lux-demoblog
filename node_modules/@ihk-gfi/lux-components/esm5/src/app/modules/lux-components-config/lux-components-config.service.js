import * as tslib_1 from "tslib";
import { Inject, Injectable, Optional } from '@angular/core';
import { LuxConfigTokenService } from './lux-components-config.module';
import { BehaviorSubject } from 'rxjs';
import * as i0 from "@angular/core";
import * as i1 from "./lux-components-config.module";
/**
 * Dieser Service wird dazu verwendet, auf die Konfiguration der LuxComponents zuzugreifen und diese auszulesen bzw.
 * auch zu aktualisieren.
 */
var LuxComponentsConfigService = /** @class */ (function () {
    function LuxComponentsConfigService(config) {
        // Subject mit dem aktuellen Konfig-Wert, welcher ausgelesen werden kann
        this.config$ = new BehaviorSubject(null);
        // Wenn keine Konfiguration geladen werden konnte, Standard-Konfig benutzen und eine Warnung ausgeben.
        if (!config) {
            console.warn('Achtung: Es wurde keine Konfiguration für die LuxComponents definiert.\n', 'Benutze Standard-Konfiguration:', LuxComponentsConfigService_1.DEFAULT_CONFIG);
            this.config$.next(LuxComponentsConfigService_1.DEFAULT_CONFIG);
        }
        else {
            this.config$.next(this.mergeDefaultData(config));
        }
    }
    LuxComponentsConfigService_1 = LuxComponentsConfigService;
    Object.defineProperty(LuxComponentsConfigService.prototype, "config", {
        /**
         * Gibt das Observable mit der aktuell gesetzten Konfiguration zurück.
         */
        get: function () {
            return this.config$.asObservable();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LuxComponentsConfigService.prototype, "currentConfig", {
        /**
         * Gibt die aktuell gesetzte Konfiguration direkt zurück.
         */
        get: function () {
            return this.config$.getValue();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Gibt zurück, ob die Labels als Uppercase gekennzeichnet sind und ob
     * die übergebenen Selektoren in den Ausnahmen geführt sind.
     * @param selector
     */
    LuxComponentsConfigService.prototype.isLabelUppercaseForSelector = function (selector) {
        var config = this.config$.value;
        return config.labelConfiguration.allUppercase && config.labelConfiguration.notAppliedTo.indexOf(selector) === -1;
    };
    /**
     * Ersetzt die aktuelle Konfiguration mit der übergebenen (wenn gültiger Wert).
     * @param config
     */
    LuxComponentsConfigService.prototype.updateConfiguration = function (config) {
        if (!config) {
            console.warn('Die übergebene Konfiguration ist undefined/null und wird nicht übernommen.');
        }
        else {
            this.config$.next(this.mergeDefaultData(config));
        }
    };
    /**
     * Kombiniert die übergebene Konfiguration mit der Standard-Konfig.
     *
     * Übernimmt die Werte aus der Standard-Konfig, die nicht im übergebenen gesetzt wurden.
     * @param config
     */
    LuxComponentsConfigService.prototype.mergeDefaultData = function (config) {
        var mergedConfig = {};
        Object.keys(config).forEach(function (key) {
            mergedConfig[key] = config[key];
        });
        Object.keys(LuxComponentsConfigService_1.DEFAULT_CONFIG).forEach(function (key) {
            if (mergedConfig[key] === undefined || mergedConfig[key] === null) {
                mergedConfig[key] = LuxComponentsConfigService_1.DEFAULT_CONFIG[key];
            }
        });
        return mergedConfig;
    };
    var LuxComponentsConfigService_1;
    // Fallback-Konfiguration, falls sonst keine gefunden werden konnte
    LuxComponentsConfigService.DEFAULT_CONFIG = {
        displayLuxConsoleLogs: false,
        generateLuxTagIds: false,
        lookupServiceUrl: '/lookup/',
        labelConfiguration: {
            allUppercase: true,
            notAppliedTo: ['lux-link', 'lux-side-nav-item', 'lux-menu-item']
        },
        cardExpansionAnimationActive: true,
        displayBindingDebugHint: true,
        rippleConfiguration: {
            exitDuration: 500,
            enterDuration: 500
        }
    };
    LuxComponentsConfigService.ctorParameters = function () { return [
        { type: undefined, decorators: [{ type: Inject, args: [LuxConfigTokenService,] }, { type: Optional }] }
    ]; };
    LuxComponentsConfigService.ngInjectableDef = i0.ɵɵdefineInjectable({ factory: function LuxComponentsConfigService_Factory() { return new LuxComponentsConfigService(i0.ɵɵinject(i1.LuxConfigTokenService, 8)); }, token: LuxComponentsConfigService, providedIn: "root" });
    LuxComponentsConfigService = LuxComponentsConfigService_1 = tslib_1.__decorate([
        Injectable({
            providedIn: 'root'
        }),
        tslib_1.__param(0, Inject(LuxConfigTokenService)), tslib_1.__param(0, Optional()),
        tslib_1.__metadata("design:paramtypes", [Object])
    ], LuxComponentsConfigService);
    return LuxComponentsConfigService;
}());
export { LuxComponentsConfigService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibHV4LWNvbXBvbmVudHMtY29uZmlnLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AaWhrLWdmaS9sdXgtY29tcG9uZW50cy8iLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kdWxlcy9sdXgtY29tcG9uZW50cy1jb25maWcvbHV4LWNvbXBvbmVudHMtY29uZmlnLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUM3RCxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSxnQ0FBZ0MsQ0FBQztBQUV2RSxPQUFPLEVBQUUsZUFBZSxFQUFjLE1BQU0sTUFBTSxDQUFDOzs7QUFFbkQ7OztHQUdHO0FBSUg7SUFxQ0Usb0NBQXVELE1BQXFDO1FBbkI1Rix3RUFBd0U7UUFDaEUsWUFBTyxHQUFtRCxJQUFJLGVBQWUsQ0FDbkYsSUFBSSxDQUNMLENBQUM7UUFpQkEsc0dBQXNHO1FBQ3RHLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDWCxPQUFPLENBQUMsSUFBSSxDQUNWLDBFQUEwRSxFQUMxRSxpQ0FBaUMsRUFDakMsNEJBQTBCLENBQUMsY0FBYyxDQUMxQyxDQUFDO1lBQ0YsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsNEJBQTBCLENBQUMsY0FBYyxDQUFDLENBQUM7U0FDOUQ7YUFBTTtZQUNMLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1NBQ2xEO0lBQ0gsQ0FBQzttQ0FqRFUsMEJBQTBCO0lBMEJyQyxzQkFBSSw4Q0FBTTtRQUhWOztXQUVHO2FBQ0g7WUFDRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxFQUFFLENBQUM7UUFDckMsQ0FBQzs7O09BQUE7SUFLRCxzQkFBSSxxREFBYTtRQUhqQjs7V0FFRzthQUNIO1lBQ0UsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ2pDLENBQUM7OztPQUFBO0lBZ0JEOzs7O09BSUc7SUFDSCxnRUFBMkIsR0FBM0IsVUFBNEIsUUFBZ0I7UUFDMUMsSUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUM7UUFDbEMsT0FBTyxNQUFNLENBQUMsa0JBQWtCLENBQUMsWUFBWSxJQUFJLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0lBQ25ILENBQUM7SUFFRDs7O09BR0c7SUFDSCx3REFBbUIsR0FBbkIsVUFBb0IsTUFBcUM7UUFDdkQsSUFBSSxDQUFDLE1BQU0sRUFBRTtZQUNYLE9BQU8sQ0FBQyxJQUFJLENBQUMsNEVBQTRFLENBQUMsQ0FBQztTQUM1RjthQUFNO1lBQ0wsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7U0FDbEQ7SUFDSCxDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSyxxREFBZ0IsR0FBeEIsVUFBeUIsTUFBcUM7UUFDNUQsSUFBTSxZQUFZLEdBQUcsRUFBRSxDQUFDO1FBQ3hCLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQUMsR0FBVztZQUN0QyxZQUFZLENBQUMsR0FBRyxDQUFDLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2xDLENBQUMsQ0FBQyxDQUFDO1FBQ0gsTUFBTSxDQUFDLElBQUksQ0FBQyw0QkFBMEIsQ0FBQyxjQUFjLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBQyxHQUFXO1lBQ3pFLElBQUksWUFBWSxDQUFDLEdBQUcsQ0FBQyxLQUFLLFNBQVMsSUFBSSxZQUFZLENBQUMsR0FBRyxDQUFDLEtBQUssSUFBSSxFQUFFO2dCQUNqRSxZQUFZLENBQUMsR0FBRyxDQUFDLEdBQUcsNEJBQTBCLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2FBQ3BFO1FBQ0gsQ0FBQyxDQUFDLENBQUM7UUFDSCxPQUFPLFlBQTZDLENBQUM7SUFDdkQsQ0FBQzs7SUF6RkQsbUVBQW1FO0lBQzVDLHlDQUFjLEdBQWtDO1FBQ3JFLHFCQUFxQixFQUFFLEtBQUs7UUFDNUIsaUJBQWlCLEVBQUUsS0FBSztRQUN4QixnQkFBZ0IsRUFBRSxVQUFVO1FBQzVCLGtCQUFrQixFQUFFO1lBQ2xCLFlBQVksRUFBRSxJQUFJO1lBQ2xCLFlBQVksRUFBRSxDQUFDLFVBQVUsRUFBRSxtQkFBbUIsRUFBRSxlQUFlLENBQUM7U0FDakU7UUFDRCw0QkFBNEIsRUFBRSxJQUFJO1FBQ2xDLHVCQUF1QixFQUFFLElBQUk7UUFDN0IsbUJBQW1CLEVBQUU7WUFDbkIsWUFBWSxFQUFFLEdBQUc7WUFDakIsYUFBYSxFQUFFLEdBQUc7U0FDbkI7S0FDRixDQUFDOztnREFxQlcsTUFBTSxTQUFDLHFCQUFxQixjQUFHLFFBQVE7OztJQXJDekMsMEJBQTBCO1FBSHRDLFVBQVUsQ0FBQztZQUNWLFVBQVUsRUFBRSxNQUFNO1NBQ25CLENBQUM7UUFzQ2EsbUJBQUEsTUFBTSxDQUFDLHFCQUFxQixDQUFDLENBQUEsRUFBRSxtQkFBQSxRQUFRLEVBQUUsQ0FBQTs7T0FyQzNDLDBCQUEwQixDQTJGdEM7cUNBdkdEO0NBdUdDLEFBM0ZELElBMkZDO1NBM0ZZLDBCQUEwQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdCwgSW5qZWN0YWJsZSwgT3B0aW9uYWwgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEx1eENvbmZpZ1Rva2VuU2VydmljZSB9IGZyb20gJy4vbHV4LWNvbXBvbmVudHMtY29uZmlnLm1vZHVsZSc7XG5pbXBvcnQgeyBMdXhDb21wb25lbnRzQ29uZmlnUGFyYW1ldGVycyB9IGZyb20gJy4vbHV4LWNvbXBvbmVudHMtY29uZmlnLXBhcmFtZXRlcnMuaW50ZXJmYWNlJztcbmltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCwgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuXG4vKipcbiAqIERpZXNlciBTZXJ2aWNlIHdpcmQgZGF6dSB2ZXJ3ZW5kZXQsIGF1ZiBkaWUgS29uZmlndXJhdGlvbiBkZXIgTHV4Q29tcG9uZW50cyB6dXp1Z3JlaWZlbiB1bmQgZGllc2UgYXVzenVsZXNlbiBiencuXG4gKiBhdWNoIHp1IGFrdHVhbGlzaWVyZW4uXG4gKi9cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIEx1eENvbXBvbmVudHNDb25maWdTZXJ2aWNlIHtcbiAgLy8gRmFsbGJhY2stS29uZmlndXJhdGlvbiwgZmFsbHMgc29uc3Qga2VpbmUgZ2VmdW5kZW4gd2VyZGVuIGtvbm50ZVxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IERFRkFVTFRfQ09ORklHOiBMdXhDb21wb25lbnRzQ29uZmlnUGFyYW1ldGVycyA9IHtcbiAgICBkaXNwbGF5THV4Q29uc29sZUxvZ3M6IGZhbHNlLFxuICAgIGdlbmVyYXRlTHV4VGFnSWRzOiBmYWxzZSxcbiAgICBsb29rdXBTZXJ2aWNlVXJsOiAnL2xvb2t1cC8nLFxuICAgIGxhYmVsQ29uZmlndXJhdGlvbjoge1xuICAgICAgYWxsVXBwZXJjYXNlOiB0cnVlLFxuICAgICAgbm90QXBwbGllZFRvOiBbJ2x1eC1saW5rJywgJ2x1eC1zaWRlLW5hdi1pdGVtJywgJ2x1eC1tZW51LWl0ZW0nXVxuICAgIH0sXG4gICAgY2FyZEV4cGFuc2lvbkFuaW1hdGlvbkFjdGl2ZTogdHJ1ZSxcbiAgICBkaXNwbGF5QmluZGluZ0RlYnVnSGludDogdHJ1ZSxcbiAgICByaXBwbGVDb25maWd1cmF0aW9uOiB7XG4gICAgICBleGl0RHVyYXRpb246IDUwMCxcbiAgICAgIGVudGVyRHVyYXRpb246IDUwMFxuICAgIH1cbiAgfTtcblxuICAvLyBTdWJqZWN0IG1pdCBkZW0gYWt0dWVsbGVuIEtvbmZpZy1XZXJ0LCB3ZWxjaGVyIGF1c2dlbGVzZW4gd2VyZGVuIGthbm5cbiAgcHJpdmF0ZSBjb25maWckOiBCZWhhdmlvclN1YmplY3Q8THV4Q29tcG9uZW50c0NvbmZpZ1BhcmFtZXRlcnM+ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxMdXhDb21wb25lbnRzQ29uZmlnUGFyYW1ldGVycz4oXG4gICAgbnVsbFxuICApO1xuXG4gIC8qKlxuICAgKiBHaWJ0IGRhcyBPYnNlcnZhYmxlIG1pdCBkZXIgYWt0dWVsbCBnZXNldHp0ZW4gS29uZmlndXJhdGlvbiB6dXLDvGNrLlxuICAgKi9cbiAgZ2V0IGNvbmZpZygpOiBPYnNlcnZhYmxlPEx1eENvbXBvbmVudHNDb25maWdQYXJhbWV0ZXJzPiB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlnJC5hc09ic2VydmFibGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHaWJ0IGRpZSBha3R1ZWxsIGdlc2V0enRlIEtvbmZpZ3VyYXRpb24gZGlyZWt0IHp1csO8Y2suXG4gICAqL1xuICBnZXQgY3VycmVudENvbmZpZygpOiBMdXhDb21wb25lbnRzQ29uZmlnUGFyYW1ldGVycyB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlnJC5nZXRWYWx1ZSgpO1xuICB9XG5cbiAgY29uc3RydWN0b3IoQEluamVjdChMdXhDb25maWdUb2tlblNlcnZpY2UpIEBPcHRpb25hbCgpIGNvbmZpZzogTHV4Q29tcG9uZW50c0NvbmZpZ1BhcmFtZXRlcnMpIHtcbiAgICAvLyBXZW5uIGtlaW5lIEtvbmZpZ3VyYXRpb24gZ2VsYWRlbiB3ZXJkZW4ga29ubnRlLCBTdGFuZGFyZC1Lb25maWcgYmVudXR6ZW4gdW5kIGVpbmUgV2FybnVuZyBhdXNnZWJlbi5cbiAgICBpZiAoIWNvbmZpZykge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnQWNodHVuZzogRXMgd3VyZGUga2VpbmUgS29uZmlndXJhdGlvbiBmw7xyIGRpZSBMdXhDb21wb25lbnRzIGRlZmluaWVydC5cXG4nLFxuICAgICAgICAnQmVudXR6ZSBTdGFuZGFyZC1Lb25maWd1cmF0aW9uOicsXG4gICAgICAgIEx1eENvbXBvbmVudHNDb25maWdTZXJ2aWNlLkRFRkFVTFRfQ09ORklHXG4gICAgICApO1xuICAgICAgdGhpcy5jb25maWckLm5leHQoTHV4Q29tcG9uZW50c0NvbmZpZ1NlcnZpY2UuREVGQVVMVF9DT05GSUcpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNvbmZpZyQubmV4dCh0aGlzLm1lcmdlRGVmYXVsdERhdGEoY29uZmlnKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdpYnQgenVyw7xjaywgb2IgZGllIExhYmVscyBhbHMgVXBwZXJjYXNlIGdla2VubnplaWNobmV0IHNpbmQgdW5kIG9iXG4gICAqIGRpZSDDvGJlcmdlYmVuZW4gU2VsZWt0b3JlbiBpbiBkZW4gQXVzbmFobWVuIGdlZsO8aHJ0IHNpbmQuXG4gICAqIEBwYXJhbSBzZWxlY3RvclxuICAgKi9cbiAgaXNMYWJlbFVwcGVyY2FzZUZvclNlbGVjdG9yKHNlbGVjdG9yOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBjb25maWcgPSB0aGlzLmNvbmZpZyQudmFsdWU7XG4gICAgcmV0dXJuIGNvbmZpZy5sYWJlbENvbmZpZ3VyYXRpb24uYWxsVXBwZXJjYXNlICYmIGNvbmZpZy5sYWJlbENvbmZpZ3VyYXRpb24ubm90QXBwbGllZFRvLmluZGV4T2Yoc2VsZWN0b3IpID09PSAtMTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFcnNldHp0IGRpZSBha3R1ZWxsZSBLb25maWd1cmF0aW9uIG1pdCBkZXIgw7xiZXJnZWJlbmVuICh3ZW5uIGfDvGx0aWdlciBXZXJ0KS5cbiAgICogQHBhcmFtIGNvbmZpZ1xuICAgKi9cbiAgdXBkYXRlQ29uZmlndXJhdGlvbihjb25maWc6IEx1eENvbXBvbmVudHNDb25maWdQYXJhbWV0ZXJzKSB7XG4gICAgaWYgKCFjb25maWcpIHtcbiAgICAgIGNvbnNvbGUud2FybignRGllIMO8YmVyZ2ViZW5lIEtvbmZpZ3VyYXRpb24gaXN0IHVuZGVmaW5lZC9udWxsIHVuZCB3aXJkIG5pY2h0IMO8YmVybm9tbWVuLicpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNvbmZpZyQubmV4dCh0aGlzLm1lcmdlRGVmYXVsdERhdGEoY29uZmlnKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEtvbWJpbmllcnQgZGllIMO8YmVyZ2ViZW5lIEtvbmZpZ3VyYXRpb24gbWl0IGRlciBTdGFuZGFyZC1Lb25maWcuXG4gICAqXG4gICAqIMOcYmVybmltbXQgZGllIFdlcnRlIGF1cyBkZXIgU3RhbmRhcmQtS29uZmlnLCBkaWUgbmljaHQgaW0gw7xiZXJnZWJlbmVuIGdlc2V0enQgd3VyZGVuLlxuICAgKiBAcGFyYW0gY29uZmlnXG4gICAqL1xuICBwcml2YXRlIG1lcmdlRGVmYXVsdERhdGEoY29uZmlnOiBMdXhDb21wb25lbnRzQ29uZmlnUGFyYW1ldGVycyk6IEx1eENvbXBvbmVudHNDb25maWdQYXJhbWV0ZXJzIHtcbiAgICBjb25zdCBtZXJnZWRDb25maWcgPSB7fTtcbiAgICBPYmplY3Qua2V5cyhjb25maWcpLmZvckVhY2goKGtleTogc3RyaW5nKSA9PiB7XG4gICAgICBtZXJnZWRDb25maWdba2V5XSA9IGNvbmZpZ1trZXldO1xuICAgIH0pO1xuICAgIE9iamVjdC5rZXlzKEx1eENvbXBvbmVudHNDb25maWdTZXJ2aWNlLkRFRkFVTFRfQ09ORklHKS5mb3JFYWNoKChrZXk6IHN0cmluZykgPT4ge1xuICAgICAgaWYgKG1lcmdlZENvbmZpZ1trZXldID09PSB1bmRlZmluZWQgfHwgbWVyZ2VkQ29uZmlnW2tleV0gPT09IG51bGwpIHtcbiAgICAgICAgbWVyZ2VkQ29uZmlnW2tleV0gPSBMdXhDb21wb25lbnRzQ29uZmlnU2VydmljZS5ERUZBVUxUX0NPTkZJR1trZXldO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBtZXJnZWRDb25maWcgYXMgTHV4Q29tcG9uZW50c0NvbmZpZ1BhcmFtZXRlcnM7XG4gIH1cbn1cbiJdfQ==