import * as tslib_1 from "tslib";
import { Component, Input } from '@angular/core';
var LuxImageComponent = /** @class */ (function () {
    function LuxImageComponent() {
        this.luxImageSrc = '';
        this.luxImageWidth = 'auto';
        this.luxImageHeight = 'auto';
        this.luxRawSrc = false;
    }
    LuxImageComponent.prototype.ngOnChanges = function (simpleChanges) {
        if (simpleChanges.luxImageSrc) {
            if (!this.luxRawSrc) {
                this.updateImageSrc();
            }
        }
        else if (simpleChanges.luxRawSrc) {
            if (!this.luxRawSrc) {
                this.updateImageSrc();
            }
        }
    };
    LuxImageComponent.prototype.ngOnInit = function () { };
    LuxImageComponent.prototype.updateImageSrc = function () {
        if (this.luxImageSrc) {
            // Pruefen ob es sich um ein externes Bild handelt
            if (this.luxImageSrc.startsWith('http')) {
                this.sanitizeImageSrc();
            }
            else {
                // Wenn nicht, auf den Assets-Ordner verweisen
                if (this.luxImageSrc.indexOf('asset') === -1) {
                    this.luxImageSrc = 'assets/' + this.luxImageSrc;
                }
                this.sanitizeImageSrc();
            }
        }
    };
    LuxImageComponent.prototype.sanitizeImageSrc = function () {
        // Doppelte Slashes entfernen
        this.luxImageSrc = this.luxImageSrc.replace(/\/\/+/g, '/');
        // Fuehrende Slashes entfernen
        if (this.luxImageSrc.startsWith('/')) {
            this.luxImageSrc = this.luxImageSrc.slice(1, this.luxImageSrc.length);
        }
    };
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", String)
    ], LuxImageComponent.prototype, "luxImageSrc", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", String)
    ], LuxImageComponent.prototype, "luxImageWidth", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", String)
    ], LuxImageComponent.prototype, "luxImageHeight", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Boolean)
    ], LuxImageComponent.prototype, "luxRawSrc", void 0);
    LuxImageComponent = tslib_1.__decorate([
        Component({
            selector: 'lux-image',
            template: "<div>\n  <img [src]=\"luxImageSrc\" class=\"lux-image\" [ngStyle]=\"{ width: luxImageWidth, height: luxImageHeight }\" />\n</div>\n",
            styles: [":host{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;max-height:100%;max-width:100%}div{display:-webkit-box;display:-ms-flexbox;display:flex;max-height:100%;height:100%;width:100%}"]
        }),
        tslib_1.__metadata("design:paramtypes", [])
    ], LuxImageComponent);
    return LuxImageComponent;
}());
export { LuxImageComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibHV4LWltYWdlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BpaGstZ2ZpL2x1eC1jb21wb25lbnRzLyIsInNvdXJjZXMiOlsic3JjL2FwcC9tb2R1bGVzL2x1eC1pY29uL2x1eC1pbWFnZS9sdXgtaW1hZ2UuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBb0MsTUFBTSxlQUFlLENBQUM7QUFPbkY7SUFNRTtRQUxTLGdCQUFXLEdBQVcsRUFBRSxDQUFDO1FBQ3pCLGtCQUFhLEdBQVcsTUFBTSxDQUFDO1FBQy9CLG1CQUFjLEdBQVcsTUFBTSxDQUFDO1FBQ2hDLGNBQVMsR0FBWSxLQUFLLENBQUM7SUFFckIsQ0FBQztJQUVoQix1Q0FBVyxHQUFYLFVBQVksYUFBNEI7UUFDdEMsSUFBSSxhQUFhLENBQUMsV0FBVyxFQUFFO1lBQzdCLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFO2dCQUNuQixJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7YUFDdkI7U0FDRjthQUFNLElBQUksYUFBYSxDQUFDLFNBQVMsRUFBRTtZQUNsQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRTtnQkFDbkIsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO2FBQ3ZCO1NBQ0Y7SUFDSCxDQUFDO0lBRUQsb0NBQVEsR0FBUixjQUFZLENBQUM7SUFFTCwwQ0FBYyxHQUF0QjtRQUNFLElBQUksSUFBSSxDQUFDLFdBQVcsRUFBRTtZQUNwQixrREFBa0Q7WUFDbEQsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsRUFBRTtnQkFDdkMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7YUFDekI7aUJBQU07Z0JBQ0wsOENBQThDO2dCQUM5QyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFO29CQUM1QyxJQUFJLENBQUMsV0FBVyxHQUFHLFNBQVMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO2lCQUNqRDtnQkFDRCxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQzthQUN6QjtTQUNGO0lBQ0gsQ0FBQztJQUVPLDRDQUFnQixHQUF4QjtRQUNFLDZCQUE2QjtRQUM3QixJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUMzRCw4QkFBOEI7UUFDOUIsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsRUFBRTtZQUNwQyxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQ3ZFO0lBQ0gsQ0FBQztJQTNDUTtRQUFSLEtBQUssRUFBRTs7MERBQTBCO0lBQ3pCO1FBQVIsS0FBSyxFQUFFOzs0REFBZ0M7SUFDL0I7UUFBUixLQUFLLEVBQUU7OzZEQUFpQztJQUNoQztRQUFSLEtBQUssRUFBRTs7d0RBQTRCO0lBSnpCLGlCQUFpQjtRQUw3QixTQUFTLENBQUM7WUFDVCxRQUFRLEVBQUUsV0FBVztZQUNyQiwrSUFBeUM7O1NBRTFDLENBQUM7O09BQ1csaUJBQWlCLENBNkM3QjtJQUFELHdCQUFDO0NBQUEsQUE3Q0QsSUE2Q0M7U0E3Q1ksaUJBQWlCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgT25DaGFuZ2VzLCBPbkluaXQsIFNpbXBsZUNoYW5nZXMgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbHV4LWltYWdlJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2x1eC1pbWFnZS5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2x1eC1pbWFnZS5jb21wb25lbnQuc2NzcyddXG59KVxuZXhwb3J0IGNsYXNzIEx1eEltYWdlQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMge1xuICBASW5wdXQoKSBsdXhJbWFnZVNyYzogc3RyaW5nID0gJyc7XG4gIEBJbnB1dCgpIGx1eEltYWdlV2lkdGg6IHN0cmluZyA9ICdhdXRvJztcbiAgQElucHV0KCkgbHV4SW1hZ2VIZWlnaHQ6IHN0cmluZyA9ICdhdXRvJztcbiAgQElucHV0KCkgbHV4UmF3U3JjOiBib29sZWFuID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoKSB7fVxuXG4gIG5nT25DaGFuZ2VzKHNpbXBsZUNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcbiAgICBpZiAoc2ltcGxlQ2hhbmdlcy5sdXhJbWFnZVNyYykge1xuICAgICAgaWYgKCF0aGlzLmx1eFJhd1NyYykge1xuICAgICAgICB0aGlzLnVwZGF0ZUltYWdlU3JjKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChzaW1wbGVDaGFuZ2VzLmx1eFJhd1NyYykge1xuICAgICAgaWYgKCF0aGlzLmx1eFJhd1NyYykge1xuICAgICAgICB0aGlzLnVwZGF0ZUltYWdlU3JjKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgbmdPbkluaXQoKSB7fVxuXG4gIHByaXZhdGUgdXBkYXRlSW1hZ2VTcmMoKSB7XG4gICAgaWYgKHRoaXMubHV4SW1hZ2VTcmMpIHtcbiAgICAgIC8vIFBydWVmZW4gb2IgZXMgc2ljaCB1bSBlaW4gZXh0ZXJuZXMgQmlsZCBoYW5kZWx0XG4gICAgICBpZiAodGhpcy5sdXhJbWFnZVNyYy5zdGFydHNXaXRoKCdodHRwJykpIHtcbiAgICAgICAgdGhpcy5zYW5pdGl6ZUltYWdlU3JjKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBXZW5uIG5pY2h0LCBhdWYgZGVuIEFzc2V0cy1PcmRuZXIgdmVyd2Vpc2VuXG4gICAgICAgIGlmICh0aGlzLmx1eEltYWdlU3JjLmluZGV4T2YoJ2Fzc2V0JykgPT09IC0xKSB7XG4gICAgICAgICAgdGhpcy5sdXhJbWFnZVNyYyA9ICdhc3NldHMvJyArIHRoaXMubHV4SW1hZ2VTcmM7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zYW5pdGl6ZUltYWdlU3JjKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzYW5pdGl6ZUltYWdlU3JjKCkge1xuICAgIC8vIERvcHBlbHRlIFNsYXNoZXMgZW50ZmVybmVuXG4gICAgdGhpcy5sdXhJbWFnZVNyYyA9IHRoaXMubHV4SW1hZ2VTcmMucmVwbGFjZSgvXFwvXFwvKy9nLCAnLycpO1xuICAgIC8vIEZ1ZWhyZW5kZSBTbGFzaGVzIGVudGZlcm5lblxuICAgIGlmICh0aGlzLmx1eEltYWdlU3JjLnN0YXJ0c1dpdGgoJy8nKSkge1xuICAgICAgdGhpcy5sdXhJbWFnZVNyYyA9IHRoaXMubHV4SW1hZ2VTcmMuc2xpY2UoMSwgdGhpcy5sdXhJbWFnZVNyYy5sZW5ndGgpO1xuICAgIH1cbiAgfVxufVxuIl19