import * as tslib_1 from "tslib";
import { Component, EventEmitter, forwardRef, HostBinding, Inject, Input, Optional, Output, ViewChild } from '@angular/core';
import { MatExpansionPanel } from '@angular/material';
import { LuxAccordionComponent } from '../lux-accordion/lux-accordion.component';
var LuxPanelComponent = /** @class */ (function () {
    function LuxPanelComponent(parent) {
        this.parent = parent;
        this.luxExpanded = false;
        this.luxOpened = new EventEmitter();
        this.luxClosed = new EventEmitter();
        this.luxExpandedChange = new EventEmitter();
        this.pr1 = true;
        this.pl1 = true;
    }
    LuxPanelComponent.prototype.ngOnInit = function () {
        var _this = this;
        if (this.parent) {
            if (this.luxHideToggle === undefined) {
                this.luxHideToggle = this.parent.luxHideToggle;
            }
            if (this.luxDisabled === undefined) {
                this.luxDisabled = this.parent.luxDisabled;
            }
            if (this.luxExpandedHeaderHeight === undefined) {
                this.luxExpandedHeaderHeight = this.parent.luxExpandedHeaderHeight;
            }
            if (this.luxCollapsedHeaderHeight === undefined) {
                this.luxCollapsedHeaderHeight = this.parent.luxCollapsedHeaderHeight;
            }
            // Diese Zeile wird benötigt, damit der Multi-Mode
            // (nur ein Abschnitt darf geöffnet sein) des Accordions funktioniert.
            this.matExpansionPanel.accordion = this.parent.matAccordion;
            // Um eine zyklische Abhängigkeit mit dem lux-accordion zu vermeiden,
            // wurde hier ein Event verwendet.
            this.subscription = this.parent.changed$.subscribe(function (propertyName) {
                if (propertyName === 'luxHideToggle') {
                    _this.luxHideToggle = _this.parent.luxHideToggle;
                }
                else if (propertyName === 'luxDisabled') {
                    _this.luxDisabled = _this.parent.luxDisabled;
                }
                else if (propertyName === 'luxExpandedHeaderHeight') {
                    _this.luxExpandedHeaderHeight = _this.parent.luxExpandedHeaderHeight;
                }
                else if (propertyName === 'luxCollapsedHeaderHeight') {
                    _this.luxCollapsedHeaderHeight = _this.parent.luxCollapsedHeaderHeight;
                }
            });
        }
    };
    LuxPanelComponent.prototype.ngOnDestroy = function () {
        if (this.parent) {
            this.subscription.unsubscribe();
        }
    };
    LuxPanelComponent.prototype.onOpened = function (eventValue) {
        this.luxOpened.emit(eventValue);
        this.luxExpanded = true;
        this.luxExpandedChange.emit(this.luxExpanded);
    };
    LuxPanelComponent.prototype.onClosed = function (eventValue) {
        this.luxClosed.emit(eventValue);
        this.luxExpanded = false;
        this.luxExpandedChange.emit(this.luxExpanded);
    };
    LuxPanelComponent.ctorParameters = function () { return [
        { type: LuxAccordionComponent, decorators: [{ type: Optional }, { type: Inject, args: [forwardRef(function () { return LuxAccordionComponent; }),] }] }
    ]; };
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Boolean)
    ], LuxPanelComponent.prototype, "luxDisabled", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Boolean)
    ], LuxPanelComponent.prototype, "luxExpanded", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Boolean)
    ], LuxPanelComponent.prototype, "luxHideToggle", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", String)
    ], LuxPanelComponent.prototype, "luxCollapsedHeaderHeight", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", String)
    ], LuxPanelComponent.prototype, "luxExpandedHeaderHeight", void 0);
    tslib_1.__decorate([
        Output(),
        tslib_1.__metadata("design:type", Object)
    ], LuxPanelComponent.prototype, "luxOpened", void 0);
    tslib_1.__decorate([
        Output(),
        tslib_1.__metadata("design:type", Object)
    ], LuxPanelComponent.prototype, "luxClosed", void 0);
    tslib_1.__decorate([
        Output(),
        tslib_1.__metadata("design:type", EventEmitter)
    ], LuxPanelComponent.prototype, "luxExpandedChange", void 0);
    tslib_1.__decorate([
        ViewChild(MatExpansionPanel, { static: true }),
        tslib_1.__metadata("design:type", MatExpansionPanel)
    ], LuxPanelComponent.prototype, "matExpansionPanel", void 0);
    tslib_1.__decorate([
        HostBinding('class.lux-pr-1'),
        tslib_1.__metadata("design:type", Boolean)
    ], LuxPanelComponent.prototype, "pr1", void 0);
    tslib_1.__decorate([
        HostBinding('class.lux-pl-1'),
        tslib_1.__metadata("design:type", Boolean)
    ], LuxPanelComponent.prototype, "pl1", void 0);
    LuxPanelComponent = tslib_1.__decorate([
        Component({
            selector: 'lux-panel',
            template: "<mat-expansion-panel\n  [disabled]=\"luxDisabled\"\n  [expanded]=\"luxExpanded\"\n  [hideToggle]=\"luxHideToggle\"\n  (opened)=\"onOpened($event)\"\n  (closed)=\"onClosed($event)\"\n  ngClass.sm=\"lux-panel-mobile\"\n  ngClass.xs=\"lux-panel-mobile\"\n>\n  <mat-expansion-panel-header [expandedHeight]=\"luxExpandedHeaderHeight\" [collapsedHeight]=\"luxCollapsedHeaderHeight\">\n    <ng-content select=\"lux-panel-header-title\"></ng-content>\n    <ng-content select=\"lux-panel-header-description\"></ng-content>\n  </mat-expansion-panel-header>\n  <ng-content select=\"lux-panel-content\"></ng-content>\n  <ng-content select=\"lux-panel-action\"></ng-content>\n</mat-expansion-panel>\n",
            styles: [":host{display:block}.lux-panel-mobile .mat-expansion-panel-header{padding:0 12px!important}.lux-panel-mobile ::ng-deep .mat-expansion-panel-body{padding:0 12px 8px!important}.lux-panel-mobile ::ng-deep .mat-expansion-panel-body .mat-expansion-panel-content,.lux-panel-mobile ::ng-deep .mat-expansion-panel-body .mat-expansion-panel-header{position:relative}"]
        }),
        tslib_1.__param(0, Optional()), tslib_1.__param(0, Inject(forwardRef(function () { return LuxAccordionComponent; }))),
        tslib_1.__metadata("design:paramtypes", [LuxAccordionComponent])
    ], LuxPanelComponent);
    return LuxPanelComponent;
}());
export { LuxPanelComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibHV4LXBhbmVsLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BpaGstZ2ZpL2x1eC1jb21wb25lbnRzLyIsInNvdXJjZXMiOlsic3JjL2FwcC9tb2R1bGVzL2x1eC1sYXlvdXQvbHV4LXBhbmVsL2x1eC1wYW5lbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQ1QsWUFBWSxFQUNaLFVBQVUsRUFDVixXQUFXLEVBQ1gsTUFBTSxFQUNOLEtBQUssRUFHTCxRQUFRLEVBQ1IsTUFBTSxFQUNOLFNBQVMsRUFDVixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUN0RCxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSwwQ0FBMEMsQ0FBQztBQVFqRjtJQW1CRSwyQkFBaUYsTUFBNkI7UUFBN0IsV0FBTSxHQUFOLE1BQU0sQ0FBdUI7UUFqQnJHLGdCQUFXLEdBQVksS0FBSyxDQUFDO1FBTTVCLGNBQVMsR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDO1FBQ3BDLGNBQVMsR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDO1FBQ3BDLHNCQUFpQixHQUEwQixJQUFJLFlBQVksRUFBRSxDQUFDO1FBSXpDLFFBQUcsR0FBWSxJQUFJLENBQUM7UUFDcEIsUUFBRyxHQUFZLElBQUksQ0FBQztJQUk4RCxDQUFDO0lBRWxILG9DQUFRLEdBQVI7UUFBQSxpQkFpQ0M7UUFoQ0MsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQ2YsSUFBSSxJQUFJLENBQUMsYUFBYSxLQUFLLFNBQVMsRUFBRTtnQkFDcEMsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQzthQUNoRDtZQUNELElBQUksSUFBSSxDQUFDLFdBQVcsS0FBSyxTQUFTLEVBQUU7Z0JBQ2xDLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FB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QUE5QixXQUFXLENBQUMsZ0JBQWdCLENBQUM7O2tEQUFxQjtJQWZ4QyxpQkFBaUI7UUFMN0IsU0FBUyxDQUFDO1lBQ1QsUUFBUSxFQUFFLFdBQVc7WUFDckIsMnJCQUF5Qzs7U0FFMUMsQ0FBQztRQW9CYSxtQkFBQSxRQUFRLEVBQUUsQ0FBQSxFQUFFLG1CQUFBLE1BQU0sQ0FBQyxVQUFVLENBQUMsY0FBTSxPQUFBLHFCQUFxQixFQUFyQixDQUFxQixDQUFDLENBQUMsQ0FBQTtpREFBaUIscUJBQXFCO09BbkJuRyxpQkFBaUIsQ0F5RTdCO0lBQUQsd0JBQUM7Q0FBQSxBQXpFRCxJQXlFQztTQXpFWSxpQkFBaUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDb21wb25lbnQsXG4gIEV2ZW50RW1pdHRlcixcbiAgZm9yd2FyZFJlZixcbiAgSG9zdEJpbmRpbmcsXG4gIEluamVjdCxcbiAgSW5wdXQsXG4gIE9uRGVzdHJveSxcbiAgT25Jbml0LFxuICBPcHRpb25hbCxcbiAgT3V0cHV0LFxuICBWaWV3Q2hpbGRcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBNYXRFeHBhbnNpb25QYW5lbCB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsJztcbmltcG9ydCB7IEx1eEFjY29yZGlvbkNvbXBvbmVudCB9IGZyb20gJy4uL2x1eC1hY2NvcmRpb24vbHV4LWFjY29yZGlvbi5jb21wb25lbnQnO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2x1eC1wYW5lbCcsXG4gIHRlbXBsYXRlVXJsOiAnLi9sdXgtcGFuZWwuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9sdXgtcGFuZWwuY29tcG9uZW50LnNjc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBMdXhQYW5lbENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95IHtcbiAgQElucHV0KCkgbHV4RGlzYWJsZWQ6IGJvb2xlYW47XG4gIEBJbnB1dCgpIGx1eEV4cGFuZGVkOiBib29sZWFuID0gZmFsc2U7XG4gIEBJbnB1dCgpIGx1eEhpZGVUb2dnbGU6IGJvb2xlYW47XG5cbiAgQElucHV0KCkgbHV4Q29sbGFwc2VkSGVhZGVySGVpZ2h0OiBzdHJpbmc7XG4gIEBJbnB1dCgpIGx1eEV4cGFuZGVkSGVhZGVySGVpZ2h0OiBzdHJpbmc7XG5cbiAgQE91dHB1dCgpIGx1eE9wZW5lZCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuICBAT3V0cHV0KCkgbHV4Q2xvc2VkID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG4gIEBPdXRwdXQoKSBsdXhFeHBhbmRlZENoYW5nZTogRXZlbnRFbWl0dGVyPGJvb2xlYW4+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIEBWaWV3Q2hpbGQoTWF0RXhwYW5zaW9uUGFuZWwsIHsgc3RhdGljOiB0cnVlIH0pIG1hdEV4cGFuc2lvblBhbmVsOiBNYXRFeHBhbnNpb25QYW5lbDtcblxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmx1eC1wci0xJykgcHIxOiBib29sZWFuID0gdHJ1ZTtcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5sdXgtcGwtMScpIHBsMTogYm9vbGVhbiA9IHRydWU7XG5cbiAgc3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XG5cbiAgY29uc3RydWN0b3IoQE9wdGlvbmFsKCkgQEluamVjdChmb3J3YXJkUmVmKCgpID0+IEx1eEFjY29yZGlvbkNvbXBvbmVudCkpIHByaXZhdGUgcGFyZW50OiBMdXhBY2NvcmRpb25Db21wb25lbnQpIHt9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgaWYgKHRoaXMucGFyZW50KSB7XG4gICAgICBpZiAodGhpcy5sdXhIaWRlVG9nZ2xlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5sdXhIaWRlVG9nZ2xlID0gdGhpcy5wYXJlbnQubHV4SGlkZVRvZ2dsZTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmx1eERpc2FibGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5sdXhEaXNhYmxlZCA9IHRoaXMucGFyZW50Lmx1eERpc2FibGVkO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMubHV4RXhwYW5kZWRIZWFkZXJIZWlnaHQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLmx1eEV4cGFuZGVkSGVhZGVySGVpZ2h0ID0gdGhpcy5wYXJlbnQubHV4RXhwYW5kZWRIZWFkZXJIZWlnaHQ7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5sdXhDb2xsYXBzZWRIZWFkZXJIZWlnaHQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLmx1eENvbGxhcHNlZEhlYWRlckhlaWdodCA9IHRoaXMucGFyZW50Lmx1eENvbGxhcHNlZEhlYWRlckhlaWdodDtcbiAgICAgIH1cblxuICAgICAgLy8gRGllc2UgWmVpbGUgd2lyZCBiZW7DtnRpZ3QsIGRhbWl0IGRlciBNdWx0aS1Nb2RlXG4gICAgICAvLyAobnVyIGVpbiBBYnNjaG5pdHQgZGFyZiBnZcO2ZmZuZXQgc2VpbikgZGVzIEFjY29yZGlvbnMgZnVua3Rpb25pZXJ0LlxuICAgICAgdGhpcy5tYXRFeHBhbnNpb25QYW5lbC5hY2NvcmRpb24gPSB0aGlzLnBhcmVudC5tYXRBY2NvcmRpb247XG5cbiAgICAgIC8vIFVtIGVpbmUgenlrbGlzY2hlIEFiaMOkbmdpZ2tlaXQgbWl0IGRlbSBsdXgtYWNjb3JkaW9uIHp1IHZlcm1laWRlbixcbiAgICAgIC8vIHd1cmRlIGhpZXIgZWluIEV2ZW50IHZlcndlbmRldC5cbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9uID0gdGhpcy5wYXJlbnQuY2hhbmdlZCQuc3Vic2NyaWJlKHByb3BlcnR5TmFtZSA9PiB7XG4gICAgICAgIGlmIChwcm9wZXJ0eU5hbWUgPT09ICdsdXhIaWRlVG9nZ2xlJykge1xuICAgICAgICAgIHRoaXMubHV4SGlkZVRvZ2dsZSA9IHRoaXMucGFyZW50Lmx1eEhpZGVUb2dnbGU7XG4gICAgICAgIH0gZWxzZSBpZiAocHJvcGVydHlOYW1lID09PSAnbHV4RGlzYWJsZWQnKSB7XG4gICAgICAgICAgdGhpcy5sdXhEaXNhYmxlZCA9IHRoaXMucGFyZW50Lmx1eERpc2FibGVkO1xuICAgICAgICB9IGVsc2UgaWYgKHByb3BlcnR5TmFtZSA9PT0gJ2x1eEV4cGFuZGVkSGVhZGVySGVpZ2h0Jykge1xuICAgICAgICAgIHRoaXMubHV4RXhwYW5kZWRIZWFkZXJIZWlnaHQgPSB0aGlzLnBhcmVudC5sdXhFeHBhbmRlZEhlYWRlckhlaWdodDtcbiAgICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0eU5hbWUgPT09ICdsdXhDb2xsYXBzZWRIZWFkZXJIZWlnaHQnKSB7XG4gICAgICAgICAgdGhpcy5sdXhDb2xsYXBzZWRIZWFkZXJIZWlnaHQgPSB0aGlzLnBhcmVudC5sdXhDb2xsYXBzZWRIZWFkZXJIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICAgIGlmICh0aGlzLnBhcmVudCkge1xuICAgICAgdGhpcy5zdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICB9XG4gIH1cblxuICBvbk9wZW5lZChldmVudFZhbHVlKSB7XG4gICAgdGhpcy5sdXhPcGVuZWQuZW1pdChldmVudFZhbHVlKTtcbiAgICB0aGlzLmx1eEV4cGFuZGVkID0gdHJ1ZTtcbiAgICB0aGlzLmx1eEV4cGFuZGVkQ2hhbmdlLmVtaXQodGhpcy5sdXhFeHBhbmRlZCk7XG4gIH1cblxuICBvbkNsb3NlZChldmVudFZhbHVlKSB7XG4gICAgdGhpcy5sdXhDbG9zZWQuZW1pdChldmVudFZhbHVlKTtcbiAgICB0aGlzLmx1eEV4cGFuZGVkID0gZmFsc2U7XG4gICAgdGhpcy5sdXhFeHBhbmRlZENoYW5nZS5lbWl0KHRoaXMubHV4RXhwYW5kZWQpO1xuICB9XG59XG4iXX0=