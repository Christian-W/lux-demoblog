import * as tslib_1 from "tslib";
import { animate, state, style, transition, trigger } from '@angular/animations';
import { AfterViewInit, ChangeDetectorRef, Component, ComponentFactoryResolver, ContentChild, DoCheck, ElementRef, EventEmitter, HostBinding, Input, OnDestroy, OnInit, Output, QueryList, ViewChild, ViewChildren, ViewContainerRef } from '@angular/core';
import { LuxListItemComponent } from '../lux-list/lux-list-subcomponents/lux-list-item.component';
import { LuxListComponent } from '../lux-list/lux-list.component';
import { LuxTabsComponent } from '../lux-tabs/lux-tabs.component';
import { LuxMasterDetailMobileHelperService } from './lux-master-detail-mobile-helper.service';
import { LuxDetailViewComponent } from './lux-master-detail-subcomponents/lux-detail-view/lux-detail-view.component';
import { LuxMasterFooterComponent } from './lux-master-detail-subcomponents/lux-master-footer/lux-master-footer.component';
import { LuxMasterHeaderComponent } from './lux-master-detail-subcomponents/lux-master-header/lux-master-header.component';
import { LuxMasterSimpleComponent } from './lux-master-detail-subcomponents/lux-master-simple/lux-master-simple.component';
import { BehaviorSubject, ReplaySubject } from 'rxjs';
import { delay, tap } from 'rxjs/operators';
import { LuxDetailWrapperComponent } from './lux-master-detail-subcomponents/lux-detail-view/lux-detail-wrapper.component';
import { LiveAnnouncer } from '@angular/cdk/a11y';
var LuxMasterDetailComponent = /** @class */ (function () {
    function LuxMasterDetailComponent(mobileHelperService, cdr, cfr, liveAnnouncer) {
        this.mobileHelperService = mobileHelperService;
        this.cdr = cdr;
        this.cfr = cfr;
        this.liveAnnouncer = liveAnnouncer;
        this.luxSelectedDetailChange = new EventEmitter();
        this.luxScrolled = new EventEmitter();
        this.overflowY = true;
        this._luxMasterList = new BehaviorSubject([]);
        this._luxOpen = true;
        this.updateDetail$ = new ReplaySubject(1);
        this.detailContext = { $implicit: {} };
        // Flag welches bestimmt ob die Empty-Anzeigen der Masterliste anhand der Detail-Ansicht ausgerichtet werden
        this.alignEmptyIndicators = true;
        this.luxEmptyIconMaster = 'fas fa-info-circle';
        this.luxEmptyLabelMaster = 'Keine Einträge vorhanden';
        this.luxEmptyIconDetail = 'fas fa-info-circle';
        this.luxEmptyLabelDetail = 'Kein Element ausgewählt';
        this.luxEmptyIconMasterSize = '5x';
        this.luxEmptyIconDetailSize = '5x';
        this.luxMasterSpinnerDelay = 1000;
        this.luxTitleLineBreak = false;
        this.luxMasterIsLoading = false;
        this.luxCompareWith = function (o1, o2) { return o1 === o2; };
        this.mobileHelperService.register();
    }
    Object.defineProperty(LuxMasterDetailComponent.prototype, "luxOpen", {
        get: function () {
            return this._luxOpen;
        },
        set: function (open) {
            if (open) {
                this.mobileHelperService.openMaster();
            }
            else {
                this.mobileHelperService.closeMaster();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LuxMasterDetailComponent.prototype, "luxSelectedDetail", {
        /* Selected Detail Get/Set */
        get: function () {
            return this._luxSelectedDetail;
        },
        set: function (value) {
            this.updateDetail$.next(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LuxMasterDetailComponent.prototype, "luxMasterList", {
        /* Master List Get/Set */
        get: function () {
            return this._luxMasterList.getValue();
        },
        set: function (value) {
            if (this.masterListLength && value && this.masterListLength < value.length) {
                this.announcePossibleInfiniteScrolling();
            }
            this._luxMasterList.next(value);
            this.masterListLength = value ? value.length : 0;
        },
        enumerable: true,
        configurable: true
    });
    LuxMasterDetailComponent.prototype.ngOnInit = function () {
        this.handleMasterListUpdate();
        this.handleViewCollapse();
        this.mobileHelperService.openMaster();
    };
    LuxMasterDetailComponent.prototype.ngAfterViewInit = function () {
        this.handleDetailUpdate();
        this.handleMasterQueryList();
    };
    LuxMasterDetailComponent.prototype.ngOnDestroy = function () {
        this.mobileHelperService.unregister();
        this.updateDetailSubscription.unsubscribe();
    };
    LuxMasterDetailComponent.prototype.ngDoCheck = function () {
        // Wurde ein Element in die Masterliste gepusht oder entfernt?
        if (this.luxMasterList && this.luxMasterList.length !== this.masterListLength) {
            if (this.luxMasterList.length > this.masterListLength) {
                this.announcePossibleInfiniteScrolling();
            }
            // Wenn ja, das selektierte Detail neurendern
            this.masterListLength = this.luxMasterList.length;
            this.luxSelectedDetail = this.luxMasterList[this.selectedPosition];
            this.announcePossibleInfiniteScrolling();
        }
        // Ausrichtung der Empty-Indikatoren der Masterliste prüfen
        if (!this.mobileHelperService.isMobile() && (!this.luxMasterList || this.luxMasterList.length === 0)) {
            this.checkEmptyIndicatorAlignment();
        }
    };
    /**
     * Wenn in der LuxList ein neuer Selected-Wert gepusht wird, diesen abfangen und
     * ein neues Detail auswählen.
     * @param $event
     */
    LuxMasterDetailComponent.prototype.onSelectedChange = function ($event) {
        if ($event > -1) {
            this.selectedPosition = $event;
            this.updateDetail$.next(this.luxMasterList[$event]);
            if (this.mobileHelperService.isMobile()) {
                this.mobileHelperService.closeMaster();
            }
        }
    };
    /**
     * Bestimmt ob die Masterliste auf- oder eingeklappt ist.
     * @param open
     */
    LuxMasterDetailComponent.prototype.toggleList = function (open) {
        if (open) {
            this.mobileHelperService.openMaster();
        }
        else {
            this.mobileHelperService.closeMaster();
        }
        if (this.tabsComponent) {
            this.tabsComponent.rerenderTabs();
        }
    };
    /**
     * Prueft ob die Detailansicht gerade fuer den User sichtbar ist.
     * @returns boolean
     */
    LuxMasterDetailComponent.prototype.isDetailInvisible = function () {
        return this.mobileHelperService.isMobile() && this.luxOpen;
    };
    LuxMasterDetailComponent.prototype.onInfiniteScrollingLoad = function ($event) {
        this.luxScrolled.emit($event);
    };
    LuxMasterDetailComponent.prototype.onSwipeLeft = function () {
        if (this.mobileHelperService.isMobile()) {
            this.mobileHelperService.closeMaster();
        }
    };
    LuxMasterDetailComponent.prototype.onSwipeRight = function () {
        if (this.mobileHelperService.isMobile()) {
            this.mobileHelperService.openMaster();
        }
    };
    /**
     * Kapselung von der übergebenen luxCompareWith-Funktion.
     * Fängt undefinierte Objekte ab und returned stattdessen false.
     * @param o1
     * @param o2
     */
    LuxMasterDetailComponent.prototype.compareObjects = function (o1, o2) {
        if (!o1 || !o2) {
            return false;
        }
        return this.luxCompareWith(o1, o2);
    };
    /**
     * Steuert das Breitenverhaeltnis von Master und Detail je nachdem
     * ob der Master auf- oder eingeklappt ist und ob eine Mobilansicht aktiv ist.
     */
    LuxMasterDetailComponent.prototype.updateOpen = function () {
        if (this.luxOpen) {
            if (this.mobileHelperService.isMobile()) {
                this.flexMaster = '100';
                this.flexDetail = '0';
            }
            else {
                this.flexMaster = '30';
                this.flexDetail = '70';
            }
        }
        else {
            if (this.mobileHelperService.isMobile()) {
                this.flexMaster = '0';
                this.flexDetail = '100';
            }
            else {
                this.flexMaster = '5';
                this.flexDetail = '95';
            }
        }
    };
    /**
     * Kümmert sich um Änderungen an der HTML-Node der Master-Liste.
     * Rückt dabei das selektierte Element in den Fokus und berechnet wie viele Elemente
     * gerade in der Liste sichtbar sein können (für das Durchschalten mit Pfeiltasten benötigt).
     */
    LuxMasterDetailComponent.prototype.handleMasterQueryList = function () {
        var _this = this;
        this.luxMasterQueryList.changes.subscribe(function (masterListElements) {
            if (masterListElements.first) {
                var nativeElement = masterListElements.first.nativeElement;
                _this.maxItemsVisible = Math.floor(nativeElement.offsetHeight / nativeElement.offsetHeight);
            }
            // Der Abschnitt hier fängt den Fall ab, dass z.B. das LuxMasterList-Array selbst angepasst wird (z.B. durch Array.reverse)
            // Das sorgt dafür, dass das visuell selektierte Element auch das passende zur Detail-View ist.
            var newSelectedPosition = _this.luxMasterList.indexOf(_this.luxSelectedDetail);
            if (newSelectedPosition !== _this.selectedPosition) {
                setTimeout(function () {
                    _this.selectedPosition = newSelectedPosition;
                });
            }
        });
    };
    /**
     * Kümmert sich um die Kollabierung der Master-Liste, wenn zwischen Mobil- und Desktopansicht gewechselt wird.
     */
    LuxMasterDetailComponent.prototype.handleViewCollapse = function () {
        var _this = this;
        this.mobileHelperService.masterCollapsedObservable.subscribe(function (open) {
            // Falls nichts selektiert ist, sollte die Darstellung beim Wechsel in kleine Media Queries die Masterliste zeigen
            if (_this.mobileHelperService.isMobile() && !_this.luxSelectedDetail && !open) {
                open = true;
            }
            _this._luxOpen = open;
            _this.updateOpen();
        });
    };
    /**
     * Kümmert sich um Änderungen an dem selektierten Detail.
     * Dabei werden mehrere Zuweisungen an das Detail über throttleTime gebündelt und nur das Aktuellste genommen.
     * Anschließend wird die Komponente angewiesen das neue Detail-Objekt zu rendern.
     */
    LuxMasterDetailComponent.prototype.handleDetailUpdate = function () {
        var _this = this;
        this.updateDetailSubscription = this.updateDetail$.asObservable().subscribe(function (detail) {
            if (!detail) {
                _this.detailViewContainerRef.clear();
                _this.setNewDetail(detail);
            }
            else {
                if (!_this.compareObjects(_this.luxSelectedDetail, detail)) {
                    _this.detailViewContainerRef.clear();
                    if (detail) {
                        _this.detailContext = { $implicit: detail };
                        // Den Detail-Wrapper erzeugen und abfangen, wann die Nodes geladen worden sind
                        var child = _this.cfr.resolveComponentFactory(LuxDetailWrapperComponent);
                        var childRef = _this.detailViewContainerRef.createComponent(child);
                        var instance = childRef.instance;
                        instance.luxDetailContext = _this.detailContext;
                        instance.luxDetailTemplate = _this.detailView.tempRef;
                        instance.luxDetailRendered.subscribe(function () {
                            _this.setNewDetail(detail);
                        });
                        // Die Detailansicht nach dem Wechsel wieder nach oben scrollen lassen
                        _this.detailViewContainerRef.element.nativeElement.parentNode.scrollTop = 0;
                        _this.cdr.detectChanges();
                    }
                }
            }
        });
    };
    /**
     * Wird aufgerufen nachdem ein neues Detail-Template gerendert wurde und aktualisiert
     * luxSelectedDetail dementsprechend.
     */
    LuxMasterDetailComponent.prototype.setNewDetail = function (detail) {
        if (!this.compareObjects(this.luxSelectedDetail, detail)) {
            this._luxSelectedDetail = detail;
            this.selectedPosition = this.luxMasterList.indexOf(detail);
            this.luxSelectedDetailChange.emit(this.luxSelectedDetail);
            // Die Master-Liste fokussieren (die Liste gibt es nur einmal, weil wir auf Changes hören, ist sie aber in einer QueryList)
            this.luxMasterQueryList.first.nativeElement.focus();
            if (this.mobileHelperService.isMobile()) {
                this.luxOpen = false;
            }
            this.mobileHelperService.hasValue = !!this._luxSelectedDetail;
            this.cdr.detectChanges();
        }
    };
    /**
     * Kümmert sich um den Fall, dass die Master-Liste selbst sich ändert.
     */
    LuxMasterDetailComponent.prototype.handleMasterListUpdate = function () {
        var _this = this;
        this._luxMasterList
            .asObservable()
            .pipe(
        // Workaround um ExpressionChanged-Fehler zu vermeiden
        delay(0), tap(function () {
            if (!_this.luxMasterList || _this.luxMasterList.length === 0) {
                _this.luxSelectedDetail = undefined;
            }
        }))
            .subscribe();
    };
    /**
     * Prüft ob das Header- oder -Footer-Element der Masterliste ca. 50% der Master-Höhe einnehmen.
     *
     * Wenn ja, wird die Ausrichtung des Master-Empty-Labels und Master-Empty-Icons nicht mehr anhand des Detail bestimmt.
     */
    LuxMasterDetailComponent.prototype.checkEmptyIndicatorAlignment = function () {
        var headerHeight = this.masterHeader ? this.masterHeader.nativeElement.offsetHeight : 0;
        var footerHeight = this.masterFooter ? this.masterFooter.nativeElement.offsetHeight : 0;
        if (this.masterContainer) {
            // Max-Height ist die Hälfte der Master-Container Höhe minus eine kleine Pauschale von 100px damit
            // die Ansicht nicht zu knapp ist
            var maxHeight = this.masterContainer.nativeElement.offsetHeight / 2 - 100;
            this.alignEmptyIndicators = !(headerHeight > maxHeight || footerHeight > maxHeight);
        }
    };
    /**
     * Meldet über den LiveAnnouncer, dass evtl. weitere Daten via InfiniteScrolling nachgeladen werden könnten.
     *
     * "assertive", damit die Meldung auf jeden Fall vom ScreenReader vorgelesen wird und nicht von etwaigen anderen
     * Aussagen verdeckt wird.
     */
    LuxMasterDetailComponent.prototype.announcePossibleInfiniteScrolling = function () {
        this.liveAnnouncer.announce('Die Masterliste hat weitere Einträge erhalten. ' +
            'Aufgrund des Infinite-Scrollings könnten vielleicht noch mehr Einträge nachgeladen werden.', 'assertive');
    };
    LuxMasterDetailComponent.ctorParameters = function () { return [
        { type: LuxMasterDetailMobileHelperService },
        { type: ChangeDetectorRef },
        { type: ComponentFactoryResolver },
        { type: LiveAnnouncer }
    ]; };
    tslib_1.__decorate([
        Output(),
        tslib_1.__metadata("design:type", EventEmitter)
    ], LuxMasterDetailComponent.prototype, "luxSelectedDetailChange", void 0);
    tslib_1.__decorate([
        Output(),
        tslib_1.__metadata("design:type", EventEmitter)
    ], LuxMasterDetailComponent.prototype, "luxScrolled", void 0);
    tslib_1.__decorate([
        ContentChild(LuxMasterSimpleComponent, { static: false }),
        tslib_1.__metadata("design:type", Object)
    ], LuxMasterDetailComponent.prototype, "masterSimple", void 0);
    tslib_1.__decorate([
        ContentChild(LuxDetailViewComponent, { static: false }),
        tslib_1.__metadata("design:type", Object)
    ], LuxMasterDetailComponent.prototype, "detailView", void 0);
    tslib_1.__decorate([
        ContentChild(LuxMasterFooterComponent, { static: false, read: ElementRef }),
        tslib_1.__metadata("design:type", ElementRef)
    ], LuxMasterDetailComponent.prototype, "masterFooter", void 0);
    tslib_1.__decorate([
        ViewChildren(LuxListComponent, { read: ElementRef }),
        tslib_1.__metadata("design:type", QueryList)
    ], LuxMasterDetailComponent.prototype, "luxMasterQueryList", void 0);
    tslib_1.__decorate([
        ViewChildren(LuxListItemComponent),
        tslib_1.__metadata("design:type", QueryList)
    ], LuxMasterDetailComponent.prototype, "luxMasterListItemQueryList", void 0);
    tslib_1.__decorate([
        ViewChild(LuxMasterHeaderComponent, { read: ElementRef, static: true }),
        tslib_1.__metadata("design:type", ElementRef)
    ], LuxMasterDetailComponent.prototype, "masterHeader", void 0);
    tslib_1.__decorate([
        ViewChild(LuxListItemComponent, { read: ElementRef, static: false }),
        tslib_1.__metadata("design:type", ElementRef)
    ], LuxMasterDetailComponent.prototype, "luxMasterEntryElementRef", void 0);
    tslib_1.__decorate([
        ContentChild(LuxTabsComponent, { static: false }),
        tslib_1.__metadata("design:type", LuxTabsComponent)
    ], LuxMasterDetailComponent.prototype, "tabsComponent", void 0);
    tslib_1.__decorate([
        ViewChild('masterSpinnerCard', { read: ElementRef, static: true }),
        tslib_1.__metadata("design:type", ElementRef)
    ], LuxMasterDetailComponent.prototype, "masterSpinnerCard", void 0);
    tslib_1.__decorate([
        ViewChild('detailContainer', { read: ElementRef, static: false }),
        tslib_1.__metadata("design:type", ElementRef)
    ], LuxMasterDetailComponent.prototype, "detailFrame", void 0);
    tslib_1.__decorate([
        ViewChild('detailEmpty', { read: ElementRef, static: true }),
        tslib_1.__metadata("design:type", ElementRef)
    ], LuxMasterDetailComponent.prototype, "detailEmpty", void 0);
    tslib_1.__decorate([
        ViewChild('detailViewContainerRef', { read: ViewContainerRef, static: true }),
        tslib_1.__metadata("design:type", ViewContainerRef)
    ], LuxMasterDetailComponent.prototype, "detailViewContainerRef", void 0);
    tslib_1.__decorate([
        ViewChild('masterContainer', { read: ElementRef, static: true }),
        tslib_1.__metadata("design:type", ElementRef)
    ], LuxMasterDetailComponent.prototype, "masterContainer", void 0);
    tslib_1.__decorate([
        HostBinding('class.lux-overflow-y-auto'),
        tslib_1.__metadata("design:type", Boolean)
    ], LuxMasterDetailComponent.prototype, "overflowY", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", String)
    ], LuxMasterDetailComponent.prototype, "luxEmptyIconMaster", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", String)
    ], LuxMasterDetailComponent.prototype, "luxEmptyLabelMaster", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", String)
    ], LuxMasterDetailComponent.prototype, "luxEmptyIconDetail", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", String)
    ], LuxMasterDetailComponent.prototype, "luxEmptyLabelDetail", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Object)
    ], LuxMasterDetailComponent.prototype, "luxEmptyIconMasterSize", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Object)
    ], LuxMasterDetailComponent.prototype, "luxEmptyIconDetailSize", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Number)
    ], LuxMasterDetailComponent.prototype, "luxMasterSpinnerDelay", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", String)
    ], LuxMasterDetailComponent.prototype, "luxTagIdMaster", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", String)
    ], LuxMasterDetailComponent.prototype, "luxTagIdDetail", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Boolean)
    ], LuxMasterDetailComponent.prototype, "luxTitleLineBreak", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Boolean)
    ], LuxMasterDetailComponent.prototype, "luxMasterIsLoading", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Object)
    ], LuxMasterDetailComponent.prototype, "luxCompareWith", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Boolean),
        tslib_1.__metadata("design:paramtypes", [Boolean])
    ], LuxMasterDetailComponent.prototype, "luxOpen", null);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Object),
        tslib_1.__metadata("design:paramtypes", [Object])
    ], LuxMasterDetailComponent.prototype, "luxSelectedDetail", null);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Array),
        tslib_1.__metadata("design:paramtypes", [Array])
    ], LuxMasterDetailComponent.prototype, "luxMasterList", null);
    LuxMasterDetailComponent = tslib_1.__decorate([
        Component({
            selector: 'lux-master-detail',
            template: "<div\n  class=\"lux-master-detail\"\n  fxLayout=\"row\"\n  fxFlex=\"grow\"\n  (swipeleft)=\"onSwipeLeft()\"\n  (swiperight)=\"onSwipeRight()\"\n  fxFill\n>\n  <div\n    [fxFlex]=\"flexMaster\"\n    fxLayout=\"column\"\n    class=\"lux-master-container\"\n    tabindex=\"1\"\n    luxTagIdHandler\n    [luxTagId]=\"luxTagIdMaster\"\n    [ngClass]=\"{\n      'lux-hidden': !luxOpen && mobileHelperService.isMobile(),\n      'lux-0-width': !luxOpen && mobileHelperService.isMobile(),\n      'lux-master-container-mobile': mobileHelperService.isMobile(),\n      'lux-empty-elements-aligned': alignEmptyIndicators\n    }\"\n    #masterContainer\n  >\n    <!-- Header Element ueber der Master-Liste -->\n    <lux-master-header\n      (luxClicked)=\"toggleList($event)\"\n      [luxToggleHidden]=\"\n        (mobileHelperService.isMobile() && !this.luxSelectedDetail && !luxOpen) || mobileHelperService.isMobile()\n      \"\n      [ngClass]=\"{\n        'lux-not-open': !luxOpen,\n        'lux-hidden': !luxOpen && mobileHelperService.isMobile()\n      }\"\n    >\n      <ng-content select=\"lux-master-header-content\" *ngIf=\"luxOpen\"></ng-content>\n    </lux-master-header>\n\n    <!-- Master Simple Component gesetzt? -> Standard Lux Liste als Master nutzen  (window:keydown)=\"handleMasterKeyInput($event)\" -->\n    <lux-master-view fxFlex=\"grow\" [ngClass]=\"{ 'lux-hidden': !luxOpen && !mobileHelperService.isMobile() }\">\n      <lux-list\n        fxFlex=\"grow\"\n        class=\"lux-overflow-y-auto lux-overflow-wrap-break-word\"\n        luxInfiniteScroll\n        [luxScrollPercent]=\"85\"\n        [luxImmediateCallback]=\"true\"\n        [luxIsLoading]=\"luxMasterIsLoading\"\n        [luxEmptyIconSize]=\"luxEmptyIconMasterSize\"\n        [luxEmptyLabel]=\"luxEmptyLabelMaster\"\n        [luxEmptyIconName]=\"luxEmptyIconMaster\"\n        [luxSelectedPosition]=\"selectedPosition\"\n        (luxSelectedPositionChange)=\"onSelectedChange($event)\"\n        (luxScrolled)=\"onInfiniteScrollingLoad($event)\"\n      >\n        <lux-list-item\n          *ngFor=\"let masterElement of luxMasterList\"\n          [luxTitleLineBreak]=\"luxTitleLineBreak\"\n          luxTitle=\"{{ masterElement | luxPropertyFromObject: masterSimple.luxTitleProp }}\"\n          luxSubTitle=\"{{ masterElement | luxPropertyFromObject: masterSimple.luxSubTitleProp }}\"\n        >\n          <lux-list-item-icon>\n            <ng-container\n              *ngTemplateOutlet=\"masterSimple.iconTempRef; context: { $implicit: masterElement }\"\n            ></ng-container>\n          </lux-list-item-icon>\n          <lux-list-item-content>\n            <ng-container\n              *ngTemplateOutlet=\"masterSimple.contentTempRef; context: { $implicit: masterElement }\"\n            ></ng-container>\n          </lux-list-item-content>\n        </lux-list-item>\n\n        <div\n          fxLayout=\"row\"\n          fxLayoutAlign=\"center\"\n          #masterSpinnerCard\n          [@masterIsLoadingChanged]=\"luxMasterIsLoading\"\n          [ngClass]=\"{ 'lux-spinner-hidden': !luxMasterIsLoading }\"\n        >\n          <br *ngIf=\"luxMasterIsLoading\" />\n          <mat-progress-spinner class=\"lux-m-3\" color=\"primary\" mode=\"indeterminate\" diameter=\"48\" fxFlex=\"0 0 auto\">\n          </mat-progress-spinner>\n          <br *ngIf=\"luxMasterIsLoading\" />\n        </div>\n      </lux-list>\n    </lux-master-view>\n\n    <!-- Kein Master Simple Component gesetzt? -> Von Aufrufer eingegebenen Content als Master nutzen -->\n    <ng-content *ngIf=\"!masterSimple\" select=\"lux-master-view\"></ng-content>\n\n    <!-- Footer Element unter der Master-Liste -->\n    <ng-content select=\"lux-master-footer\" *ngIf=\"luxOpen\"></ng-content>\n  </div>\n\n  <div\n    [fxFlex]=\"flexDetail\"\n    fxFill\n    luxTagIdHandler\n    class=\"lux-detail-container lux-overflow-y-auto\"\n    [ngClass]=\"{ 'lux-display-none': isDetailInvisible() }\"\n    [luxTagId]=\"luxTagIdDetail\"\n    tabindex=\"2\"\n  >\n    <ng-template #detailViewContainerRef></ng-template>\n\n    <!-- Das Empty-Icon und Empty-Label, wenn kein Detail gegeben ist -->\n    <div\n      class=\"lux-detail-empty\"\n      [ngClass]=\"{ 'lux-display-none': isDetailInvisible() || selectedPosition > -1 }\"\n      fxLayout=\"column\"\n      fxLayoutAlign=\"center center\"\n      #detailEmpty\n    >\n      <lux-icon class=\"lux-detail-empty-icon\" [luxIconName]=\"luxEmptyIconDetail\" [luxIconSize]=\"luxEmptyIconDetailSize\">\n      </lux-icon>\n      <span class=\"lux-detail-empty-icon-text\">\n        <strong>{{ luxEmptyLabelDetail }}</strong>\n      </span>\n    </div>\n  </div>\n</div>\n",
            animations: [
                trigger('masterIsLoadingChanged', [
                    state('true', style({ opacity: 1 })),
                    state('false', style({ opacity: 0 })),
                    transition('1 => 0', animate('0.5s')),
                    transition('0 => 1', animate('1s'))
                ])
            ],
            styles: ["@charset \"UTF-8\";lux-side-nav .lux-side-nav-item,lux-side-nav lux-link{box-sizing:border-box}lux-side-nav .lux-side-nav-item.lux-side-nav-item-selected,lux-side-nav lux-link.lux-side-nav-item-selected{background-color:rgba(112,141,170,.2)!important;position:relative;border-radius:4px}lux-side-nav .lux-side-nav-item.lux-side-nav-item-selected:after,lux-side-nav lux-link.lux-side-nav-item-selected:after{content:'';left:0;width:6px;top:0;bottom:0;position:absolute;border-left:6px solid #0073b3;border-radius:4px 0 0 4px}lux-side-nav .lux-side-nav-item button .mat-button-focus-overlay,lux-side-nav lux-link button .mat-button-focus-overlay{display:none}lux-side-nav .lux-side-nav-item button:focus,lux-side-nav lux-link button:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}lux-side-nav .lux-side-nav-item button:hover,lux-side-nav lux-link button:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-list{border:4px solid transparent}lux-list:focus{outline-width:0;border:4px solid rgba(112,141,170,.2)!important}lux-list lux-list-item:focus{outline-width:0}lux-list lux-list-item:focus mat-card{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}lux-list lux-list-item lux-card.lux-list-item-selected mat-card{background-color:rgba(112,141,170,.2)!important;position:relative;border-radius:4px}lux-list lux-list-item lux-card.lux-list-item-selected mat-card:after{content:'';left:0;width:6px;top:0;bottom:0;position:absolute;border-left:6px solid #0073b3;border-radius:4px 0 0 4px}lux-list lux-list-item lux-card mat-card{box-sizing:border-box}lux-list lux-list-item lux-card mat-card:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .lux-form-control-label>*{color:#335c85}lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .cdk-focused .mat-radio-container,lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .mat-checkbox-inner-container,lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .mat-slide-toggle-thumb{position:relative}lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .cdk-focused .mat-radio-container:after,lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .mat-checkbox-inner-container:after,lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .mat-slide-toggle-thumb:after{content:\"\";border:1px solid rgba(112,141,170,.2);background-color:rgba(112,141,170,.2);display:block;top:-4px;left:-4px;right:-4px;bottom:-4px;border-radius:15px;z-index:1;position:absolute}lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .lux-form-control-container:after{content:'';display:block;box-sizing:border-box;left:0;right:0;position:absolute;height:2px;border-bottom:2px solid #0073b3}lux-datepicker mat-datepicker-toggle button:focus:after{content:\"\";border:1px solid rgba(112,141,170,.2);background-color:rgba(112,141,170,.2);display:block;top:-4px;left:-4px;right:-4px;bottom:-4px;border-radius:15px;z-index:1;position:absolute}.lux-datepicker-panel .mat-calendar-header button .mat-button-focus-overlay,lux-datepicker mat-datepicker-toggle .mat-button-focus-overlay{display:none}.lux-datepicker-panel .mat-calendar-header button:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}.lux-datepicker-panel .mat-calendar-header button:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}.lux-datepicker-panel .mat-calendar-content td.mat-calendar-body-cell:hover>div{background-color:rgba(0,0,0,.2)!important;border-radius:999px}.lux-datepicker-panel .mat-calendar-content td.mat-calendar-body-cell.mat-calendar-body-active>div{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:999px}lux-table tr:hover>td,lux-table tr:hover>th{border-radius:0;background-color:#cfcfcf!important}lux-table th button.mat-sort-header-button:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}.lux-select-panel mat-option{border-left:0;box-sizing:border-box}.lux-select-panel mat-option.mat-selected{background-color:rgba(112,141,170,.2)!important;position:relative;border-radius:4px}.lux-select-panel mat-option.mat-selected:after{content:'';left:0;width:6px;top:0;bottom:0;position:absolute;border-left:6px solid #0073b3;border-radius:4px 0 0 4px}.lux-select-panel mat-option:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}.lux-select-panel mat-option.mat-active,.lux-select-panel mat-option:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-button button:not([disabled]) .mat-button-focus-overlay{display:none}lux-button button:not([disabled]):not(.mat-fab):not(.mat-raised-button):focus{background-color:rgba(112,141,170,.2)!important}lux-button button:not([disabled]):not(.mat-fab):not(.mat-raised-button):hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-button button:not([disabled]).mat-fab:focus,lux-button button:not([disabled]).mat-raised-button:focus{background-color:rgba(112,141,170,.2)!important}lux-button button:not([disabled]).mat-fab:focus.mat-accent,lux-button button:not([disabled]).mat-raised-button:focus.mat-accent{background-color:#b6d184!important}lux-button button:not([disabled]).mat-fab:focus.mat-warn,lux-button button:not([disabled]).mat-raised-button:focus.mat-warn{background-color:#ea2524!important}lux-button button:not([disabled]).mat-fab:focus.mat-primary,lux-button button:not([disabled]).mat-raised-button:focus.mat-primary{background-color:#4b82ba!important}.lux-autocomplete-panel mat-option{border-left:0;box-sizing:border-box}.lux-autocomplete-panel mat-option:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}.lux-autocomplete-panel mat-option.mat-active,.lux-autocomplete-panel mat-option:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-tabs mat-ink-bar{background-color:#0073b3!important}lux-tabs .mat-tab-label:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}lux-panel mat-expansion-panel-header:hover,lux-stepper mat-step-header:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-panel mat-expansion-panel-header:focus,lux-stepper mat-step-header:focus,lux-stepper mat-step-header[aria-selected=true],lux-tile mat-card:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}lux-master-detail lux-master-header .lux-master-header-collapse button.lux-button:not(.mat-fab):not(.mat-raised-button):focus{background-color:rgba(0,0,0,.2)!important}lux-file-list .lux-file-list{border:4px solid transparent}lux-file-list .lux-file-list:focus{outline-width:0;border:4px solid rgba(112,141,170,.2)!important}lux-file-list .lux-file-list .lux-file-list-entry{border:4px solid transparent}lux-file-list .lux-file-list .lux-file-list-entry:focus{outline-width:0;border:4px solid rgba(112,141,170,.2)!important}lux-file-list .lux-file-list mat-card{margin:4px}.lux-menu-panel .lux-menu-item:not([disabled=true]):focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}.lux-menu-panel .lux-menu-item:not([disabled=true]):hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-dialog-structure lux-dialog-content:focus,lux-dialog-structure lux-dialog-title:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}example-root .example-base-components-list .example-component-list-item,example-root .example-base-components-list mat-expansion-panel-header{box-sizing:border-box}example-root .example-base-components-list .example-component-list-item.example-component-list-item-selected,example-root .example-base-components-list mat-expansion-panel-header.example-component-list-item-selected{background-color:rgba(112,141,170,.2)!important;position:relative;border-radius:4px}example-root .example-base-components-list .example-component-list-item.example-component-list-item-selected:after,example-root .example-base-components-list mat-expansion-panel-header.example-component-list-item-selected:after{content:'';left:0;width:6px;top:0;bottom:0;position:absolute;border-left:6px solid #0073b3;border-radius:4px 0 0 4px}example-root .example-base-components-list .example-component-list-item:focus,example-root .example-base-components-list mat-expansion-panel-header:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}example-root .example-base-components-list .example-component-list-item:hover,example-root .example-base-components-list mat-expansion-panel-header:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}.lux-app-container,body,html{height:100%}.lux-app-container{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex}body{-webkit-overflow-scrolling:touch}div{font-family:Roboto,Helvetica Neue,sans-serif}.cdk-overlay-backdrop.cdk-overlay-backdrop-showing.lux-file-preview-backdrop{background:#000;opacity:.8!important}lux-card.lux-card-grow{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;width:400px;min-width:0}lux-card.lux-card-grow mat-card,lux-card.lux-card-grow mat-card-content{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0}.lux-crop{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.lux-label{color:rgba(0,0,0,.54);font-size:75%}.lux-hint{color:rgba(0,0,0,.6);font-size:12px}.lux-hidden{visibility:hidden}.lux-nowrap{white-space:nowrap}.lux-cursor{cursor:pointer}.lux-block-pointer-events{pointer-events:none}.lux-vertical-align-baseline{vertical-align:baseline!important}.lux-black-semi-transparent{color:rgba(0,0,0,.87)}.lux-semi-transparent{opacity:.6}.lux-overflow-y-hidden{overflow-y:hidden}.lux-overflow-y-auto{overflow-y:auto}.lux-overflow-wrap-break-word{overflow-wrap:break-word}.lux-bold{font-weight:700!important}.lux-uppercase{text-transform:uppercase!important}.lux-lowercase{text-transform:lowercase!important}.lux-hyphenate{overflow-wrap:break-word;word-wrap:break-word;word-break:normal;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow-x:auto}.lux-p-footer,.lux-p-header{padding:8px}.lux-snackbar{top:68px;right:8px;position:absolute;margin:0!important;min-width:unset!important;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-snack-bar-handset .lux-snackbar{left:8px;width:auto!important}.lux-mt-0{margin-top:0}.lux-pt-0{padding-top:0}.lux-mt-1{margin-top:2px}.lux-pt-1{padding-top:2px}.lux-mt-2{margin-top:4px}.lux-pt-2{padding-top:4px}.lux-mt-3{margin-top:8px}.lux-pt-3{padding-top:8px}.lux-mt-4{margin-top:16px}.lux-pt-4{padding-top:16px}.lux-mb-0{margin-bottom:0}.lux-pb-0{padding-bottom:0}.lux-mb-1{margin-bottom:2px}.lux-pb-1{padding-bottom:2px}.lux-mb-2{margin-bottom:4px}.lux-pb-2{padding-bottom:4px}.lux-mb-3{margin-bottom:8px}.lux-pb-3{padding-bottom:8px}.lux-mb-4{margin-bottom:16px}.lux-pb-4{padding-bottom:16px}.lux-ml-0{margin-left:0}.lux-pl-0{padding-left:0}.lux-ml-1{margin-left:2px}.lux-pl-1{padding-left:2px}.lux-ml-2{margin-left:4px}.lux-pl-2{padding-left:4px}.lux-ml-3{margin-left:8px}.lux-pl-3{padding-left:8px}.lux-ml-4{margin-left:16px}.lux-pl-4{padding-left:16px}.lux-m-0{margin:0}.lux-mr-0{margin-right:0}.lux-p-0{padding:0}.lux-pr-0{padding-right:0}.lux-m-1{margin:2px}.lux-mr-1{margin-right:2px}.lux-p-1{padding:2px}.lux-pr-1{padding-right:2px}.lux-m-2{margin:4px}.lux-mr-2{margin-right:4px}.lux-p-2{padding:4px}.lux-pr-2{padding-right:4px}.lux-m-3{margin:8px}.lux-mr-3{margin-right:8px}.lux-p-3{padding:8px}.lux-pr-3{padding-right:8px}.lux-m-4{margin:16px}.lux-mr-4{margin-right:16px}.lux-p-4{padding:16px}.lux-pr-4{padding-right:16px}.lux-flex-layout-gap-10[style*=row]>:not(:last-child){margin-right:10px}.lux-flex-layout-gap-10[style*=column]>:not(:last-child){margin-bottom:10px}.lux-flex-layout-gap-20[style*=row]>:not(:last-child){margin-right:20px}.lux-flex-layout-gap-20[style*=column]>:not(:last-child){margin-bottom:20px}.lux-flex-layout-gap-30[style*=row]>:not(:last-child){margin-right:30px}.lux-flex-layout-gap-30[style*=column]>:not(:last-child){margin-bottom:30px}.lux-z-index-100{z-index:100}.lux-z-index-500{z-index:500}.lux-z-index-1000{z-index:1000}.lux-uppercase>lux-button .lux-button-label,lux-button.lux-uppercase .lux-button-label{text-transform:uppercase}.lux-bg-color-red{background:#b01211}.lux-bg-color-green{background:#95bc4c}.lux-bg-color-yellow{background:#ebc000}.lux-bg-color-blue{background:#335c85}.lux-bg-color-gray{background:#c8c8c8}.lux-bg-color-orange{background:#ec9c1b}.lux-bg-color-brown{background:#783f04}.lux-font-color-black{color:#000}.lux-font-color-white{color:#fff}.lux-badge-notification.mat-badge-large .mat-badge-content{font-size:15px}.lux-badge-notification.lux-badge-color-default .mat-badge-content{color:#000;background:#fff;border:1px solid rgba(0,0,0,.87)}:focus{outline:0}.lux-master-detail{max-width:100%;z-index:10}.lux-master-container{border-right:1px solid #d3d3d3;border-left:1px solid #d3d3d3;border-bottom:1px solid #d3d3d3;min-width:50px;position:relative}.lux-master-container .lux-not-open{padding:12px 0}.lux-master-container:not(.lux-master-container-mobile).lux-empty-elements-aligned lux-list{position:static!important}.lux-spinner-hidden{display:none!important}:host ::ng-deep lux-master-header-content div,:host ::ng-deep lux-master-header-content span{color:#e7ebf0}lux-list-item{margin-bottom:1px}lux-list-item ::ng-deep lux-card{border-bottom:1px solid rgba(0,0,0,.08);border-right:1px solid rgba(0,0,0,.08)}lux-list-item ::ng-deep lux-card mat-card{box-shadow:unset!important}lux-list-item ::ng-deep lux-card mat-card:hover{background:rgba(0,0,0,.2)}lux-list-item,lux-list-item-content{display:block}.lux-display-none{display:none!important}.lux-0-width{width:0;min-width:0}.lux-detail-container{position:relative}.lux-detail-container .lux-detail-empty{position:absolute;top:0;left:0;right:0;bottom:0}.lux-detail-container .lux-detail-empty-icon,.lux-detail-container .lux-detail-empty-icon-text{opacity:.6;color:rgba(0,0,0,.87);padding:0 8px}"]
        }),
        tslib_1.__metadata("design:paramtypes", [LuxMasterDetailMobileHelperService,
            ChangeDetectorRef,
            ComponentFactoryResolver,
            LiveAnnouncer])
    ], LuxMasterDetailComponent);
    return LuxMasterDetailComponent;
}());
export { LuxMasterDetailComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibHV4LW1hc3Rlci1kZXRhaWwuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGloay1nZmkvbHV4LWNvbXBvbmVudHMvIiwic291cmNlcyI6WyJzcmMvYXBwL21vZHVsZXMvbHV4LWxheW91dC9sdXgtbWFzdGVyLWRldGFpbC9sdXgtbWFzdGVyLWRldGFpbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQUUsT0FBTyxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDakYsT0FBTyxFQUNMLGFBQWEsRUFDYixpQkFBaUIsRUFDakIsU0FBUyxFQUNULHdCQUF3QixFQUN4QixZQUFZLEVBQ1osT0FBTyxFQUNQLFVBQVUsRUFDVixZQUFZLEVBQ1osV0FBVyxFQUNYLEtBQUssRUFDTCxTQUFTLEVBQ1QsTUFBTSxFQUNOLE1BQU0sRUFDTixTQUFTLEVBQ1QsU0FBUyxFQUNULFlBQVksRUFDWixnQkFBZ0IsRUFDakIsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sNERBQTRELENBQUM7QUFDbEcsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFDbEUsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFDbEUsT0FBTyxFQUFFLGtDQUFrQyxFQUFFLE1BQU0sMkNBQTJDLENBQUM7QUFDL0YsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sNkVBQTZFLENBQUM7QUFDckgsT0FBTyxFQUFFLHdCQUF3QixFQUFFLE1BQU0saUZBQWlGLENBQUM7QUFDM0gsT0FBTyxFQUFFLHdCQUF3QixFQUFFLE1BQU0saUZBQWlGLENBQUM7QUFDM0gsT0FBTyxFQUFFLHdCQUF3QixFQUFFLE1BQU0saUZBQWlGLENBQUM7QUFDM0gsT0FBTyxFQUFFLGVBQWUsRUFBRSxhQUFhLEVBQWdC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QyxVQUFVLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztpQkFDcEMsQ0FBQzthQUNIOztTQUNGLENBQUM7aURBNEY4QixrQ0FBa0M7WUFDakQsaUJBQWlCO1lBQ2pCLHdCQUF3QjtZQUNkLGFBQWE7T0E5RjNCLHdCQUF3QixDQWlYcEM7SUFBRCwrQkFBQztDQUFBLEFBalhELElBaVhDO1NBalhZLHdCQUF3QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFuaW1hdGUsIHN0YXRlLCBzdHlsZSwgdHJhbnNpdGlvbiwgdHJpZ2dlciB9IGZyb20gJ0Bhbmd1bGFyL2FuaW1hdGlvbnMnO1xuaW1wb3J0IHtcbiAgQWZ0ZXJWaWV3SW5pdCxcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gIENvbXBvbmVudCxcbiAgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLFxuICBDb250ZW50Q2hpbGQsXG4gIERvQ2hlY2ssXG4gIEVsZW1lbnRSZWYsXG4gIEV2ZW50RW1pdHRlcixcbiAgSG9zdEJpbmRpbmcsXG4gIElucHV0LFxuICBPbkRlc3Ryb3ksXG4gIE9uSW5pdCxcbiAgT3V0cHV0LFxuICBRdWVyeUxpc3QsXG4gIFZpZXdDaGlsZCxcbiAgVmlld0NoaWxkcmVuLFxuICBWaWV3Q29udGFpbmVyUmVmXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTHV4TGlzdEl0ZW1Db21wb25lbnQgfSBmcm9tICcuLi9sdXgtbGlzdC9sdXgtbGlzdC1zdWJjb21wb25lbnRzL2x1eC1saXN0LWl0ZW0uY29tcG9uZW50JztcbmltcG9ydCB7IEx1eExpc3RDb21wb25lbnQgfSBmcm9tICcuLi9sdXgtbGlzdC9sdXgtbGlzdC5jb21wb25lbnQnO1xuaW1wb3J0IHsgTHV4VGFic0NvbXBvbmVudCB9IGZyb20gJy4uL2x1eC10YWJzL2x1eC10YWJzLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBMdXhNYXN0ZXJEZXRhaWxNb2JpbGVIZWxwZXJTZXJ2aWNlIH0gZnJvbSAnLi9sdXgtbWFzdGVyLWRldGFpbC1tb2JpbGUtaGVscGVyLnNlcnZpY2UnO1xuaW1wb3J0IHsgTHV4RGV0YWlsVmlld0NvbXBvbmVudCB9IGZyb20gJy4vbHV4LW1hc3Rlci1kZXRhaWwtc3ViY29tcG9uZW50cy9sdXgtZGV0YWlsLXZpZXcvbHV4LWRldGFpbC12aWV3LmNvbXBvbmVudCc7XG5pbXBvcnQgeyBMdXhNYXN0ZXJGb290ZXJDb21wb25lbnQgfSBmcm9tICcuL2x1eC1tYXN0ZXItZGV0YWlsLXN1YmNvbXBvbmVudHMvbHV4LW1hc3Rlci1mb290ZXIvbHV4LW1hc3Rlci1mb290ZXIuY29tcG9uZW50JztcbmltcG9ydCB7IEx1eE1hc3RlckhlYWRlckNvbXBvbmVudCB9IGZyb20gJy4vbHV4LW1hc3Rlci1kZXRhaWwtc3ViY29tcG9uZW50cy9sdXgtbWFzdGVyLWhlYWRlci9sdXgtbWFzdGVyLWhlYWRlci5jb21wb25lbnQnO1xuaW1wb3J0IHsgTHV4TWFzdGVyU2ltcGxlQ29tcG9uZW50IH0gZnJvbSAnLi9sdXgtbWFzdGVyLWRldGFpbC1zdWJjb21wb25lbnRzL2x1eC1tYXN0ZXItc2ltcGxlL2x1eC1tYXN0ZXItc2ltcGxlLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBCZWhhdmlvclN1YmplY3QsIFJlcGxheVN1YmplY3QsIFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgZGVsYXksIHRhcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IEx1eERldGFpbFdyYXBwZXJDb21wb25lbnQgfSBmcm9tICcuL2x1eC1tYXN0ZXItZGV0YWlsLXN1YmNvbXBvbmVudHMvbHV4LWRldGFpbC12aWV3L2x1eC1kZXRhaWwtd3JhcHBlci5jb21wb25lbnQnO1xuaW1wb3J0IHsgTGl2ZUFubm91bmNlciB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9hMTF5JztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbHV4LW1hc3Rlci1kZXRhaWwnLFxuICB0ZW1wbGF0ZVVybDogJy4vbHV4LW1hc3Rlci1kZXRhaWwuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9sdXgtbWFzdGVyLWRldGFpbC5jb21wb25lbnQuc2NzcyddLFxuICBhbmltYXRpb25zOiBbXG4gICAgdHJpZ2dlcignbWFzdGVySXNMb2FkaW5nQ2hhbmdlZCcsIFtcbiAgICAgIHN0YXRlKCd0cnVlJywgc3R5bGUoeyBvcGFjaXR5OiAxIH0pKSxcbiAgICAgIHN0YXRlKCdmYWxzZScsIHN0eWxlKHsgb3BhY2l0eTogMCB9KSksXG4gICAgICB0cmFuc2l0aW9uKCcxID0+IDAnLCBhbmltYXRlKCcwLjVzJykpLFxuICAgICAgdHJhbnNpdGlvbignMCA9PiAxJywgYW5pbWF0ZSgnMXMnKSlcbiAgICBdKVxuICBdXG59KVxuZXhwb3J0IGNsYXNzIEx1eE1hc3RlckRldGFpbENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCwgRG9DaGVjaywgT25EZXN0cm95IHtcbiAgQE91dHB1dCgpIGx1eFNlbGVjdGVkRGV0YWlsQ2hhbmdlOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgQE91dHB1dCgpIGx1eFNjcm9sbGVkOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICBAQ29udGVudENoaWxkKEx1eE1hc3RlclNpbXBsZUNvbXBvbmVudCwgeyBzdGF0aWM6IGZhbHNlIH0pIG1hc3RlclNpbXBsZTtcbiAgQENvbnRlbnRDaGlsZChMdXhEZXRhaWxWaWV3Q29tcG9uZW50LCB7IHN0YXRpYzogZmFsc2UgfSkgZGV0YWlsVmlldztcbiAgQENvbnRlbnRDaGlsZChMdXhNYXN0ZXJGb290ZXJDb21wb25lbnQsIHsgc3RhdGljOiBmYWxzZSwgcmVhZDogRWxlbWVudFJlZiB9KSBtYXN0ZXJGb290ZXI6IEVsZW1lbnRSZWY7XG5cbiAgQFZpZXdDaGlsZHJlbihMdXhMaXN0Q29tcG9uZW50LCB7IHJlYWQ6IEVsZW1lbnRSZWYgfSkgbHV4TWFzdGVyUXVlcnlMaXN0OiBRdWVyeUxpc3Q8RWxlbWVudFJlZj47XG4gIEBWaWV3Q2hpbGRyZW4oTHV4TGlzdEl0ZW1Db21wb25lbnQpIGx1eE1hc3Rlckxpc3RJdGVtUXVlcnlMaXN0OiBRdWVyeUxpc3Q8THV4TGlzdEl0ZW1Db21wb25lbnQ+O1xuICBAVmlld0NoaWxkKEx1eE1hc3RlckhlYWRlckNvbXBvbmVudCwgeyByZWFkOiBFbGVtZW50UmVmLCBzdGF0aWM6IHRydWUgfSkgbWFzdGVySGVhZGVyOiBFbGVtZW50UmVmO1xuICBAVmlld0NoaWxkKEx1eExpc3RJdGVtQ29tcG9uZW50LCB7IHJlYWQ6IEVsZW1lbnRSZWYsIHN0YXRpYzogZmFsc2UgfSkgbHV4TWFzdGVyRW50cnlFbGVtZW50UmVmOiBFbGVtZW50UmVmO1xuICBAQ29udGVudENoaWxkKEx1eFRhYnNDb21wb25lbnQsIHsgc3RhdGljOiBmYWxzZSB9KSB0YWJzQ29tcG9uZW50OiBMdXhUYWJzQ29tcG9uZW50O1xuICBAVmlld0NoaWxkKCdtYXN0ZXJTcGlubmVyQ2FyZCcsIHsgcmVhZDogRWxlbWVudFJlZiwgc3RhdGljOiB0cnVlIH0pIG1hc3RlclNwaW5uZXJDYXJkOiBFbGVtZW50UmVmO1xuICBAVmlld0NoaWxkKCdkZXRhaWxDb250YWluZXInLCB7IHJlYWQ6IEVsZW1lbnRSZWYsIHN0YXRpYzogZmFsc2UgfSkgZGV0YWlsRnJhbWU6IEVsZW1lbnRSZWY7XG4gIEBWaWV3Q2hpbGQoJ2RldGFpbEVtcHR5JywgeyByZWFkOiBFbGVtZW50UmVmLCBzdGF0aWM6IHRydWUgfSkgZGV0YWlsRW1wdHk6IEVsZW1lbnRSZWY7XG4gIEBWaWV3Q2hpbGQoJ2RldGFpbFZpZXdDb250YWluZXJSZWYnLCB7IHJlYWQ6IFZpZXdDb250YWluZXJSZWYsIHN0YXRpYzogdHJ1ZSB9KVxuICBkZXRhaWxWaWV3Q29udGFpbmVyUmVmOiBWaWV3Q29udGFpbmVyUmVmO1xuICBAVmlld0NoaWxkKCdtYXN0ZXJDb250YWluZXInLCB7IHJlYWQ6IEVsZW1lbnRSZWYsIHN0YXRpYzogdHJ1ZSB9KSBtYXN0ZXJDb250YWluZXI6IEVsZW1lbnRSZWY7XG5cbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5sdXgtb3ZlcmZsb3cteS1hdXRvJykgb3ZlcmZsb3dZOiBib29sZWFuID0gdHJ1ZTtcblxuICBwcml2YXRlIF9sdXhNYXN0ZXJMaXN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxBcnJheTxhbnk+PihbXSk7XG4gIHByaXZhdGUgX2x1eE9wZW46IGJvb2xlYW4gPSB0cnVlO1xuICBwcml2YXRlIF9sdXhTZWxlY3RlZERldGFpbDogYW55O1xuXG4gIHByaXZhdGUgbWFzdGVyTGlzdExlbmd0aDtcbiAgcHJpdmF0ZSBtYXhJdGVtc1Zpc2libGU7XG4gIHByaXZhdGUgdXBkYXRlRGV0YWlsJDogUmVwbGF5U3ViamVjdDxhbnk+ID0gbmV3IFJlcGxheVN1YmplY3QoMSk7XG4gIHByaXZhdGUgdXBkYXRlRGV0YWlsU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XG5cbiAgZGV0YWlsQ29udGV4dCA9IHsgJGltcGxpY2l0OiB7fSB9O1xuICBmbGV4TWFzdGVyOiBzdHJpbmc7XG4gIGZsZXhEZXRhaWw6IHN0cmluZztcblxuICAvLyBFbnRow6RsdCBkaWUgUG9zaXRpb24gZGVzIGFrdHVlbGwgc2VsZWt0aWVydGVuIEVsZW1lbnRzXG4gIHNlbGVjdGVkUG9zaXRpb246IG51bWJlcjtcblxuICAvLyBGbGFnIHdlbGNoZXMgYmVzdGltbXQgb2IgZGllIEVtcHR5LUFuemVpZ2VuIGRlciBNYXN0ZXJsaXN0ZSBhbmhhbmQgZGVyIERldGFpbC1BbnNpY2h0IGF1c2dlcmljaHRldCB3ZXJkZW5cbiAgYWxpZ25FbXB0eUluZGljYXRvcnM6IGJvb2xlYW4gPSB0cnVlO1xuXG4gIEBJbnB1dCgpIGx1eEVtcHR5SWNvbk1hc3Rlcjogc3RyaW5nID0gJ2ZhcyBmYS1pbmZvLWNpcmNsZSc7XG4gIEBJbnB1dCgpIGx1eEVtcHR5TGFiZWxNYXN0ZXI6IHN0cmluZyA9ICdLZWluZSBFaW50csOkZ2Ugdm9yaGFuZGVuJztcbiAgQElucHV0KCkgbHV4RW1wdHlJY29uRGV0YWlsOiBzdHJpbmcgPSAnZmFzIGZhLWluZm8tY2lyY2xlJztcbiAgQElucHV0KCkgbHV4RW1wdHlMYWJlbERldGFpbDogc3RyaW5nID0gJ0tlaW4gRWxlbWVudCBhdXNnZXfDpGhsdCc7XG4gIEBJbnB1dCgpIGx1eEVtcHR5SWNvbk1hc3RlclNpemUgPSAnNXgnO1xuICBASW5wdXQoKSBsdXhFbXB0eUljb25EZXRhaWxTaXplID0gJzV4JztcbiAgQElucHV0KCkgbHV4TWFzdGVyU3Bpbm5lckRlbGF5OiBudW1iZXIgPSAxMDAwO1xuICBASW5wdXQoKSBsdXhUYWdJZE1hc3Rlcjogc3RyaW5nO1xuICBASW5wdXQoKSBsdXhUYWdJZERldGFpbDogc3RyaW5nO1xuICBASW5wdXQoKSBsdXhUaXRsZUxpbmVCcmVhazogYm9vbGVhbiA9IGZhbHNlO1xuICBASW5wdXQoKSBsdXhNYXN0ZXJJc0xvYWRpbmc6IGJvb2xlYW4gPSBmYWxzZTtcbiAgQElucHV0KCkgbHV4Q29tcGFyZVdpdGggPSAobzEsIG8yKSA9PiBvMSA9PT0gbzI7XG5cbiAgZ2V0IGx1eE9wZW4oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2x1eE9wZW47XG4gIH1cblxuICBASW5wdXQoKSBzZXQgbHV4T3BlbihvcGVuOiBib29sZWFuKSB7XG4gICAgaWYgKG9wZW4pIHtcbiAgICAgIHRoaXMubW9iaWxlSGVscGVyU2VydmljZS5vcGVuTWFzdGVyKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubW9iaWxlSGVscGVyU2VydmljZS5jbG9zZU1hc3RlcigpO1xuICAgIH1cbiAgfVxuXG4gIC8qIFNlbGVjdGVkIERldGFpbCBHZXQvU2V0ICovXG4gIGdldCBsdXhTZWxlY3RlZERldGFpbCgpIHtcbiAgICByZXR1cm4gdGhpcy5fbHV4U2VsZWN0ZWREZXRhaWw7XG4gIH1cblxuICBASW5wdXQoKVxuICBzZXQgbHV4U2VsZWN0ZWREZXRhaWwodmFsdWUpIHtcbiAgICB0aGlzLnVwZGF0ZURldGFpbCQubmV4dCh2YWx1ZSk7XG4gIH1cblxuICAvKiBNYXN0ZXIgTGlzdCBHZXQvU2V0ICovXG4gIGdldCBsdXhNYXN0ZXJMaXN0KCkge1xuICAgIHJldHVybiB0aGlzLl9sdXhNYXN0ZXJMaXN0LmdldFZhbHVlKCk7XG4gIH1cblxuICBASW5wdXQoKVxuICBzZXQgbHV4TWFzdGVyTGlzdCh2YWx1ZTogYW55W10pIHtcbiAgICBpZiAodGhpcy5tYXN0ZXJMaXN0TGVuZ3RoICYmIHZhbHVlICYmIHRoaXMubWFzdGVyTGlzdExlbmd0aCA8IHZhbHVlLmxlbmd0aCkge1xuICAgICAgdGhpcy5hbm5vdW5jZVBvc3NpYmxlSW5maW5pdGVTY3JvbGxpbmcoKTtcbiAgICB9XG4gICAgdGhpcy5fbHV4TWFzdGVyTGlzdC5uZXh0KHZhbHVlKTtcbiAgICB0aGlzLm1hc3Rlckxpc3RMZW5ndGggPSB2YWx1ZSA/IHZhbHVlLmxlbmd0aCA6IDA7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgbW9iaWxlSGVscGVyU2VydmljZTogTHV4TWFzdGVyRGV0YWlsTW9iaWxlSGVscGVyU2VydmljZSxcbiAgICBwcml2YXRlIGNkcjogQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgcHJpdmF0ZSBjZnI6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcbiAgICBwcml2YXRlIGxpdmVBbm5vdW5jZXI6IExpdmVBbm5vdW5jZXJcbiAgKSB7XG4gICAgdGhpcy5tb2JpbGVIZWxwZXJTZXJ2aWNlLnJlZ2lzdGVyKCk7XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLmhhbmRsZU1hc3Rlckxpc3RVcGRhdGUoKTtcbiAgICB0aGlzLmhhbmRsZVZpZXdDb2xsYXBzZSgpO1xuICAgIHRoaXMubW9iaWxlSGVscGVyU2VydmljZS5vcGVuTWFzdGVyKCk7XG4gIH1cblxuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgdGhpcy5oYW5kbGVEZXRhaWxVcGRhdGUoKTtcbiAgICB0aGlzLmhhbmRsZU1hc3RlclF1ZXJ5TGlzdCgpO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgdGhpcy5tb2JpbGVIZWxwZXJTZXJ2aWNlLnVucmVnaXN0ZXIoKTtcbiAgICB0aGlzLnVwZGF0ZURldGFpbFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICB9XG5cbiAgbmdEb0NoZWNrKCkge1xuICAgIC8vIFd1cmRlIGVpbiBFbGVtZW50IGluIGRpZSBNYXN0ZXJsaXN0ZSBnZXB1c2h0IG9kZXIgZW50ZmVybnQ/XG4gICAgaWYgKHRoaXMubHV4TWFzdGVyTGlzdCAmJiB0aGlzLmx1eE1hc3Rlckxpc3QubGVuZ3RoICE9PSB0aGlzLm1hc3Rlckxpc3RMZW5ndGgpIHtcbiAgICAgIGlmICh0aGlzLmx1eE1hc3Rlckxpc3QubGVuZ3RoID4gdGhpcy5tYXN0ZXJMaXN0TGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuYW5ub3VuY2VQb3NzaWJsZUluZmluaXRlU2Nyb2xsaW5nKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFdlbm4gamEsIGRhcyBzZWxla3RpZXJ0ZSBEZXRhaWwgbmV1cmVuZGVyblxuICAgICAgdGhpcy5tYXN0ZXJMaXN0TGVuZ3RoID0gdGhpcy5sdXhNYXN0ZXJMaXN0Lmxlbmd0aDtcbiAgICAgIHRoaXMubHV4U2VsZWN0ZWREZXRhaWwgPSB0aGlzLmx1eE1hc3Rlckxpc3RbdGhpcy5zZWxlY3RlZFBvc2l0aW9uXTtcblxuICAgICAgdGhpcy5hbm5vdW5jZVBvc3NpYmxlSW5maW5pdGVTY3JvbGxpbmcoKTtcbiAgICB9XG5cbiAgICAvLyBBdXNyaWNodHVuZyBkZXIgRW1wdHktSW5kaWthdG9yZW4gZGVyIE1hc3Rlcmxpc3RlIHByw7xmZW5cbiAgICBpZiAoIXRoaXMubW9iaWxlSGVscGVyU2VydmljZS5pc01vYmlsZSgpICYmICghdGhpcy5sdXhNYXN0ZXJMaXN0IHx8IHRoaXMubHV4TWFzdGVyTGlzdC5sZW5ndGggPT09IDApKSB7XG4gICAgICB0aGlzLmNoZWNrRW1wdHlJbmRpY2F0b3JBbGlnbm1lbnQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogV2VubiBpbiBkZXIgTHV4TGlzdCBlaW4gbmV1ZXIgU2VsZWN0ZWQtV2VydCBnZXB1c2h0IHdpcmQsIGRpZXNlbiBhYmZhbmdlbiB1bmRcbiAgICogZWluIG5ldWVzIERldGFpbCBhdXN3w6RobGVuLlxuICAgKiBAcGFyYW0gJGV2ZW50XG4gICAqL1xuICBvblNlbGVjdGVkQ2hhbmdlKCRldmVudDogbnVtYmVyKSB7XG4gICAgaWYgKCRldmVudCA+IC0xKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkUG9zaXRpb24gPSAkZXZlbnQ7XG5cbiAgICAgIHRoaXMudXBkYXRlRGV0YWlsJC5uZXh0KHRoaXMubHV4TWFzdGVyTGlzdFskZXZlbnRdKTtcblxuICAgICAgaWYgKHRoaXMubW9iaWxlSGVscGVyU2VydmljZS5pc01vYmlsZSgpKSB7XG4gICAgICAgIHRoaXMubW9iaWxlSGVscGVyU2VydmljZS5jbG9zZU1hc3RlcigpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBCZXN0aW1tdCBvYiBkaWUgTWFzdGVybGlzdGUgYXVmLSBvZGVyIGVpbmdla2xhcHB0IGlzdC5cbiAgICogQHBhcmFtIG9wZW5cbiAgICovXG4gIHRvZ2dsZUxpc3Qob3BlbjogYm9vbGVhbikge1xuICAgIGlmIChvcGVuKSB7XG4gICAgICB0aGlzLm1vYmlsZUhlbHBlclNlcnZpY2Uub3Blbk1hc3RlcigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1vYmlsZUhlbHBlclNlcnZpY2UuY2xvc2VNYXN0ZXIoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy50YWJzQ29tcG9uZW50KSB7XG4gICAgICB0aGlzLnRhYnNDb21wb25lbnQucmVyZW5kZXJUYWJzKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFBydWVmdCBvYiBkaWUgRGV0YWlsYW5zaWNodCBnZXJhZGUgZnVlciBkZW4gVXNlciBzaWNodGJhciBpc3QuXG4gICAqIEByZXR1cm5zIGJvb2xlYW5cbiAgICovXG4gIGlzRGV0YWlsSW52aXNpYmxlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLm1vYmlsZUhlbHBlclNlcnZpY2UuaXNNb2JpbGUoKSAmJiB0aGlzLmx1eE9wZW47XG4gIH1cblxuICBvbkluZmluaXRlU2Nyb2xsaW5nTG9hZCgkZXZlbnQpIHtcbiAgICB0aGlzLmx1eFNjcm9sbGVkLmVtaXQoJGV2ZW50KTtcbiAgfVxuXG4gIG9uU3dpcGVMZWZ0KCkge1xuICAgIGlmICh0aGlzLm1vYmlsZUhlbHBlclNlcnZpY2UuaXNNb2JpbGUoKSkge1xuICAgICAgdGhpcy5tb2JpbGVIZWxwZXJTZXJ2aWNlLmNsb3NlTWFzdGVyKCk7XG4gICAgfVxuICB9XG5cbiAgb25Td2lwZVJpZ2h0KCkge1xuICAgIGlmICh0aGlzLm1vYmlsZUhlbHBlclNlcnZpY2UuaXNNb2JpbGUoKSkge1xuICAgICAgdGhpcy5tb2JpbGVIZWxwZXJTZXJ2aWNlLm9wZW5NYXN0ZXIoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogS2Fwc2VsdW5nIHZvbiBkZXIgw7xiZXJnZWJlbmVuIGx1eENvbXBhcmVXaXRoLUZ1bmt0aW9uLlxuICAgKiBGw6RuZ3QgdW5kZWZpbmllcnRlIE9iamVrdGUgYWIgdW5kIHJldHVybmVkIHN0YXR0ZGVzc2VuIGZhbHNlLlxuICAgKiBAcGFyYW0gbzFcbiAgICogQHBhcmFtIG8yXG4gICAqL1xuICBjb21wYXJlT2JqZWN0cyhvMSwgbzIpIHtcbiAgICBpZiAoIW8xIHx8ICFvMikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5sdXhDb21wYXJlV2l0aChvMSwgbzIpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0ZXVlcnQgZGFzIEJyZWl0ZW52ZXJoYWVsdG5pcyB2b24gTWFzdGVyIHVuZCBEZXRhaWwgamUgbmFjaGRlbVxuICAgKiBvYiBkZXIgTWFzdGVyIGF1Zi0gb2RlciBlaW5nZWtsYXBwdCBpc3QgdW5kIG9iIGVpbmUgTW9iaWxhbnNpY2h0IGFrdGl2IGlzdC5cbiAgICovXG4gIHByaXZhdGUgdXBkYXRlT3BlbigpIHtcbiAgICBpZiAodGhpcy5sdXhPcGVuKSB7XG4gICAgICBpZiAodGhpcy5tb2JpbGVIZWxwZXJTZXJ2aWNlLmlzTW9iaWxlKCkpIHtcbiAgICAgICAgdGhpcy5mbGV4TWFzdGVyID0gJzEwMCc7XG4gICAgICAgIHRoaXMuZmxleERldGFpbCA9ICcwJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZmxleE1hc3RlciA9ICczMCc7XG4gICAgICAgIHRoaXMuZmxleERldGFpbCA9ICc3MCc7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLm1vYmlsZUhlbHBlclNlcnZpY2UuaXNNb2JpbGUoKSkge1xuICAgICAgICB0aGlzLmZsZXhNYXN0ZXIgPSAnMCc7XG4gICAgICAgIHRoaXMuZmxleERldGFpbCA9ICcxMDAnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5mbGV4TWFzdGVyID0gJzUnO1xuICAgICAgICB0aGlzLmZsZXhEZXRhaWwgPSAnOTUnO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBLw7xtbWVydCBzaWNoIHVtIMOEbmRlcnVuZ2VuIGFuIGRlciBIVE1MLU5vZGUgZGVyIE1hc3Rlci1MaXN0ZS5cbiAgICogUsO8Y2t0IGRhYmVpIGRhcyBzZWxla3RpZXJ0ZSBFbGVtZW50IGluIGRlbiBGb2t1cyB1bmQgYmVyZWNobmV0IHdpZSB2aWVsZSBFbGVtZW50ZVxuICAgKiBnZXJhZGUgaW4gZGVyIExpc3RlIHNpY2h0YmFyIHNlaW4ga8O2bm5lbiAoZsO8ciBkYXMgRHVyY2hzY2hhbHRlbiBtaXQgUGZlaWx0YXN0ZW4gYmVuw7Z0aWd0KS5cbiAgICovXG4gIHByaXZhdGUgaGFuZGxlTWFzdGVyUXVlcnlMaXN0KCkge1xuICAgIHRoaXMubHV4TWFzdGVyUXVlcnlMaXN0LmNoYW5nZXMuc3Vic2NyaWJlKChtYXN0ZXJMaXN0RWxlbWVudHM6IFF1ZXJ5TGlzdDxFbGVtZW50UmVmPikgPT4ge1xuICAgICAgaWYgKG1hc3Rlckxpc3RFbGVtZW50cy5maXJzdCkge1xuICAgICAgICBjb25zdCB7IG5hdGl2ZUVsZW1lbnQgfSA9IG1hc3Rlckxpc3RFbGVtZW50cy5maXJzdDtcbiAgICAgICAgdGhpcy5tYXhJdGVtc1Zpc2libGUgPSBNYXRoLmZsb29yKG5hdGl2ZUVsZW1lbnQub2Zmc2V0SGVpZ2h0IC8gbmF0aXZlRWxlbWVudC5vZmZzZXRIZWlnaHQpO1xuICAgICAgfVxuICAgICAgLy8gRGVyIEFic2Nobml0dCBoaWVyIGbDpG5ndCBkZW4gRmFsbCBhYiwgZGFzcyB6LkIuIGRhcyBMdXhNYXN0ZXJMaXN0LUFycmF5IHNlbGJzdCBhbmdlcGFzc3Qgd2lyZCAoei5CLiBkdXJjaCBBcnJheS5yZXZlcnNlKVxuICAgICAgLy8gRGFzIHNvcmd0IGRhZsO8ciwgZGFzcyBkYXMgdmlzdWVsbCBzZWxla3RpZXJ0ZSBFbGVtZW50IGF1Y2ggZGFzIHBhc3NlbmRlIHp1ciBEZXRhaWwtVmlldyBpc3QuXG4gICAgICBjb25zdCBuZXdTZWxlY3RlZFBvc2l0aW9uOiBudW1iZXIgPSB0aGlzLmx1eE1hc3Rlckxpc3QuaW5kZXhPZih0aGlzLmx1eFNlbGVjdGVkRGV0YWlsKTtcbiAgICAgIGlmIChuZXdTZWxlY3RlZFBvc2l0aW9uICE9PSB0aGlzLnNlbGVjdGVkUG9zaXRpb24pIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFBvc2l0aW9uID0gbmV3U2VsZWN0ZWRQb3NpdGlvbjtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogS8O8bW1lcnQgc2ljaCB1bSBkaWUgS29sbGFiaWVydW5nIGRlciBNYXN0ZXItTGlzdGUsIHdlbm4gendpc2NoZW4gTW9iaWwtIHVuZCBEZXNrdG9wYW5zaWNodCBnZXdlY2hzZWx0IHdpcmQuXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZVZpZXdDb2xsYXBzZSgpIHtcbiAgICB0aGlzLm1vYmlsZUhlbHBlclNlcnZpY2UubWFzdGVyQ29sbGFwc2VkT2JzZXJ2YWJsZS5zdWJzY3JpYmUoKG9wZW46IGJvb2xlYW4pID0+IHtcbiAgICAgIC8vIEZhbGxzIG5pY2h0cyBzZWxla3RpZXJ0IGlzdCwgc29sbHRlIGRpZSBEYXJzdGVsbHVuZyBiZWltIFdlY2hzZWwgaW4ga2xlaW5lIE1lZGlhIFF1ZXJpZXMgZGllIE1hc3Rlcmxpc3RlIHplaWdlblxuICAgICAgaWYgKHRoaXMubW9iaWxlSGVscGVyU2VydmljZS5pc01vYmlsZSgpICYmICF0aGlzLmx1eFNlbGVjdGVkRGV0YWlsICYmICFvcGVuKSB7XG4gICAgICAgIG9wZW4gPSB0cnVlO1xuICAgICAgfVxuICAgICAgdGhpcy5fbHV4T3BlbiA9IG9wZW47XG4gICAgICB0aGlzLnVwZGF0ZU9wZW4oKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBLw7xtbWVydCBzaWNoIHVtIMOEbmRlcnVuZ2VuIGFuIGRlbSBzZWxla3RpZXJ0ZW4gRGV0YWlsLlxuICAgKiBEYWJlaSB3ZXJkZW4gbWVocmVyZSBadXdlaXN1bmdlbiBhbiBkYXMgRGV0YWlsIMO8YmVyIHRocm90dGxlVGltZSBnZWLDvG5kZWx0IHVuZCBudXIgZGFzIEFrdHVlbGxzdGUgZ2Vub21tZW4uXG4gICAqIEFuc2NobGllw59lbmQgd2lyZCBkaWUgS29tcG9uZW50ZSBhbmdld2llc2VuIGRhcyBuZXVlIERldGFpbC1PYmpla3QgenUgcmVuZGVybi5cbiAgICovXG4gIHByaXZhdGUgaGFuZGxlRGV0YWlsVXBkYXRlKCkge1xuICAgIHRoaXMudXBkYXRlRGV0YWlsU3Vic2NyaXB0aW9uID0gdGhpcy51cGRhdGVEZXRhaWwkLmFzT2JzZXJ2YWJsZSgpLnN1YnNjcmliZSgoZGV0YWlsOiBhbnkpID0+IHtcbiAgICAgIGlmICghZGV0YWlsKSB7XG4gICAgICAgIHRoaXMuZGV0YWlsVmlld0NvbnRhaW5lclJlZi5jbGVhcigpO1xuICAgICAgICB0aGlzLnNldE5ld0RldGFpbChkZXRhaWwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbXBhcmVPYmplY3RzKHRoaXMubHV4U2VsZWN0ZWREZXRhaWwsIGRldGFpbCkpIHtcbiAgICAgICAgICB0aGlzLmRldGFpbFZpZXdDb250YWluZXJSZWYuY2xlYXIoKTtcblxuICAgICAgICAgIGlmIChkZXRhaWwpIHtcbiAgICAgICAgICAgIHRoaXMuZGV0YWlsQ29udGV4dCA9IHsgJGltcGxpY2l0OiBkZXRhaWwgfTtcblxuICAgICAgICAgICAgLy8gRGVuIERldGFpbC1XcmFwcGVyIGVyemV1Z2VuIHVuZCBhYmZhbmdlbiwgd2FubiBkaWUgTm9kZXMgZ2VsYWRlbiB3b3JkZW4gc2luZFxuICAgICAgICAgICAgY29uc3QgY2hpbGQgPSB0aGlzLmNmci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShMdXhEZXRhaWxXcmFwcGVyQ29tcG9uZW50KTtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkUmVmID0gdGhpcy5kZXRhaWxWaWV3Q29udGFpbmVyUmVmLmNyZWF0ZUNvbXBvbmVudChjaGlsZCk7XG4gICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IGNoaWxkUmVmLmluc3RhbmNlO1xuICAgICAgICAgICAgaW5zdGFuY2UubHV4RGV0YWlsQ29udGV4dCA9IHRoaXMuZGV0YWlsQ29udGV4dDtcbiAgICAgICAgICAgIGluc3RhbmNlLmx1eERldGFpbFRlbXBsYXRlID0gdGhpcy5kZXRhaWxWaWV3LnRlbXBSZWY7XG4gICAgICAgICAgICBpbnN0YW5jZS5sdXhEZXRhaWxSZW5kZXJlZC5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLnNldE5ld0RldGFpbChkZXRhaWwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBEaWUgRGV0YWlsYW5zaWNodCBuYWNoIGRlbSBXZWNoc2VsIHdpZWRlciBuYWNoIG9iZW4gc2Nyb2xsZW4gbGFzc2VuXG4gICAgICAgICAgICB0aGlzLmRldGFpbFZpZXdDb250YWluZXJSZWYuZWxlbWVudC5uYXRpdmVFbGVtZW50LnBhcmVudE5vZGUuc2Nyb2xsVG9wID0gMDtcblxuICAgICAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFdpcmQgYXVmZ2VydWZlbiBuYWNoZGVtIGVpbiBuZXVlcyBEZXRhaWwtVGVtcGxhdGUgZ2VyZW5kZXJ0IHd1cmRlIHVuZCBha3R1YWxpc2llcnRcbiAgICogbHV4U2VsZWN0ZWREZXRhaWwgZGVtZW50c3ByZWNoZW5kLlxuICAgKi9cbiAgcHJpdmF0ZSBzZXROZXdEZXRhaWwoZGV0YWlsOiBhbnkpIHtcbiAgICBpZiAoIXRoaXMuY29tcGFyZU9iamVjdHModGhpcy5sdXhTZWxlY3RlZERldGFpbCwgZGV0YWlsKSkge1xuICAgICAgdGhpcy5fbHV4U2VsZWN0ZWREZXRhaWwgPSBkZXRhaWw7XG4gICAgICB0aGlzLnNlbGVjdGVkUG9zaXRpb24gPSB0aGlzLmx1eE1hc3Rlckxpc3QuaW5kZXhPZihkZXRhaWwpO1xuICAgICAgdGhpcy5sdXhTZWxlY3RlZERldGFpbENoYW5nZS5lbWl0KHRoaXMubHV4U2VsZWN0ZWREZXRhaWwpO1xuICAgICAgLy8gRGllIE1hc3Rlci1MaXN0ZSBmb2t1c3NpZXJlbiAoZGllIExpc3RlIGdpYnQgZXMgbnVyIGVpbm1hbCwgd2VpbCB3aXIgYXVmIENoYW5nZXMgaMO2cmVuLCBpc3Qgc2llIGFiZXIgaW4gZWluZXIgUXVlcnlMaXN0KVxuICAgICAgdGhpcy5sdXhNYXN0ZXJRdWVyeUxpc3QuZmlyc3QubmF0aXZlRWxlbWVudC5mb2N1cygpO1xuXG4gICAgICBpZiAodGhpcy5tb2JpbGVIZWxwZXJTZXJ2aWNlLmlzTW9iaWxlKCkpIHtcbiAgICAgICAgdGhpcy5sdXhPcGVuID0gZmFsc2U7XG4gICAgICB9XG4gICAgICB0aGlzLm1vYmlsZUhlbHBlclNlcnZpY2UuaGFzVmFsdWUgPSAhIXRoaXMuX2x1eFNlbGVjdGVkRGV0YWlsO1xuICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBLw7xtbWVydCBzaWNoIHVtIGRlbiBGYWxsLCBkYXNzIGRpZSBNYXN0ZXItTGlzdGUgc2VsYnN0IHNpY2ggw6RuZGVydC5cbiAgICovXG4gIHByaXZhdGUgaGFuZGxlTWFzdGVyTGlzdFVwZGF0ZSgpIHtcbiAgICB0aGlzLl9sdXhNYXN0ZXJMaXN0XG4gICAgICAuYXNPYnNlcnZhYmxlKClcbiAgICAgIC5waXBlKFxuICAgICAgICAvLyBXb3JrYXJvdW5kIHVtIEV4cHJlc3Npb25DaGFuZ2VkLUZlaGxlciB6dSB2ZXJtZWlkZW5cbiAgICAgICAgZGVsYXkoMCksXG4gICAgICAgIHRhcCgoKSA9PiB7XG4gICAgICAgICAgaWYgKCF0aGlzLmx1eE1hc3Rlckxpc3QgfHwgdGhpcy5sdXhNYXN0ZXJMaXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5sdXhTZWxlY3RlZERldGFpbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICAuc3Vic2NyaWJlKCk7XG4gIH1cblxuICAvKipcbiAgICogUHLDvGZ0IG9iIGRhcyBIZWFkZXItIG9kZXIgLUZvb3Rlci1FbGVtZW50IGRlciBNYXN0ZXJsaXN0ZSBjYS4gNTAlIGRlciBNYXN0ZXItSMO2aGUgZWlubmVobWVuLlxuICAgKlxuICAgKiBXZW5uIGphLCB3aXJkIGRpZSBBdXNyaWNodHVuZyBkZXMgTWFzdGVyLUVtcHR5LUxhYmVscyB1bmQgTWFzdGVyLUVtcHR5LUljb25zIG5pY2h0IG1laHIgYW5oYW5kIGRlcyBEZXRhaWwgYmVzdGltbXQuXG4gICAqL1xuICBwcml2YXRlIGNoZWNrRW1wdHlJbmRpY2F0b3JBbGlnbm1lbnQoKSB7XG4gICAgY29uc3QgaGVhZGVySGVpZ2h0ID0gdGhpcy5tYXN0ZXJIZWFkZXIgPyB0aGlzLm1hc3RlckhlYWRlci5uYXRpdmVFbGVtZW50Lm9mZnNldEhlaWdodCA6IDA7XG4gICAgY29uc3QgZm9vdGVySGVpZ2h0ID0gdGhpcy5tYXN0ZXJGb290ZXIgPyB0aGlzLm1hc3RlckZvb3Rlci5uYXRpdmVFbGVtZW50Lm9mZnNldEhlaWdodCA6IDA7XG5cbiAgICBpZiAodGhpcy5tYXN0ZXJDb250YWluZXIpIHtcbiAgICAgIC8vIE1heC1IZWlnaHQgaXN0IGRpZSBIw6RsZnRlIGRlciBNYXN0ZXItQ29udGFpbmVyIEjDtmhlIG1pbnVzIGVpbmUga2xlaW5lIFBhdXNjaGFsZSB2b24gMTAwcHggZGFtaXRcbiAgICAgIC8vIGRpZSBBbnNpY2h0IG5pY2h0IHp1IGtuYXBwIGlzdFxuICAgICAgY29uc3QgbWF4SGVpZ2h0ID0gdGhpcy5tYXN0ZXJDb250YWluZXIubmF0aXZlRWxlbWVudC5vZmZzZXRIZWlnaHQgLyAyIC0gMTAwO1xuICAgICAgdGhpcy5hbGlnbkVtcHR5SW5kaWNhdG9ycyA9ICEoaGVhZGVySGVpZ2h0ID4gbWF4SGVpZ2h0IHx8IGZvb3RlckhlaWdodCA+IG1heEhlaWdodCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE1lbGRldCDDvGJlciBkZW4gTGl2ZUFubm91bmNlciwgZGFzcyBldnRsLiB3ZWl0ZXJlIERhdGVuIHZpYSBJbmZpbml0ZVNjcm9sbGluZyBuYWNoZ2VsYWRlbiB3ZXJkZW4ga8O2bm50ZW4uXG4gICAqXG4gICAqIFwiYXNzZXJ0aXZlXCIsIGRhbWl0IGRpZSBNZWxkdW5nIGF1ZiBqZWRlbiBGYWxsIHZvbSBTY3JlZW5SZWFkZXIgdm9yZ2VsZXNlbiB3aXJkIHVuZCBuaWNodCB2b24gZXR3YWlnZW4gYW5kZXJlblxuICAgKiBBdXNzYWdlbiB2ZXJkZWNrdCB3aXJkLlxuICAgKi9cbiAgcHJpdmF0ZSBhbm5vdW5jZVBvc3NpYmxlSW5maW5pdGVTY3JvbGxpbmcoKSB7XG4gICAgdGhpcy5saXZlQW5ub3VuY2VyLmFubm91bmNlKFxuICAgICAgJ0RpZSBNYXN0ZXJsaXN0ZSBoYXQgd2VpdGVyZSBFaW50csOkZ2UgZXJoYWx0ZW4uICcgK1xuICAgICAgICAnQXVmZ3J1bmQgZGVzIEluZmluaXRlLVNjcm9sbGluZ3Mga8O2bm50ZW4gdmllbGxlaWNodCBub2NoIG1laHIgRWludHLDpGdlIG5hY2hnZWxhZGVuIHdlcmRlbi4nLFxuICAgICAgJ2Fzc2VydGl2ZSdcbiAgICApO1xuICB9XG59XG4iXX0=