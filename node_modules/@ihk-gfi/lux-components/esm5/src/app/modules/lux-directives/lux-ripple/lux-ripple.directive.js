import * as tslib_1 from "tslib";
import { Platform } from '@angular/cdk/platform';
import { Directive, ElementRef, Inject, Input, NgZone, OnDestroy, OnInit, Optional } from '@angular/core';
import { ANIMATION_MODULE_TYPE } from '@angular/platform-browser/animations';
import { MAT_RIPPLE_GLOBAL_OPTIONS, MatRipple } from '@angular/material';
import { LuxComponentsConfigService } from '../../lux-components-config/lux-components-config.service';
// @dynamic Erklärung steht in der Datei "lux-decorators.ts".
var LuxRippleDirective = /** @class */ (function (_super) {
    tslib_1.__extends(LuxRippleDirective, _super);
    function LuxRippleDirective(configService, luxElementRef, luxNgZone, luxPlatform, luxGlobalOptions, luxAnimationMode) {
        var _this = _super.call(this, luxElementRef, luxNgZone, luxPlatform, luxGlobalOptions, luxAnimationMode) || this;
        _this.configService = configService;
        _this.luxElementRef = luxElementRef;
        _this.luxNgZone = luxNgZone;
        _this.luxPlatform = luxPlatform;
        _this.luxGlobalOptions = luxGlobalOptions;
        _this.luxAnimationMode = luxAnimationMode;
        _this._luxRippleUnbounded = false;
        _this._luxRippleCentered = false;
        _this._luxRippleDisabled = false;
        _this._luxRippleRadius = 0;
        _this._luxRippleEnterDuration = 0;
        _this._luxRippleExitDuration = 0;
        return _this;
    }
    Object.defineProperty(LuxRippleDirective.prototype, "luxRippleColor", {
        get: function () {
            return this._luxRippleColor;
        },
        set: function (value) {
            this._luxRippleColor = value;
            this.color = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LuxRippleDirective.prototype, "luxRippleUnbounded", {
        get: function () {
            return this._luxRippleUnbounded;
        },
        set: function (value) {
            this._luxRippleUnbounded = value;
            this.unbounded = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LuxRippleDirective.prototype, "luxRippleCentered", {
        get: function () {
            return this._luxRippleCentered;
        },
        set: function (value) {
            this._luxRippleCentered = value;
            this.centered = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LuxRippleDirective.prototype, "luxRippleRadius", {
        get: function () {
            return this._luxRippleRadius;
        },
        set: function (value) {
            this._luxRippleRadius = value;
            this.radius = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LuxRippleDirective.prototype, "luxRippleDisabled", {
        get: function () {
            return this._luxRippleDisabled;
        },
        set: function (value) {
            this._luxRippleDisabled = value;
            this.disabled = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LuxRippleDirective.prototype, "luxRippleEnterDuration", {
        get: function () {
            return this._luxRippleEnterDuration;
        },
        set: function (value) {
            this._luxRippleEnterDuration = value;
            if (!this.animation) {
                this.animation = {};
            }
            this.animation.exitDuration = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LuxRippleDirective.prototype, "luxRippleExitDuration", {
        get: function () {
            return this._luxRippleExitDuration;
        },
        set: function (value) {
            this._luxRippleExitDuration = value;
            if (!this.animation) {
                this.animation = {};
            }
            this.animation.exitDuration = value;
        },
        enumerable: true,
        configurable: true
    });
    LuxRippleDirective.prototype.ngOnInit = function () {
        var _this = this;
        _super.prototype.ngOnInit.call(this);
        // Globale Konfiguration für die LUX-Ripples auslesen und die Component entsprechend aktualisieren
        this.configSubscription = this.configService.config.subscribe(function (_a) {
            var rippleConfiguration = _a.rippleConfiguration;
            if (rippleConfiguration) {
                _this.luxRippleEnterDuration = rippleConfiguration.enterDuration;
                _this.luxRippleExitDuration = rippleConfiguration.exitDuration;
                _this.luxRippleColor = rippleConfiguration.color;
                _this.luxRippleCentered = rippleConfiguration.centered;
                _this.luxRippleDisabled = rippleConfiguration.disabled;
                _this.luxRippleRadius = rippleConfiguration.radius;
                _this.luxRippleUnbounded = rippleConfiguration.unbounded;
            }
        });
    };
    LuxRippleDirective.prototype.ngOnDestroy = function () {
        _super.prototype.ngOnDestroy.call(this);
        if (this.configSubscription) {
            this.configSubscription.unsubscribe();
        }
    };
    LuxRippleDirective.ctorParameters = function () { return [
        { type: LuxComponentsConfigService },
        { type: ElementRef },
        { type: NgZone },
        { type: Platform },
        { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [MAT_RIPPLE_GLOBAL_OPTIONS,] }] },
        { type: String, decorators: [{ type: Optional }, { type: Inject, args: [ANIMATION_MODULE_TYPE,] }] }
    ]; };
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", String),
        tslib_1.__metadata("design:paramtypes", [String])
    ], LuxRippleDirective.prototype, "luxRippleColor", null);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Boolean),
        tslib_1.__metadata("design:paramtypes", [Boolean])
    ], LuxRippleDirective.prototype, "luxRippleUnbounded", null);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Boolean),
        tslib_1.__metadata("design:paramtypes", [Boolean])
    ], LuxRippleDirective.prototype, "luxRippleCentered", null);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Number),
        tslib_1.__metadata("design:paramtypes", [Number])
    ], LuxRippleDirective.prototype, "luxRippleRadius", null);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Boolean),
        tslib_1.__metadata("design:paramtypes", [Boolean])
    ], LuxRippleDirective.prototype, "luxRippleDisabled", null);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Number),
        tslib_1.__metadata("design:paramtypes", [Number])
    ], LuxRippleDirective.prototype, "luxRippleEnterDuration", null);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Number),
        tslib_1.__metadata("design:paramtypes", [Number])
    ], LuxRippleDirective.prototype, "luxRippleExitDuration", null);
    LuxRippleDirective = tslib_1.__decorate([
        Directive({
            selector: '[luxRipple], [lux-ripple]',
            host: {
                class: 'mat-ripple lux-ripple',
                '[class.mat-ripple-unbounded]': 'unbounded'
            }
        }),
        tslib_1.__param(4, Optional()), tslib_1.__param(4, Inject(MAT_RIPPLE_GLOBAL_OPTIONS)),
        tslib_1.__param(5, Optional()), tslib_1.__param(5, Inject(ANIMATION_MODULE_TYPE)),
        tslib_1.__metadata("design:paramtypes", [LuxComponentsConfigService,
            ElementRef,
            NgZone,
            Platform, Object, String])
    ], LuxRippleDirective);
    return LuxRippleDirective;
}(MatRipple));
export { LuxRippleDirective };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibHV4LXJpcHBsZS5kaXJlY3RpdmUuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AaWhrLWdmaS9sdXgtY29tcG9uZW50cy8iLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kdWxlcy9sdXgtZGlyZWN0aXZlcy9sdXgtcmlwcGxlL2x1eC1yaXBwbGUuZGlyZWN0aXZlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDakQsT0FBTyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDMUcsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0sc0NBQXNDLENBQUM7QUFDN0UsT0FBTyxFQUFFLHlCQUF5QixFQUFFLFNBQVMsRUFBdUIsTUFBTSxtQkFBbUIsQ0FBQztBQUM5RixPQUFPLEVBQUUsMEJBQTBCLEVBQUUsTUFBTSwyREFBMkQsQ0FBQztBQUd2Ryw2REFBNkQ7QUFRN0Q7SUFBd0MsOENBQVM7SUFrRi9DLDRCQUNVLGFBQXlDLEVBQ3pDLGFBQXNDLEVBQ3RDLFNBQWlCLEVBQ2pCLFdBQXFCLEVBQzBCLGdCQUFzQyxFQUMxQyxnQkFBeUI7UUFOOUUsWUFRRSxrQkFBTSxhQUFhLEVBQUUsU0FBUyxFQUFFLFdBQVcsRUFBRSxnQkFBZ0IsRUFBRSxnQkFBZ0IsQ0FBQyxTQUNqRjtRQVJTLG1CQUFhLEdBQWIsYUFBYSxDQUE0QjtRQUN6QyxtQkFBYSxHQUFiLGFBQWEsQ0FBeUI7UUFDdEMsZUFBUyxHQUFULFNBQVMsQ0FBUTtRQUNqQixpQkFBVyxHQUFYLFdBQVcsQ0FBVTtRQUMwQixzQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQXNCO1FBQzFDLHNCQUFnQixHQUFoQixnQkFBZ0IsQ0FBUztRQXBGOUUseUJBQW1CLEdBQVksS0FBSyxDQUFDO1FBQ3JDLHdCQUFrQixHQUFZ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USxFQUFFLENBQUEsRUFBRSxtQkFBQSxNQUFNLENBQUMseUJBQXlCLENBQUMsQ0FBQTtRQUM3QyxtQkFBQSxRQUFRLEVBQUUsQ0FBQSxFQUFFLG1CQUFBLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFBO2lEQUxuQiwwQkFBMEI7WUFDMUIsVUFBVTtZQUNkLE1BQU07WUFDSixRQUFRO09BdEZwQixrQkFBa0IsQ0FxSDlCO0lBQUQseUJBQUM7Q0FBQSxBQXJIRCxDQUF3QyxTQUFTLEdBcUhoRDtTQXJIWSxrQkFBa0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQbGF0Zm9ybSB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9wbGF0Zm9ybSc7XG5pbXBvcnQgeyBEaXJlY3RpdmUsIEVsZW1lbnRSZWYsIEluamVjdCwgSW5wdXQsIE5nWm9uZSwgT25EZXN0cm95LCBPbkluaXQsIE9wdGlvbmFsIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBBTklNQVRJT05fTU9EVUxFX1RZUEUgfSBmcm9tICdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyL2FuaW1hdGlvbnMnO1xuaW1wb3J0IHsgTUFUX1JJUFBMRV9HTE9CQUxfT1BUSU9OUywgTWF0UmlwcGxlLCBSaXBwbGVHbG9iYWxPcHRpb25zIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwnO1xuaW1wb3J0IHsgTHV4Q29tcG9uZW50c0NvbmZpZ1NlcnZpY2UgfSBmcm9tICcuLi8uLi9sdXgtY29tcG9uZW50cy1jb25maWcvbHV4LWNvbXBvbmVudHMtY29uZmlnLnNlcnZpY2UnO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XG5cbi8vIEBkeW5hbWljIEVya2zDpHJ1bmcgc3RlaHQgaW4gZGVyIERhdGVpIFwibHV4LWRlY29yYXRvcnMudHNcIi5cbkBEaXJlY3RpdmUoe1xuICBzZWxlY3RvcjogJ1tsdXhSaXBwbGVdLCBbbHV4LXJpcHBsZV0nLFxuICBob3N0OiB7XG4gICAgY2xhc3M6ICdtYXQtcmlwcGxlIGx1eC1yaXBwbGUnLFxuICAgICdbY2xhc3MubWF0LXJpcHBsZS11bmJvdW5kZWRdJzogJ3VuYm91bmRlZCdcbiAgfVxufSlcbmV4cG9ydCBjbGFzcyBMdXhSaXBwbGVEaXJlY3RpdmUgZXh0ZW5kcyBNYXRSaXBwbGUgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSB7XG4gIHByaXZhdGUgY29uZmlnU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XG5cbiAgX2x1eFJpcHBsZUNvbG9yOiBzdHJpbmc7XG4gIF9sdXhSaXBwbGVVbmJvdW5kZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgX2x1eFJpcHBsZUNlbnRlcmVkOiBib29sZWFuID0gZmFsc2U7XG4gIF9sdXhSaXBwbGVEaXNhYmxlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBfbHV4UmlwcGxlUmFkaXVzOiBudW1iZXIgPSAwO1xuICBfbHV4UmlwcGxlRW50ZXJEdXJhdGlvbjogbnVtYmVyID0gMDtcbiAgX2x1eFJpcHBsZUV4aXREdXJhdGlvbjogbnVtYmVyID0gMDtcblxuICBnZXQgbHV4UmlwcGxlQ29sb3IoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2x1eFJpcHBsZUNvbG9yO1xuICB9XG5cbiAgQElucHV0KCkgc2V0IGx1eFJpcHBsZUNvbG9yKHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLl9sdXhSaXBwbGVDb2xvciA9IHZhbHVlO1xuICAgIHRoaXMuY29sb3IgPSB2YWx1ZTtcbiAgfVxuXG4gIGdldCBsdXhSaXBwbGVVbmJvdW5kZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2x1eFJpcHBsZVVuYm91bmRlZDtcbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBsdXhSaXBwbGVVbmJvdW5kZWQodmFsdWU6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9sdXhSaXBwbGVVbmJvdW5kZWQgPSB2YWx1ZTtcbiAgICB0aGlzLnVuYm91bmRlZCA9IHZhbHVlO1xuICB9XG5cbiAgZ2V0IGx1eFJpcHBsZUNlbnRlcmVkKCkge1xuICAgIHJldHVybiB0aGlzLl9sdXhSaXBwbGVDZW50ZXJlZDtcbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBsdXhSaXBwbGVDZW50ZXJlZCh2YWx1ZTogYm9vbGVhbikge1xuICAgIHRoaXMuX2x1eFJpcHBsZUNlbnRlcmVkID0gdmFsdWU7XG4gICAgdGhpcy5jZW50ZXJlZCA9IHZhbHVlO1xuICB9XG5cbiAgZ2V0IGx1eFJpcHBsZVJhZGl1cygpIHtcbiAgICByZXR1cm4gdGhpcy5fbHV4UmlwcGxlUmFkaXVzO1xuICB9XG5cbiAgQElucHV0KCkgc2V0IGx1eFJpcHBsZVJhZGl1cyh2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5fbHV4UmlwcGxlUmFkaXVzID0gdmFsdWU7XG4gICAgdGhpcy5yYWRpdXMgPSB2YWx1ZTtcbiAgfVxuXG4gIGdldCBsdXhSaXBwbGVEaXNhYmxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fbHV4UmlwcGxlRGlzYWJsZWQ7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgbHV4UmlwcGxlRGlzYWJsZWQodmFsdWU6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9sdXhSaXBwbGVEaXNhYmxlZCA9IHZhbHVlO1xuICAgIHRoaXMuZGlzYWJsZWQgPSB2YWx1ZTtcbiAgfVxuXG4gIGdldCBsdXhSaXBwbGVFbnRlckR1cmF0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9sdXhSaXBwbGVFbnRlckR1cmF0aW9uO1xuICB9XG5cbiAgQElucHV0KCkgc2V0IGx1eFJpcHBsZUVudGVyRHVyYXRpb24odmFsdWU6IG51bWJlcikge1xuICAgIHRoaXMuX2x1eFJpcHBsZUVudGVyRHVyYXRpb24gPSB2YWx1ZTtcblxuICAgIGlmICghdGhpcy5hbmltYXRpb24pIHtcbiAgICAgIHRoaXMuYW5pbWF0aW9uID0ge307XG4gICAgfVxuICAgIHRoaXMuYW5pbWF0aW9uLmV4aXREdXJhdGlvbiA9IHZhbHVlO1xuICB9XG5cbiAgZ2V0IGx1eFJpcHBsZUV4aXREdXJhdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fbHV4UmlwcGxlRXhpdER1cmF0aW9uO1xuICB9XG5cbiAgQElucHV0KCkgc2V0IGx1eFJpcHBsZUV4aXREdXJhdGlvbih2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5fbHV4UmlwcGxlRXhpdER1cmF0aW9uID0gdmFsdWU7XG5cbiAgICBpZiAoIXRoaXMuYW5pbWF0aW9uKSB7XG4gICAgICB0aGlzLmFuaW1hdGlvbiA9IHt9O1xuICAgIH1cbiAgICB0aGlzLmFuaW1hdGlvbi5leGl0RHVyYXRpb24gPSB2YWx1ZTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgY29uZmlnU2VydmljZTogTHV4Q29tcG9uZW50c0NvbmZpZ1NlcnZpY2UsXG4gICAgcHJpdmF0ZSBsdXhFbGVtZW50UmVmOiBFbGVtZW50UmVmPEhUTUxFbGVtZW50PixcbiAgICBwcml2YXRlIGx1eE5nWm9uZTogTmdab25lLFxuICAgIHByaXZhdGUgbHV4UGxhdGZvcm06IFBsYXRmb3JtLFxuICAgIEBPcHRpb25hbCgpIEBJbmplY3QoTUFUX1JJUFBMRV9HTE9CQUxfT1BUSU9OUykgcHJpdmF0ZSBsdXhHbG9iYWxPcHRpb25zPzogUmlwcGxlR2xvYmFsT3B0aW9ucyxcbiAgICBAT3B0aW9uYWwoKSBASW5qZWN0KEFOSU1BVElPTl9NT0RVTEVfVFlQRSkgcHJpdmF0ZSBsdXhBbmltYXRpb25Nb2RlPzogc3RyaW5nXG4gICkge1xuICAgIHN1cGVyKGx1eEVsZW1lbnRSZWYsIGx1eE5nWm9uZSwgbHV4UGxhdGZvcm0sIGx1eEdsb2JhbE9wdGlvbnMsIGx1eEFuaW1hdGlvbk1vZGUpO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgc3VwZXIubmdPbkluaXQoKTtcblxuICAgIC8vIEdsb2JhbGUgS29uZmlndXJhdGlvbiBmw7xyIGRpZSBMVVgtUmlwcGxlcyBhdXNsZXNlbiB1bmQgZGllIENvbXBvbmVudCBlbnRzcHJlY2hlbmQgYWt0dWFsaXNpZXJlblxuICAgIHRoaXMuY29uZmlnU3Vic2NyaXB0aW9uID0gdGhpcy5jb25maWdTZXJ2aWNlLmNvbmZpZy5zdWJzY3JpYmUoKHsgcmlwcGxlQ29uZmlndXJhdGlvbiB9KSA9PiB7XG4gICAgICBpZiAocmlwcGxlQ29uZmlndXJhdGlvbikge1xuICAgICAgICB0aGlzLmx1eFJpcHBsZUVudGVyRHVyYXRpb24gPSByaXBwbGVDb25maWd1cmF0aW9uLmVudGVyRHVyYXRpb247XG4gICAgICAgIHRoaXMubHV4UmlwcGxlRXhpdER1cmF0aW9uID0gcmlwcGxlQ29uZmlndXJhdGlvbi5leGl0RHVyYXRpb247XG4gICAgICAgIHRoaXMubHV4UmlwcGxlQ29sb3IgPSByaXBwbGVDb25maWd1cmF0aW9uLmNvbG9yO1xuICAgICAgICB0aGlzLmx1eFJpcHBsZUNlbnRlcmVkID0gcmlwcGxlQ29uZmlndXJhdGlvbi5jZW50ZXJlZDtcbiAgICAgICAgdGhpcy5sdXhSaXBwbGVEaXNhYmxlZCA9IHJpcHBsZUNvbmZpZ3VyYXRpb24uZGlzYWJsZWQ7XG4gICAgICAgIHRoaXMubHV4UmlwcGxlUmFkaXVzID0gcmlwcGxlQ29uZmlndXJhdGlvbi5yYWRpdXM7XG4gICAgICAgIHRoaXMubHV4UmlwcGxlVW5ib3VuZGVkID0gcmlwcGxlQ29uZmlndXJhdGlvbi51bmJvdW5kZWQ7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBuZ09uRGVzdHJveSgpIHtcbiAgICBzdXBlci5uZ09uRGVzdHJveSgpO1xuXG4gICAgaWYgKHRoaXMuY29uZmlnU3Vic2NyaXB0aW9uKSB7XG4gICAgICB0aGlzLmNvbmZpZ1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIH1cbiAgfVxufVxuIl19