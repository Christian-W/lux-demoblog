import * as tslib_1 from "tslib";
import { ChangeDetectorRef, Component, EventEmitter, Input, OnInit, Optional, Output, ViewChild } from '@angular/core';
import { LuxLookupComponent } from '../lux-lookup-model/lux-lookup-component';
import { LuxLookupService } from '../lux-lookup-service/lux-lookup.service';
import { ControlContainer } from '@angular/forms';
import { debounceTime, distinctUntilChanged, map, startWith } from 'rxjs/operators';
import { MatAutocomplete, MatAutocompleteTrigger } from '@angular/material';
import { LuxAutocompleteErrorStateMatcher } from './lux-autocomplete-error-state-matcher';
import { LuxLookupHandlerService } from '../lux-lookup-service/lux-lookup-handler.service';
import { LuxConsoleService } from '../../lux-util/lux-console.service';
import { LuxComponentsConfigService } from '../../lux-components-config/lux-components-config.service';
var LuxLookupAutocompleteComponent = /** @class */ (function (_super) {
    tslib_1.__extends(LuxLookupAutocompleteComponent, _super);
    function LuxLookupAutocompleteComponent(lookupService, lookupHandler, controlContainer, cdr, logger, componentsConfigService) {
        var _this = _super.call(this, lookupService, lookupHandler, controlContainer, cdr, logger, componentsConfigService) || this;
        _this.luxDebounceTime = 250;
        _this.luxMaximumDisplayed = 50;
        _this.luxBlur = new EventEmitter();
        _this.luxFocus = new EventEmitter();
        _this.stateMatcher = new LuxAutocompleteErrorStateMatcher(_this, _this.entries);
        return _this;
    }
    LuxLookupAutocompleteComponent.prototype.ngOnInit = function () {
        var _this = this;
        _super.prototype.ngOnInit.call(this);
        this.filteredEntries = this.formControl.valueChanges.pipe(debounceTime(this.luxDebounceTime), distinctUntilChanged(), startWith(''), map(function (value) {
            var searchValue = typeof value === 'string' ? value : _this.displayFn(value);
            _this.latestSearchValue = searchValue;
            var filteredValues = searchValue ? _this.filter(searchValue) : _this.entries ? _this.entries.slice() : [];
            _this.entriesCount = filteredValues.length;
            if (_this.entriesCount > _this.luxMaximumDisplayed) {
                filteredValues = filteredValues.splice(0, _this.luxMaximumDisplayed);
            }
            return filteredValues;
        }));
    };
    /**
     * Vergleicht den eingegebenen Wert mit den Display-Werten der Einträge.
     * @param filterTerm
     * @returns LuxLookupTableEntry[]
     */
    LuxLookupAutocompleteComponent.prototype.filter = function (filterTerm) {
        var _this = this;
        return this.entries.filter(function (option) {
            var compareValue = _this.displayFn(option);
            return (compareValue
                .trim()
                .toLowerCase()
                .indexOf(filterTerm.trim().toLowerCase()) > -1);
        });
    };
    /**
     * Bestimmt wie eingegebene Optionen dargestellt werden.
     * @param option
     * @returns string
     */
    LuxLookupAutocompleteComponent.prototype.displayFn = function (option) {
        if (typeof option === 'string') {
            return option;
        }
        else if (this.isRenderPropAFunction()) {
            return this.luxRenderProp(option);
        }
        else if (option) {
            return option[this.luxRenderProp]
                ? option[this.luxRenderProp]
                : 'Fehler beim Auslesen (Property unbekannt)';
        }
    };
    /**
     * Wird beim Klick auf das Input Feld aufgerufen.
     * @param clickEvent
     */
    LuxLookupAutocompleteComponent.prototype.onClick = function (clickEvent) {
        clickEvent.target.setSelectionRange(0, clickEvent.target.value.length);
        // Beim Klick wenn kein Wert gesetzt ist, das Panel oeffnen
        if (!this.luxValue) {
            this.matAutocompleteTrigger._onChange('');
            this.matAutocompleteTrigger.openPanel();
        }
    };
    /**
     * Setzt den aktuellen Value-Wert auf den ausgewählten Wert.
     * @param MatAutocompleteSelectedEvent $event
     */
    LuxLookupAutocompleteComponent.prototype.selected = function ($event) {
        this.luxValue = $event.option.value;
        if (this.isInForm()) {
            this.formControl.setValue(this.luxValue);
        }
    };
    /**
     * @override errorMessageModifier - Modifikation der Fehlermeldung
     * @param value
     * @param errors
     */
    LuxLookupAutocompleteComponent.prototype.errorMessageModifier = function (value, errors) {
        var msg = _super.prototype.errorMessageModifier.call(this, value, errors);
        if (msg) {
            return msg;
        }
        if (errors['noResult']) {
            return 'Der eingegebene Eintrag ist nicht Teil der Schlüsseltabelle.';
        }
        return undefined;
    };
    LuxLookupAutocompleteComponent.ctorParameters = function () { return [
        { type: LuxLookupService },
        { type: LuxLookupHandlerService },
        { type: ControlContainer, decorators: [{ type: Optional }] },
        { type: ChangeDetectorRef },
        { type: LuxConsoleService },
        { type: LuxComponentsConfigService }
    ]; };
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Number)
    ], LuxLookupAutocompleteComponent.prototype, "luxDebounceTime", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Number)
    ], LuxLookupAutocompleteComponent.prototype, "luxMaximumDisplayed", void 0);
    tslib_1.__decorate([
        Output(),
        tslib_1.__metadata("design:type", EventEmitter)
    ], LuxLookupAutocompleteComponent.prototype, "luxBlur", void 0);
    tslib_1.__decorate([
        Output(),
        tslib_1.__metadata("design:type", EventEmitter)
    ], LuxLookupAutocompleteComponent.prototype, "luxFocus", void 0);
    tslib_1.__decorate([
        ViewChild(MatAutocomplete, { static: false }),
        tslib_1.__metadata("design:type", MatAutocomplete)
    ], LuxLookupAutocompleteComponent.prototype, "matAutocomplete", void 0);
    tslib_1.__decorate([
        ViewChild(MatAutocompleteTrigger, { static: false }),
        tslib_1.__metadata("design:type", MatAutocompleteTrigger)
    ], LuxLookupAutocompleteComponent.prototype, "matAutocompleteTrigger", void 0);
    LuxLookupAutocompleteComponent = tslib_1.__decorate([
        Component({
            selector: 'lux-lookup-autocomplete',
            template: "<lux-form-control [luxFormComponent]=\"this\" [formGroup]=\"formGroup\" *ngIf=\"formGroup\">\n  <div class=\"lux-input-row\">\n    <input\n      type=\"text\"\n      [placeholder]=\"luxPlaceholder\"\n      matInput\n      [matAutocomplete]=\"auto\"\n      (click)=\"onClick($event)\"\n      autocomplete=\"off\"\n      luxTagIdHandler\n      [luxTagId]=\"luxTagId\"\n      [required]=\"luxRequired\"\n      [readonly]=\"luxReadonly\"\n      [formControl]=\"formControl\"\n      [errorStateMatcher]=\"stateMatcher\"\n      (blur)=\"luxBlur.emit($event)\"\n      (focus)=\"luxFocus.emit($event)\"\n      (focusin)=\"luxFocusIn.emit($event)\"\n      (focusout)=\"luxFocusOut.emit($event)\"\n      [id]=\"uid\"\n      [luxAriaDescribedby]=\"uid + '-error ' + uid + '-hint'\"\n      #autoCompleteInput\n    />\n\n    <mat-autocomplete\n      #auto=\"matAutocomplete\"\n      [class]=\"'lux-autocomplete-panel'\"\n      [displayWith]=\"displayFn.bind(this)\"\n      (optionSelected)=\"selected($event)\"\n    >\n      <mat-option\n        *ngIf=\"entriesCount !== 1 && entriesCount > luxMaximumDisplayed && latestSearchValue\"\n        [disabled]=\"true\"\n        class=\"information-option\"\n      >\n        <div fxLayout=\"row\">\n          <div>\n            {{ entriesCount - luxMaximumDisplayed }} Treffer werden nicht angezeigt. <br />Bitte verfeinern Sie Ihre\n            Suche.\n          </div>\n        </div>\n      </mat-option>\n      <ng-container *ngFor=\"let entry of filteredEntries | async\">\n        <mat-option\n          [value]=\"entry\"\n          [ngClass]=\"{ invalid: entry.isUngueltig }\"\n          [ngStyle]=\"getStyles(entry.isUngueltig)\"\n          [disabled]=\"entry.isUngueltig && disableUngueltige()\"\n          *ngIf=\"!entry.isUngueltig || (entry.isUngueltig && showUngueltige())\"\n        >\n          <span>{{ getLabel(entry) }}</span>\n        </mat-option>\n      </ng-container>\n    </mat-autocomplete>\n  </div>\n</lux-form-control>\n",
            styles: ["@charset \"UTF-8\";lux-side-nav .lux-side-nav-item,lux-side-nav lux-link{box-sizing:border-box}lux-side-nav .lux-side-nav-item.lux-side-nav-item-selected,lux-side-nav lux-link.lux-side-nav-item-selected{background-color:rgba(112,141,170,.2)!important;position:relative;border-radius:4px}lux-side-nav .lux-side-nav-item.lux-side-nav-item-selected:after,lux-side-nav lux-link.lux-side-nav-item-selected:after{content:'';left:0;width:6px;top:0;bottom:0;position:absolute;border-left:6px solid #0073b3;border-radius:4px 0 0 4px}lux-side-nav .lux-side-nav-item button .mat-button-focus-overlay,lux-side-nav lux-link button .mat-button-focus-overlay{display:none}lux-side-nav .lux-side-nav-item button:focus,lux-side-nav lux-link button:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}lux-side-nav .lux-side-nav-item button:hover,lux-side-nav lux-link button:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-list{border:4px solid transparent}lux-list:focus{outline-width:0;border:4px solid rgba(112,141,170,.2)!important}lux-list lux-list-item:focus{outline-width:0}lux-list lux-list-item:focus mat-card{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}lux-list lux-list-item lux-card.lux-list-item-selected mat-card{background-color:rgba(112,141,170,.2)!important;position:relative;border-radius:4px}lux-list lux-list-item lux-card.lux-list-item-selected mat-card:after{content:'';left:0;width:6px;top:0;bottom:0;position:absolute;border-left:6px solid #0073b3;border-radius:4px 0 0 4px}lux-list lux-list-item lux-card mat-card{box-sizing:border-box}lux-list lux-list-item lux-card mat-card:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .lux-form-control-label>*{color:#335c85}lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .cdk-focused .mat-radio-container,lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .mat-checkbox-inner-container,lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .mat-slide-toggle-thumb{position:relative}lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .cdk-focused .mat-radio-container:after,lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .mat-checkbox-inner-container:after,lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .mat-slide-toggle-thumb:after{content:\"\";border:1px solid rgba(112,141,170,.2);background-color:rgba(112,141,170,.2);display:block;top:-4px;left:-4px;right:-4px;bottom:-4px;border-radius:15px;z-index:1;position:absolute}lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .lux-form-control-container:after{content:'';display:block;box-sizing:border-box;left:0;right:0;position:absolute;height:2px;border-bottom:2px solid #0073b3}lux-datepicker mat-datepicker-toggle button:focus:after{content:\"\";border:1px solid rgba(112,141,170,.2);background-color:rgba(112,141,170,.2);display:block;top:-4px;left:-4px;right:-4px;bottom:-4px;border-radius:15px;z-index:1;position:absolute}.lux-datepicker-panel .mat-calendar-header button .mat-button-focus-overlay,lux-datepicker mat-datepicker-toggle .mat-button-focus-overlay{display:none}.lux-datepicker-panel .mat-calendar-header button:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}.lux-datepicker-panel .mat-calendar-header button:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}.lux-datepicker-panel .mat-calendar-content td.mat-calendar-body-cell:hover>div{background-color:rgba(0,0,0,.2)!important;border-radius:999px}.lux-datepicker-panel .mat-calendar-content td.mat-calendar-body-cell.mat-calendar-body-active>div{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:999px}lux-table tr:hover>td,lux-table tr:hover>th{border-radius:0;background-color:#cfcfcf!important}lux-table th button.mat-sort-header-button:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}.lux-select-panel mat-option{border-left:0;box-sizing:border-box}.lux-select-panel mat-option.mat-selected{background-color:rgba(112,141,170,.2)!important;position:relative;border-radius:4px}.lux-select-panel mat-option.mat-selected:after{content:'';left:0;width:6px;top:0;bottom:0;position:absolute;border-left:6px solid #0073b3;border-radius:4px 0 0 4px}.lux-select-panel mat-option:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}.lux-select-panel mat-option.mat-active,.lux-select-panel mat-option:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-button button:not([disabled]) .mat-button-focus-overlay{display:none}lux-button button:not([disabled]):not(.mat-fab):not(.mat-raised-button):focus{background-color:rgba(112,141,170,.2)!important}lux-button button:not([disabled]):not(.mat-fab):not(.mat-raised-button):hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-button button:not([disabled]).mat-fab:focus,lux-button button:not([disabled]).mat-raised-button:focus{background-color:rgba(112,141,170,.2)!important}lux-button button:not([disabled]).mat-fab:focus.mat-accent,lux-button button:not([disabled]).mat-raised-button:focus.mat-accent{background-color:#b6d184!important}lux-button button:not([disabled]).mat-fab:focus.mat-warn,lux-button button:not([disabled]).mat-raised-button:focus.mat-warn{background-color:#ea2524!important}lux-button button:not([disabled]).mat-fab:focus.mat-primary,lux-button button:not([disabled]).mat-raised-button:focus.mat-primary{background-color:#4b82ba!important}.lux-autocomplete-panel mat-option{border-left:0;box-sizing:border-box}.lux-autocomplete-panel mat-option:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}.lux-autocomplete-panel mat-option.mat-active,.lux-autocomplete-panel mat-option:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-tabs mat-ink-bar{background-color:#0073b3!important}lux-tabs .mat-tab-label:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}lux-panel mat-expansion-panel-header:hover,lux-stepper mat-step-header:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-panel mat-expansion-panel-header:focus,lux-stepper mat-step-header:focus,lux-stepper mat-step-header[aria-selected=true],lux-tile mat-card:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}lux-master-detail lux-master-header .lux-master-header-collapse button.lux-button:not(.mat-fab):not(.mat-raised-button):focus{background-color:rgba(0,0,0,.2)!important}lux-file-list .lux-file-list{border:4px solid transparent}lux-file-list .lux-file-list:focus{outline-width:0;border:4px solid rgba(112,141,170,.2)!important}lux-file-list .lux-file-list .lux-file-list-entry{border:4px solid transparent}lux-file-list .lux-file-list .lux-file-list-entry:focus{outline-width:0;border:4px solid rgba(112,141,170,.2)!important}lux-file-list .lux-file-list mat-card{margin:4px}.lux-menu-panel .lux-menu-item:not([disabled=true]):focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}.lux-menu-panel .lux-menu-item:not([disabled=true]):hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-dialog-structure lux-dialog-content:focus,lux-dialog-structure lux-dialog-title:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}example-root .example-base-components-list .example-component-list-item,example-root .example-base-components-list mat-expansion-panel-header{box-sizing:border-box}example-root .example-base-components-list .example-component-list-item.example-component-list-item-selected,example-root .example-base-components-list mat-expansion-panel-header.example-component-list-item-selected{background-color:rgba(112,141,170,.2)!important;position:relative;border-radius:4px}example-root .example-base-components-list .example-component-list-item.example-component-list-item-selected:after,example-root .example-base-components-list mat-expansion-panel-header.example-component-list-item-selected:after{content:'';left:0;width:6px;top:0;bottom:0;position:absolute;border-left:6px solid #0073b3;border-radius:4px 0 0 4px}example-root .example-base-components-list .example-component-list-item:focus,example-root .example-base-components-list mat-expansion-panel-header:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}example-root .example-base-components-list .example-component-list-item:hover,example-root .example-base-components-list mat-expansion-panel-header:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}.lux-app-container,body,html{height:100%}.lux-app-container{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex}body{-webkit-overflow-scrolling:touch}div{font-family:Roboto,Helvetica Neue,sans-serif}.cdk-overlay-backdrop.cdk-overlay-backdrop-showing.lux-file-preview-backdrop{background:#000;opacity:.8!important}lux-card.lux-card-grow{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;width:400px;min-width:0}lux-card.lux-card-grow mat-card,lux-card.lux-card-grow mat-card-content{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0}.lux-crop{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.lux-label{color:rgba(0,0,0,.54);font-size:75%}.lux-hint{color:rgba(0,0,0,.6);font-size:12px}.lux-display-none{display:none}.lux-hidden{visibility:hidden}.lux-nowrap{white-space:nowrap}.lux-cursor{cursor:pointer}.lux-block-pointer-events{pointer-events:none}.lux-vertical-align-baseline{vertical-align:baseline!important}.lux-black-semi-transparent{color:rgba(0,0,0,.87)}.lux-semi-transparent{opacity:.6}.lux-overflow-y-hidden{overflow-y:hidden}.lux-overflow-y-auto{overflow-y:auto}.lux-overflow-wrap-break-word{overflow-wrap:break-word}.lux-bold{font-weight:700!important}.lux-uppercase{text-transform:uppercase!important}.lux-lowercase{text-transform:lowercase!important}.lux-hyphenate{overflow-wrap:break-word;word-wrap:break-word;word-break:normal;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow-x:auto}.lux-p-footer,.lux-p-header{padding:8px}.lux-snackbar{top:68px;right:8px;position:absolute;margin:0!important;min-width:unset!important;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-snack-bar-handset .lux-snackbar{left:8px;width:auto!important}.lux-mt-0{margin-top:0}.lux-pt-0{padding-top:0}.lux-mt-1{margin-top:2px}.lux-pt-1{padding-top:2px}.lux-mt-2{margin-top:4px}.lux-pt-2{padding-top:4px}.lux-mt-3{margin-top:8px}.lux-pt-3{padding-top:8px}.lux-mt-4{margin-top:16px}.lux-pt-4{padding-top:16px}.lux-mb-0{margin-bottom:0}.lux-pb-0{padding-bottom:0}.lux-mb-1{margin-bottom:2px}.lux-pb-1{padding-bottom:2px}.lux-mb-2{margin-bottom:4px}.lux-pb-2{padding-bottom:4px}.lux-mb-3{margin-bottom:8px}.lux-pb-3{padding-bottom:8px}.lux-mb-4{margin-bottom:16px}.lux-pb-4{padding-bottom:16px}.lux-ml-0{margin-left:0}.lux-pl-0{padding-left:0}.lux-ml-1{margin-left:2px}.lux-pl-1{padding-left:2px}.lux-ml-2{margin-left:4px}.lux-pl-2{padding-left:4px}.lux-ml-3{margin-left:8px}.lux-pl-3{padding-left:8px}.lux-ml-4{margin-left:16px}.lux-pl-4{padding-left:16px}.lux-m-0{margin:0}.lux-mr-0{margin-right:0}.lux-p-0{padding:0}.lux-pr-0{padding-right:0}.lux-m-1{margin:2px}.lux-mr-1{margin-right:2px}.lux-p-1{padding:2px}.lux-pr-1{padding-right:2px}.lux-m-2{margin:4px}.lux-mr-2{margin-right:4px}.lux-p-2{padding:4px}.lux-pr-2{padding-right:4px}.lux-m-3{margin:8px}.lux-mr-3{margin-right:8px}.lux-p-3{padding:8px}.lux-pr-3{padding-right:8px}.lux-m-4{margin:16px}.lux-mr-4{margin-right:16px}.lux-p-4{padding:16px}.lux-pr-4{padding-right:16px}.lux-flex-layout-gap-10[style*=row]>:not(:last-child){margin-right:10px}.lux-flex-layout-gap-10[style*=column]>:not(:last-child){margin-bottom:10px}.lux-flex-layout-gap-20[style*=row]>:not(:last-child){margin-right:20px}.lux-flex-layout-gap-20[style*=column]>:not(:last-child){margin-bottom:20px}.lux-flex-layout-gap-30[style*=row]>:not(:last-child){margin-right:30px}.lux-flex-layout-gap-30[style*=column]>:not(:last-child){margin-bottom:30px}.lux-z-index-100{z-index:100}.lux-z-index-500{z-index:500}.lux-z-index-1000{z-index:1000}.lux-uppercase>lux-button .lux-button-label,lux-button.lux-uppercase .lux-button-label{text-transform:uppercase}.lux-bg-color-red{background:#b01211}.lux-bg-color-green{background:#95bc4c}.lux-bg-color-yellow{background:#ebc000}.lux-bg-color-blue{background:#335c85}.lux-bg-color-gray{background:#c8c8c8}.lux-bg-color-orange{background:#ec9c1b}.lux-bg-color-brown{background:#783f04}.lux-font-color-black{color:#000}.lux-font-color-white{color:#fff}.lux-badge-notification.mat-badge-large .mat-badge-content{font-size:15px}.lux-badge-notification.lux-badge-color-default .mat-badge-content{color:#000;background:#fff;border:1px solid rgba(0,0,0,.87)}mat-error,mat-hint{font-size:.75em;position:absolute;top:0}.mat-form-field-invalid+.hint-error-box .mat-hint{display:none}.hint-error-box{position:relative;margin-top:-2em}::ng-deep mat-option{border-left:2px solid #fff}::ng-deep mat-option.invalid{border-left:2px solid #b01211}.lux-readonly{pointer-events:none}::ng-deep .lux-autocomplete-panel mat-option{margin-bottom:2px}::ng-deep .lux-autocomplete-panel mat-option.information-option{position:fixed;background:#fff;z-index:1000;line-height:24px;pointer-events:none}::ng-deep .lux-autocomplete-panel mat-option.information-option+mat-option{margin-top:48px}"]
        }),
        tslib_1.__param(2, Optional()),
        tslib_1.__metadata("design:paramtypes", [LuxLookupService,
            LuxLookupHandlerService,
            ControlContainer,
            ChangeDetectorRef,
            LuxConsoleService,
            LuxComponentsConfigService])
    ], LuxLookupAutocompleteComponent);
    return LuxLookupAutocompleteComponent;
}(LuxLookupComponent));
export { LuxLookupAutocompleteComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibHV4LWxvb2t1cC1hdXRvY29tcGxldGUuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGloay1nZmkvbHV4LWNvbXBvbmVudHMvIiwic291cmNlcyI6WyJzcmMvYXBwL21vZHVsZXMvbHV4LWxvb2t1cC9sdXgtbG9va3VwLWF1dG9jb21wbGV0ZS9sdXgtbG9va3VwLWF1dG9jb21wbGV0ZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDdkgsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sMENBQTBDLENBQUM7QUFDOUUsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sMENBQTBDLENBQUM7QUFDNUUsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFbEQsT0FBTyxFQUFFLFlBQVksRUFBRSxvQkFBb0IsRUFBRSxHQUFHLEVBQUUsU0FBUyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDcEYsT0FBTyxFQUFFLGVBQWUsRUFBZ0Msc0JBQXNCLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUMxRyxPQUFPLEVBQUUsZ0NBQWdDLEVBQUUsTUFBTSx3Q0FBd0MsQ0FBQztBQUMxRixPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSxrREFBa0QsQ0FBQztBQUUzRixPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxvQ0FBb0MsQ0FBQztBQUN2RSxPQUFPLEVBQUUsMEJBQTBCLEVBQUUsTUFBTSwyREFBMkQsQ0FBQztBQU92RztJQUFvRCwwREFBa0I7SUFjcEUsd0NBQ0UsYUFBK0IsRUFDL0IsYUFBc0MsRUFDMUIsZ0JBQWtDLEVBQzlDLEdBQXNCLEVBQ3RCLE1BQXlCLEVBQ3pCLHVCQUFtRDtRQU5yRCxZQVFFLGtC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TSxFQUFFOzBDQUFXLFlBQVk7b0VBQWdDO0lBRWpCO1FBQTlDLFNBQVMsQ0FBQyxlQUFlLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLENBQUM7MENBQWtCLGVBQWU7MkVBQUM7SUFDMUI7UUFBckQsU0FBUyxDQUFDLHNCQUFzQixFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxDQUFDOzBDQUF5QixzQkFBc0I7a0ZBQUM7SUFaMUYsOEJBQThCO1FBTDFDLFNBQVMsQ0FBQztZQUNULFFBQVEsRUFBRSx5QkFBeUI7WUFDbkMsdThEQUF1RDs7U0FFeEQsQ0FBQztRQWtCRyxtQkFBQSxRQUFRLEVBQUUsQ0FBQTtpREFGSSxnQkFBZ0I7WUFDaEIsdUJBQXVCO1lBQ1IsZ0JBQWdCO1lBQ3pDLGlCQUFpQjtZQUNkLGlCQUFpQjtZQUNBLDBCQUEwQjtPQXBCMUMsOEJBQThCLENBd0gxQztJQUFELHFDQUFDO0NBQUEsQUF4SEQsQ0FBb0Qsa0JBQWtCLEdBd0hyRTtTQXhIWSw4QkFBOEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDaGFuZ2VEZXRlY3RvclJlZiwgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIElucHV0LCBPbkluaXQsIE9wdGlvbmFsLCBPdXRwdXQsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTHV4TG9va3VwQ29tcG9uZW50IH0gZnJvbSAnLi4vbHV4LWxvb2t1cC1tb2RlbC9sdXgtbG9va3VwLWNvbXBvbmVudCc7XG5pbXBvcnQgeyBMdXhMb29rdXBTZXJ2aWNlIH0gZnJvbSAnLi4vbHV4LWxvb2t1cC1zZXJ2aWNlL2x1eC1sb29rdXAuc2VydmljZSc7XG5pbXBvcnQgeyBDb250cm9sQ29udGFpbmVyIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgZGVib3VuY2VUaW1lLCBkaXN0aW5jdFVudGlsQ2hhbmdlZCwgbWFwLCBzdGFydFdpdGggfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBNYXRBdXRvY29tcGxldGUsIE1hdEF1dG9jb21wbGV0ZVNlbGVjdGVkRXZlbnQsIE1hdEF1dG9jb21wbGV0ZVRyaWdnZXIgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbCc7XG5pbXBvcnQgeyBMdXhBdXRvY29tcGxldGVFcnJvclN0YXRlTWF0Y2hlciB9IGZyb20gJy4vbHV4LWF1dG9jb21wbGV0ZS1lcnJvci1zdGF0ZS1tYXRjaGVyJztcbmltcG9ydCB7IEx1eExvb2t1cEhhbmRsZXJTZXJ2aWNlIH0gZnJvbSAnLi4vbHV4LWxvb2t1cC1zZXJ2aWNlL2x1eC1sb29rdXAtaGFuZGxlci5zZXJ2aWNlJztcbmltcG9ydCB7IEx1eExvb2t1cFRhYmxlRW50cnkgfSBmcm9tICcuLi9sdXgtbG9va3VwLW1vZGVsL2x1eC1sb29rdXAtdGFibGUtZW50cnknO1xuaW1wb3J0IHsgTHV4Q29uc29sZVNlcnZpY2UgfSBmcm9tICcuLi8uLi9sdXgtdXRpbC9sdXgtY29uc29sZS5zZXJ2aWNlJztcbmltcG9ydCB7IEx1eENvbXBvbmVudHNDb25maWdTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vbHV4LWNvbXBvbmVudHMtY29uZmlnL2x1eC1jb21wb25lbnRzLWNvbmZpZy5zZXJ2aWNlJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbHV4LWxvb2t1cC1hdXRvY29tcGxldGUnLFxuICB0ZW1wbGF0ZVVybDogJy4vbHV4LWxvb2t1cC1hdXRvY29tcGxldGUuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9sdXgtbG9va3VwLWF1dG9jb21wbGV0ZS5jb21wb25lbnQuc2NzcyddXG59KVxuZXhwb3J0IGNsYXNzIEx1eExvb2t1cEF1dG9jb21wbGV0ZUNvbXBvbmVudCBleHRlbmRzIEx1eExvb2t1cENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIGZpbHRlcmVkRW50cmllczogT2JzZXJ2YWJsZTxMdXhMb29rdXBUYWJsZUVudHJ5W10+O1xuICBlbnRyaWVzQ291bnQ6IG51bWJlcjtcbiAgbGF0ZXN0U2VhcmNoVmFsdWU6IHN0cmluZztcblxuICBASW5wdXQoKSBsdXhEZWJvdW5jZVRpbWU6IG51bWJlciA9IDI1MDtcbiAgQElucHV0KCkgbHV4TWF4aW11bURpc3BsYXllZDogbnVtYmVyID0gNTA7XG5cbiAgQE91dHB1dCgpIGx1eEJsdXI6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG4gIEBPdXRwdXQoKSBsdXhGb2N1czogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICBAVmlld0NoaWxkKE1hdEF1dG9jb21wbGV0ZSwgeyBzdGF0aWM6IGZhbHNlIH0pIG1hdEF1dG9jb21wbGV0ZTogTWF0QXV0b2NvbXBsZXRlO1xuICBAVmlld0NoaWxkKE1hdEF1dG9jb21wbGV0ZVRyaWdnZXIsIHsgc3RhdGljOiBmYWxzZSB9KSBtYXRBdXRvY29tcGxldGVUcmlnZ2VyOiBNYXRBdXRvY29tcGxldGVUcmlnZ2VyO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGxvb2t1cFNlcnZpY2U6IEx1eExvb2t1cFNlcnZpY2UsXG4gICAgbG9va3VwSGFuZGxlcjogTHV4TG9va3VwSGFuZGxlclNlcnZpY2UsXG4gICAgQE9wdGlvbmFsKCkgY29udHJvbENvbnRhaW5lcjogQ29udHJvbENvbnRhaW5lcixcbiAgICBjZHI6IENoYW5nZURldGVjdG9yUmVmLFxuICAgIGxvZ2dlcjogTHV4Q29uc29sZVNlcnZpY2UsXG4gICAgY29tcG9uZW50c0NvbmZpZ1NlcnZpY2U6IEx1eENvbXBvbmVudHNDb25maWdTZXJ2aWNlXG4gICkge1xuICAgIHN1cGVyKGxvb2t1cFNlcnZpY2UsIGxvb2t1cEhhbmRsZXIsIGNvbnRyb2xDb250YWluZXIsIGNkciwgbG9nZ2VyLCBjb21wb25lbnRzQ29uZmlnU2VydmljZSk7XG5cbiAgICB0aGlzLnN0YXRlTWF0Y2hlciA9IG5ldyBMdXhBdXRvY29tcGxldGVFcnJvclN0YXRlTWF0Y2hlcih0aGlzLCB0aGlzLmVudHJpZXMpO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgc3VwZXIubmdPbkluaXQoKTtcbiAgICB0aGlzLmZpbHRlcmVkRW50cmllcyA9IHRoaXMuZm9ybUNvbnRyb2wudmFsdWVDaGFuZ2VzLnBpcGUoXG4gICAgICBkZWJvdW5jZVRpbWUodGhpcy5sdXhEZWJvdW5jZVRpbWUpLFxuICAgICAgZGlzdGluY3RVbnRpbENoYW5nZWQoKSxcbiAgICAgIHN0YXJ0V2l0aDxzdHJpbmcgfCBMdXhMb29rdXBUYWJsZUVudHJ5PignJyksXG4gICAgICBtYXAoKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgY29uc3Qgc2VhcmNoVmFsdWUgPSB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gdmFsdWUgOiB0aGlzLmRpc3BsYXlGbih2YWx1ZSk7XG4gICAgICAgIHRoaXMubGF0ZXN0U2VhcmNoVmFsdWUgPSBzZWFyY2hWYWx1ZTtcbiAgICAgICAgbGV0IGZpbHRlcmVkVmFsdWVzID0gc2VhcmNoVmFsdWUgPyB0aGlzLmZpbHRlcihzZWFyY2hWYWx1ZSkgOiB0aGlzLmVudHJpZXMgPyB0aGlzLmVudHJpZXMuc2xpY2UoKSA6IFtdO1xuICAgICAgICB0aGlzLmVudHJpZXNDb3VudCA9IGZpbHRlcmVkVmFsdWVzLmxlbmd0aDtcbiAgICAgICAgaWYgKHRoaXMuZW50cmllc0NvdW50ID4gdGhpcy5sdXhNYXhpbXVtRGlzcGxheWVkKSB7XG4gICAgICAgICAgZmlsdGVyZWRWYWx1ZXMgPSBmaWx0ZXJlZFZhbHVlcy5zcGxpY2UoMCwgdGhpcy5sdXhNYXhpbXVtRGlzcGxheWVkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmlsdGVyZWRWYWx1ZXM7XG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogVmVyZ2xlaWNodCBkZW4gZWluZ2VnZWJlbmVuIFdlcnQgbWl0IGRlbiBEaXNwbGF5LVdlcnRlbiBkZXIgRWludHLDpGdlLlxuICAgKiBAcGFyYW0gZmlsdGVyVGVybVxuICAgKiBAcmV0dXJucyBMdXhMb29rdXBUYWJsZUVudHJ5W11cbiAgICovXG4gIGZpbHRlcihmaWx0ZXJUZXJtOiBhbnkpOiBMdXhMb29rdXBUYWJsZUVudHJ5W10ge1xuICAgIHJldHVybiB0aGlzLmVudHJpZXMuZmlsdGVyKG9wdGlvbiA9PiB7XG4gICAgICBjb25zdCBjb21wYXJlVmFsdWUgPSB0aGlzLmRpc3BsYXlGbihvcHRpb24pO1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgY29tcGFyZVZhbHVlXG4gICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgLmluZGV4T2YoZmlsdGVyVGVybS50cmltKCkudG9Mb3dlckNhc2UoKSkgPiAtMVxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCZXN0aW1tdCB3aWUgZWluZ2VnZWJlbmUgT3B0aW9uZW4gZGFyZ2VzdGVsbHQgd2VyZGVuLlxuICAgKiBAcGFyYW0gb3B0aW9uXG4gICAqIEByZXR1cm5zIHN0cmluZ1xuICAgKi9cbiAgZGlzcGxheUZuKG9wdGlvbjogTHV4TG9va3VwVGFibGVFbnRyeSk6IHN0cmluZyB7XG4gICAgaWYgKHR5cGVvZiBvcHRpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gb3B0aW9uO1xuICAgIH0gZWxzZSBpZiAodGhpcy5pc1JlbmRlclByb3BBRnVuY3Rpb24oKSkge1xuICAgICAgcmV0dXJuICg8RnVuY3Rpb24+dGhpcy5sdXhSZW5kZXJQcm9wKShvcHRpb24pO1xuICAgIH0gZWxzZSBpZiAob3B0aW9uKSB7XG4gICAgICByZXR1cm4gb3B0aW9uWzxzdHJpbmc+dGhpcy5sdXhSZW5kZXJQcm9wXVxuICAgICAgICA/IG9wdGlvbls8c3RyaW5nPnRoaXMubHV4UmVuZGVyUHJvcF1cbiAgICAgICAgOiAnRmVobGVyIGJlaW0gQXVzbGVzZW4gKFByb3BlcnR5IHVuYmVrYW5udCknO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBXaXJkIGJlaW0gS2xpY2sgYXVmIGRhcyBJbnB1dCBGZWxkIGF1ZmdlcnVmZW4uXG4gICAqIEBwYXJhbSBjbGlja0V2ZW50XG4gICAqL1xuICBvbkNsaWNrKGNsaWNrRXZlbnQ6IGFueSkge1xuICAgIGNsaWNrRXZlbnQudGFyZ2V0LnNldFNlbGVjdGlvblJhbmdlKDAsIGNsaWNrRXZlbnQudGFyZ2V0LnZhbHVlLmxlbmd0aCk7XG4gICAgLy8gQmVpbSBLbGljayB3ZW5uIGtlaW4gV2VydCBnZXNldHp0IGlzdCwgZGFzIFBhbmVsIG9lZmZuZW5cbiAgICBpZiAoIXRoaXMubHV4VmFsdWUpIHtcbiAgICAgIHRoaXMubWF0QXV0b2NvbXBsZXRlVHJpZ2dlci5fb25DaGFuZ2UoJycpO1xuICAgICAgdGhpcy5tYXRBdXRvY29tcGxldGVUcmlnZ2VyLm9wZW5QYW5lbCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR6dCBkZW4gYWt0dWVsbGVuIFZhbHVlLVdlcnQgYXVmIGRlbiBhdXNnZXfDpGhsdGVuIFdlcnQuXG4gICAqIEBwYXJhbSBNYXRBdXRvY29tcGxldGVTZWxlY3RlZEV2ZW50ICRldmVudFxuICAgKi9cbiAgc2VsZWN0ZWQoJGV2ZW50OiBNYXRBdXRvY29tcGxldGVTZWxlY3RlZEV2ZW50KSB7XG4gICAgdGhpcy5sdXhWYWx1ZSA9ICRldmVudC5vcHRpb24udmFsdWU7XG4gICAgaWYgKHRoaXMuaXNJbkZvcm0oKSkge1xuICAgICAgdGhpcy5mb3JtQ29udHJvbC5zZXRWYWx1ZSh0aGlzLmx1eFZhbHVlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQG92ZXJyaWRlIGVycm9yTWVzc2FnZU1vZGlmaWVyIC0gTW9kaWZpa2F0aW9uIGRlciBGZWhsZXJtZWxkdW5nXG4gICAqIEBwYXJhbSB2YWx1ZVxuICAgKiBAcGFyYW0gZXJyb3JzXG4gICAqL1xuICBlcnJvck1lc3NhZ2VNb2RpZmllcih2YWx1ZSwgZXJyb3JzKSB7XG4gICAgY29uc3QgbXNnID0gc3VwZXIuZXJyb3JNZXNzYWdlTW9kaWZpZXIodmFsdWUsIGVycm9ycyk7XG4gICAgaWYgKG1zZykge1xuICAgICAgcmV0dXJuIG1zZztcbiAgICB9XG5cbiAgICBpZiAoZXJyb3JzWydub1Jlc3VsdCddKSB7XG4gICAgICByZXR1cm4gJ0RlciBlaW5nZWdlYmVuZSBFaW50cmFnIGlzdCBuaWNodCBUZWlsIGRlciBTY2hsw7xzc2VsdGFiZWxsZS4nO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG4iXX0=