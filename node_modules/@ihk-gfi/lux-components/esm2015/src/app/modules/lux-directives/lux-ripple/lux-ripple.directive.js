import * as tslib_1 from "tslib";
import { Platform } from '@angular/cdk/platform';
import { Directive, ElementRef, Inject, Input, NgZone, OnDestroy, OnInit, Optional } from '@angular/core';
import { ANIMATION_MODULE_TYPE } from '@angular/platform-browser/animations';
import { MAT_RIPPLE_GLOBAL_OPTIONS, MatRipple } from '@angular/material';
import { LuxComponentsConfigService } from '../../lux-components-config/lux-components-config.service';
// @dynamic Erklärung steht in der Datei "lux-decorators.ts".
let LuxRippleDirective = class LuxRippleDirective extends MatRipple {
    constructor(configService, luxElementRef, luxNgZone, luxPlatform, luxGlobalOptions, luxAnimationMode) {
        super(luxElementRef, luxNgZone, luxPlatform, luxGlobalOptions, luxAnimationMode);
        this.configService = configService;
        this.luxElementRef = luxElementRef;
        this.luxNgZone = luxNgZone;
        this.luxPlatform = luxPlatform;
        this.luxGlobalOptions = luxGlobalOptions;
        this.luxAnimationMode = luxAnimationMode;
        this._luxRippleUnbounded = false;
        this._luxRippleCentered = false;
        this._luxRippleDisabled = false;
        this._luxRippleRadius = 0;
        this._luxRippleEnterDuration = 0;
        this._luxRippleExitDuration = 0;
    }
    get luxRippleColor() {
        return this._luxRippleColor;
    }
    set luxRippleColor(value) {
        this._luxRippleColor = value;
        this.color = value;
    }
    get luxRippleUnbounded() {
        return this._luxRippleUnbounded;
    }
    set luxRippleUnbounded(value) {
        this._luxRippleUnbounded = value;
        this.unbounded = value;
    }
    get luxRippleCentered() {
        return this._luxRippleCentered;
    }
    set luxRippleCentered(value) {
        this._luxRippleCentered = value;
        this.centered = value;
    }
    get luxRippleRadius() {
        return this._luxRippleRadius;
    }
    set luxRippleRadius(value) {
        this._luxRippleRadius = value;
        this.radius = value;
    }
    get luxRippleDisabled() {
        return this._luxRippleDisabled;
    }
    set luxRippleDisabled(value) {
        this._luxRippleDisabled = value;
        this.disabled = value;
    }
    get luxRippleEnterDuration() {
        return this._luxRippleEnterDuration;
    }
    set luxRippleEnterDuration(value) {
        this._luxRippleEnterDuration = value;
        if (!this.animation) {
            this.animation = {};
        }
        this.animation.exitDuration = value;
    }
    get luxRippleExitDuration() {
        return this._luxRippleExitDuration;
    }
    set luxRippleExitDuration(value) {
        this._luxRippleExitDuration = value;
        if (!this.animation) {
            this.animation = {};
        }
        this.animation.exitDuration = value;
    }
    ngOnInit() {
        super.ngOnInit();
        // Globale Konfiguration für die LUX-Ripples auslesen und die Component entsprechend aktualisieren
        this.configSubscription = this.configService.config.subscribe(({ rippleConfiguration }) => {
            if (rippleConfiguration) {
                this.luxRippleEnterDuration = rippleConfiguration.enterDuration;
                this.luxRippleExitDuration = rippleConfiguration.exitDuration;
                this.luxRippleColor = rippleConfiguration.color;
                this.luxRippleCentered = rippleConfiguration.centered;
                this.luxRippleDisabled = rippleConfiguration.disabled;
                this.luxRippleRadius = rippleConfiguration.radius;
                this.luxRippleUnbounded = rippleConfiguration.unbounded;
            }
        });
    }
    ngOnDestroy() {
        super.ngOnDestroy();
        if (this.configSubscription) {
            this.configSubscription.unsubscribe();
        }
    }
};
LuxRippleDirective.ctorParameters = () => [
    { type: LuxComponentsConfigService },
    { type: ElementRef },
    { type: NgZone },
    { type: Platform },
    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [MAT_RIPPLE_GLOBAL_OPTIONS,] }] },
    { type: String, decorators: [{ type: Optional }, { type: Inject, args: [ANIMATION_MODULE_TYPE,] }] }
];
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", String),
    tslib_1.__metadata("design:paramtypes", [String])
], LuxRippleDirective.prototype, "luxRippleColor", null);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Boolean),
    tslib_1.__metadata("design:paramtypes", [Boolean])
], LuxRippleDirective.prototype, "luxRippleUnbounded", null);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Boolean),
    tslib_1.__metadata("design:paramtypes", [Boolean])
], LuxRippleDirective.prototype, "luxRippleCentered", null);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Number),
    tslib_1.__metadata("design:paramtypes", [Number])
], LuxRippleDirective.prototype, "luxRippleRadius", null);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Boolean),
    tslib_1.__metadata("design:paramtypes", [Boolean])
], LuxRippleDirective.prototype, "luxRippleDisabled", null);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Number),
    tslib_1.__metadata("design:paramtypes", [Number])
], LuxRippleDirective.prototype, "luxRippleEnterDuration", null);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Number),
    tslib_1.__metadata("design:paramtypes", [Number])
], LuxRippleDirective.prototype, "luxRippleExitDuration", null);
LuxRippleDirective = tslib_1.__decorate([
    Directive({
        selector: '[luxRipple], [lux-ripple]',
        host: {
            class: 'mat-ripple lux-ripple',
            '[class.mat-ripple-unbounded]': 'unbounded'
        }
    }),
    tslib_1.__param(4, Optional()), tslib_1.__param(4, Inject(MAT_RIPPLE_GLOBAL_OPTIONS)),
    tslib_1.__param(5, Optional()), tslib_1.__param(5, Inject(ANIMATION_MODULE_TYPE)),
    tslib_1.__metadata("design:paramtypes", [LuxComponentsConfigService,
        ElementRef,
        NgZone,
        Platform, Object, String])
], LuxRippleDirective);
export { LuxRippleDirective };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibHV4LXJpcHBsZS5kaXJlY3RpdmUuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AaWhrLWdmaS9sdXgtY29tcG9uZW50cy8iLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kdWxlcy9sdXgtZGlyZWN0aXZlcy9sdXgtcmlwcGxlL2x1eC1yaXBwbGUuZGlyZWN0aXZlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDakQsT0FBTyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDMUcsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0sc0NBQXNDLENBQUM7QUFDN0UsT0FBTyxFQUFFLHlCQUF5QixFQUFFLFNBQVMsRUFBdUIsTUFBTSxtQkFBbUIsQ0FBQztBQUM5RixPQUFPLEVBQUUsMEJBQTBCLEVBQUUsTUFBTSwyREFBMkQsQ0FBQztBQUd2Ryw2REFBNkQ7QUFRN0QsSUFBYSxrQkFBa0IsR0FBL0IsTUFBYSxrQkFBbUIsU0FBUSxTQUFTO0lBa0YvQyxZQUNVLGFBQXlDLEVBQ3pDLGFBQXNDLEVBQ3RDLFNBQWlCLEVBQ2pCLFdBQXFCLEVBQzBCLGdCQUFzQyxFQUMxQyxnQkFBeUI7UUFFNUUsS0FBSyxDQUFDLGFBQWEsRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLGdCQUFnQixFQUFFLGdCQUFnQixDQUFDLENBQUM7UUFQekUsa0JBQWEsR0FBYixhQUFhLENBQTRCO1FBQ3pDLGtCQUFhLEdBQWIsYUFBYSxDQUF5QjtRQUN0QyxjQUFTLEdBQVQsU0FBUyxDQUFRO1FBQ2pCLGdCQUFXLEdBQVgsV0FBVyxDQUFVO1FBQzBCLHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBc0I7UUFDMUMscUJBQWdCLEdBQWhCLGdCQUFnQixDQUFTO1FBcEY5RSx3QkFBbUIsR0FBWSxL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RUFBRSxDQUFBLEVBQUUsbUJBQUEsTUFBTSxDQUFDLHlCQUF5QixDQUFDLENBQUE7SUFDN0MsbUJBQUEsUUFBUSxFQUFFLENBQUEsRUFBRSxtQkFBQSxNQUFNLENBQUMscUJBQXFCLENBQUMsQ0FBQTs2Q0FMbkIsMEJBQTBCO1FBQzFCLFVBQVU7UUFDZCxNQUFNO1FBQ0osUUFBUTtHQXRGcEIsa0JBQWtCLENBcUg5QjtTQXJIWSxrQkFBa0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQbGF0Zm9ybSB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9wbGF0Zm9ybSc7XG5pbXBvcnQgeyBEaXJlY3RpdmUsIEVsZW1lbnRSZWYsIEluamVjdCwgSW5wdXQsIE5nWm9uZSwgT25EZXN0cm95LCBPbkluaXQsIE9wdGlvbmFsIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBBTklNQVRJT05fTU9EVUxFX1RZUEUgfSBmcm9tICdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyL2FuaW1hdGlvbnMnO1xuaW1wb3J0IHsgTUFUX1JJUFBMRV9HTE9CQUxfT1BUSU9OUywgTWF0UmlwcGxlLCBSaXBwbGVHbG9iYWxPcHRpb25zIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwnO1xuaW1wb3J0IHsgTHV4Q29tcG9uZW50c0NvbmZpZ1NlcnZpY2UgfSBmcm9tICcuLi8uLi9sdXgtY29tcG9uZW50cy1jb25maWcvbHV4LWNvbXBvbmVudHMtY29uZmlnLnNlcnZpY2UnO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XG5cbi8vIEBkeW5hbWljIEVya2zDpHJ1bmcgc3RlaHQgaW4gZGVyIERhdGVpIFwibHV4LWRlY29yYXRvcnMudHNcIi5cbkBEaXJlY3RpdmUoe1xuICBzZWxlY3RvcjogJ1tsdXhSaXBwbGVdLCBbbHV4LXJpcHBsZV0nLFxuICBob3N0OiB7XG4gICAgY2xhc3M6ICdtYXQtcmlwcGxlIGx1eC1yaXBwbGUnLFxuICAgICdbY2xhc3MubWF0LXJpcHBsZS11bmJvdW5kZWRdJzogJ3VuYm91bmRlZCdcbiAgfVxufSlcbmV4cG9ydCBjbGFzcyBMdXhSaXBwbGVEaXJlY3RpdmUgZXh0ZW5kcyBNYXRSaXBwbGUgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSB7XG4gIHByaXZhdGUgY29uZmlnU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XG5cbiAgX2x1eFJpcHBsZUNvbG9yOiBzdHJpbmc7XG4gIF9sdXhSaXBwbGVVbmJvdW5kZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgX2x1eFJpcHBsZUNlbnRlcmVkOiBib29sZWFuID0gZmFsc2U7XG4gIF9sdXhSaXBwbGVEaXNhYmxlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBfbHV4UmlwcGxlUmFkaXVzOiBudW1iZXIgPSAwO1xuICBfbHV4UmlwcGxlRW50ZXJEdXJhdGlvbjogbnVtYmVyID0gMDtcbiAgX2x1eFJpcHBsZUV4aXREdXJhdGlvbjogbnVtYmVyID0gMDtcblxuICBnZXQgbHV4UmlwcGxlQ29sb3IoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2x1eFJpcHBsZUNvbG9yO1xuICB9XG5cbiAgQElucHV0KCkgc2V0IGx1eFJpcHBsZUNvbG9yKHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLl9sdXhSaXBwbGVDb2xvciA9IHZhbHVlO1xuICAgIHRoaXMuY29sb3IgPSB2YWx1ZTtcbiAgfVxuXG4gIGdldCBsdXhSaXBwbGVVbmJvdW5kZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2x1eFJpcHBsZVVuYm91bmRlZDtcbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBsdXhSaXBwbGVVbmJvdW5kZWQodmFsdWU6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9sdXhSaXBwbGVVbmJvdW5kZWQgPSB2YWx1ZTtcbiAgICB0aGlzLnVuYm91bmRlZCA9IHZhbHVlO1xuICB9XG5cbiAgZ2V0IGx1eFJpcHBsZUNlbnRlcmVkKCkge1xuICAgIHJldHVybiB0aGlzLl9sdXhSaXBwbGVDZW50ZXJlZDtcbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBsdXhSaXBwbGVDZW50ZXJlZCh2YWx1ZTogYm9vbGVhbikge1xuICAgIHRoaXMuX2x1eFJpcHBsZUNlbnRlcmVkID0gdmFsdWU7XG4gICAgdGhpcy5jZW50ZXJlZCA9IHZhbHVlO1xuICB9XG5cbiAgZ2V0IGx1eFJpcHBsZVJhZGl1cygpIHtcbiAgICByZXR1cm4gdGhpcy5fbHV4UmlwcGxlUmFkaXVzO1xuICB9XG5cbiAgQElucHV0KCkgc2V0IGx1eFJpcHBsZVJhZGl1cyh2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5fbHV4UmlwcGxlUmFkaXVzID0gdmFsdWU7XG4gICAgdGhpcy5yYWRpdXMgPSB2YWx1ZTtcbiAgfVxuXG4gIGdldCBsdXhSaXBwbGVEaXNhYmxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fbHV4UmlwcGxlRGlzYWJsZWQ7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgbHV4UmlwcGxlRGlzYWJsZWQodmFsdWU6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9sdXhSaXBwbGVEaXNhYmxlZCA9IHZhbHVlO1xuICAgIHRoaXMuZGlzYWJsZWQgPSB2YWx1ZTtcbiAgfVxuXG4gIGdldCBsdXhSaXBwbGVFbnRlckR1cmF0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9sdXhSaXBwbGVFbnRlckR1cmF0aW9uO1xuICB9XG5cbiAgQElucHV0KCkgc2V0IGx1eFJpcHBsZUVudGVyRHVyYXRpb24odmFsdWU6IG51bWJlcikge1xuICAgIHRoaXMuX2x1eFJpcHBsZUVudGVyRHVyYXRpb24gPSB2YWx1ZTtcblxuICAgIGlmICghdGhpcy5hbmltYXRpb24pIHtcbiAgICAgIHRoaXMuYW5pbWF0aW9uID0ge307XG4gICAgfVxuICAgIHRoaXMuYW5pbWF0aW9uLmV4aXREdXJhdGlvbiA9IHZhbHVlO1xuICB9XG5cbiAgZ2V0IGx1eFJpcHBsZUV4aXREdXJhdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fbHV4UmlwcGxlRXhpdER1cmF0aW9uO1xuICB9XG5cbiAgQElucHV0KCkgc2V0IGx1eFJpcHBsZUV4aXREdXJhdGlvbih2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5fbHV4UmlwcGxlRXhpdER1cmF0aW9uID0gdmFsdWU7XG5cbiAgICBpZiAoIXRoaXMuYW5pbWF0aW9uKSB7XG4gICAgICB0aGlzLmFuaW1hdGlvbiA9IHt9O1xuICAgIH1cbiAgICB0aGlzLmFuaW1hdGlvbi5leGl0RHVyYXRpb24gPSB2YWx1ZTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgY29uZmlnU2VydmljZTogTHV4Q29tcG9uZW50c0NvbmZpZ1NlcnZpY2UsXG4gICAgcHJpdmF0ZSBsdXhFbGVtZW50UmVmOiBFbGVtZW50UmVmPEhUTUxFbGVtZW50PixcbiAgICBwcml2YXRlIGx1eE5nWm9uZTogTmdab25lLFxuICAgIHByaXZhdGUgbHV4UGxhdGZvcm06IFBsYXRmb3JtLFxuICAgIEBPcHRpb25hbCgpIEBJbmplY3QoTUFUX1JJUFBMRV9HTE9CQUxfT1BUSU9OUykgcHJpdmF0ZSBsdXhHbG9iYWxPcHRpb25zPzogUmlwcGxlR2xvYmFsT3B0aW9ucyxcbiAgICBAT3B0aW9uYWwoKSBASW5qZWN0KEFOSU1BVElPTl9NT0RVTEVfVFlQRSkgcHJpdmF0ZSBsdXhBbmltYXRpb25Nb2RlPzogc3RyaW5nXG4gICkge1xuICAgIHN1cGVyKGx1eEVsZW1lbnRSZWYsIGx1eE5nWm9uZSwgbHV4UGxhdGZvcm0sIGx1eEdsb2JhbE9wdGlvbnMsIGx1eEFuaW1hdGlvbk1vZGUpO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgc3VwZXIubmdPbkluaXQoKTtcblxuICAgIC8vIEdsb2JhbGUgS29uZmlndXJhdGlvbiBmw7xyIGRpZSBMVVgtUmlwcGxlcyBhdXNsZXNlbiB1bmQgZGllIENvbXBvbmVudCBlbnRzcHJlY2hlbmQgYWt0dWFsaXNpZXJlblxuICAgIHRoaXMuY29uZmlnU3Vic2NyaXB0aW9uID0gdGhpcy5jb25maWdTZXJ2aWNlLmNvbmZpZy5zdWJzY3JpYmUoKHsgcmlwcGxlQ29uZmlndXJhdGlvbiB9KSA9PiB7XG4gICAgICBpZiAocmlwcGxlQ29uZmlndXJhdGlvbikge1xuICAgICAgICB0aGlzLmx1eFJpcHBsZUVudGVyRHVyYXRpb24gPSByaXBwbGVDb25maWd1cmF0aW9uLmVudGVyRHVyYXRpb247XG4gICAgICAgIHRoaXMubHV4UmlwcGxlRXhpdER1cmF0aW9uID0gcmlwcGxlQ29uZmlndXJhdGlvbi5leGl0RHVyYXRpb247XG4gICAgICAgIHRoaXMubHV4UmlwcGxlQ29sb3IgPSByaXBwbGVDb25maWd1cmF0aW9uLmNvbG9yO1xuICAgICAgICB0aGlzLmx1eFJpcHBsZUNlbnRlcmVkID0gcmlwcGxlQ29uZmlndXJhdGlvbi5jZW50ZXJlZDtcbiAgICAgICAgdGhpcy5sdXhSaXBwbGVEaXNhYmxlZCA9IHJpcHBsZUNvbmZpZ3VyYXRpb24uZGlzYWJsZWQ7XG4gICAgICAgIHRoaXMubHV4UmlwcGxlUmFkaXVzID0gcmlwcGxlQ29uZmlndXJhdGlvbi5yYWRpdXM7XG4gICAgICAgIHRoaXMubHV4UmlwcGxlVW5ib3VuZGVkID0gcmlwcGxlQ29uZmlndXJhdGlvbi51bmJvdW5kZWQ7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBuZ09uRGVzdHJveSgpIHtcbiAgICBzdXBlci5uZ09uRGVzdHJveSgpO1xuXG4gICAgaWYgKHRoaXMuY29uZmlnU3Vic2NyaXB0aW9uKSB7XG4gICAgICB0aGlzLmNvbmZpZ1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIH1cbiAgfVxufVxuIl19