import * as tslib_1 from "tslib";
var LuxTableComponent_1;
// tslint:disable:member-ordering
import { Component, ContentChildren, ElementRef, EventEmitter, Input, Output, QueryList, ViewChild } from '@angular/core';
import { MatPaginator, MatPaginatorIntl, MatSort } from '@angular/material';
import { LuxTableDataSource } from './lux-table-data-source';
import { of, Subject } from 'rxjs';
import { catchError, debounceTime, distinctUntilChanged, tap } from 'rxjs/operators';
import { LuxUtil } from '../../lux-util/lux-util';
import { LuxPaginatorIntl } from '../../lux-util/lux-paginator-intl';
import { LuxMediaQueryObserverService } from '../../lux-util/lux-media-query-observer.service';
import { LuxTableColumnComponent } from './lux-table-subcomponents/lux-table-column.component';
import { LuxConsoleService } from '../../lux-util/lux-console.service';
import { LiveAnnouncer } from '@angular/cdk/a11y';
let LuxTableComponent = LuxTableComponent_1 = class LuxTableComponent {
    // endregion
    constructor(queryObserver, luxConsole, liveAnnouncer) {
        this.queryObserver = queryObserver;
        this.luxConsole = luxConsole;
        this.liveAnnouncer = liveAnnouncer;
        this._luxClasses = [];
        this._luxShowPagination = false;
        this._dataColumnDefs = [];
        this._luxShowFilter = false;
        this._dataSource = new LuxTableDataSource([]);
        this._luxPickValue = o => o;
        this._luxCompareWith = (o1, o2) => o1 === o2;
        this.httpRequestConf = {};
        this.columnSubscriptions = [];
        this.filtered$ = new Subject();
        this.currentCustomClasses = [];
        this.isIE = false;
        this.movedTableColumns = [];
        this.luxColWidthsPercent = [];
        this.luxFilterText = 'Filter';
        this.luxNoDataText = 'Keine Daten gefunden.';
        this.luxPageSize = 10;
        this.luxPageSizeOptions = [5, 10, 25, 50];
        this.luxMinWidthPx = -1;
        this.luxAutoPaginate = true;
        this.luxHideBorders = false;
        this.luxSelectedChange = new EventEmitter();
        this._luxSelected = new Set();
        /**
         * Eigene Implementierung der Filterung für diese Tabelle.
         * Iteriert über die Values des einzelnen Objektes und prüft dann ob der Filter-Wert irgendwo vorkommt.
         * @param data
         * @param filter
         */
        this.customFilterPredicate = (data, filter = '') => {
            for (const property in data) {
                if (data.hasOwnProperty(property)) {
                    const dataEntry = data[property];
                    if (LuxUtil.isDate(dataEntry)) {
                        if (dataEntry
                            .toLocaleString()
                            .toLowerCase()
                            .indexOf(filter) > -1) {
                            return true;
                        }
                    }
                    else {
                        if ((dataEntry + '').toLowerCase().indexOf(filter) > -1) {
                            return true;
                        }
                    }
                }
            }
            return false;
        };
        // Datasource um eigene Filter-Funktionalitaet ergaenzen
        this.dataSource.filterPredicate = this.customFilterPredicate;
        this.isIE = LuxUtil.isIEorEdge();
        this.mediaQuerySubscription = this.queryObserver.getMediaQueryChangedAsObservable().subscribe((query) => {
            this.mediaQuery = query;
            this.updateColumnsByMediaQuery();
        });
    }
    // region Setter/Getters
    get luxClasses() {
        return this._luxClasses;
    }
    set luxClasses(classes) {
        if (classes && !Array.isArray(classes)) {
            classes = [classes];
        }
        this._luxClasses = classes;
        this.insertCustomCSSClasses();
    }
    get luxShowPagination() {
        return this._luxShowPagination;
    }
    set luxShowPagination(show) {
        this._luxShowPagination = show;
        setTimeout(() => {
            this.handlePagination();
        });
    }
    get luxShowFilter() {
        return this._luxShowFilter;
    }
    set luxShowFilter(show) {
        this._luxShowFilter = show;
        this.handleFilter();
    }
    get dataColumnDefs() {
        return this._dataColumnDefs;
    }
    get dataSource() {
        return this._dataSource;
    }
    get luxData() {
        return this.dataSource.data;
    }
    set luxData(data) {
        data = data ? data : [];
        this.dataSource.data = data;
        if (this.dataSource) {
            setTimeout(() => {
                this.updateDataSourceAttributes(data);
                this.handleSort();
                this.insertCustomCSSClasses();
                this.updateColumnsByMediaQuery();
                this.calculateProportions();
                this.updateSelection();
            });
        }
    }
    get luxMultiSelect() {
        return this._luxMultiSelect;
    }
    set luxMultiSelect(multiSelect) {
        this._luxMultiSelect = multiSelect;
        if (this.luxMultiSelect) {
            this.luxSelected.clear();
            this._dataColumnDefs.unshift('multiSelect');
        }
        else {
            this._dataColumnDefs = this._dataColumnDefs.filter((col) => col !== 'multiSelect');
        }
        setTimeout(() => {
            this.calculateProportions();
        });
    }
    get luxSelected() {
        return this._luxSelected;
    }
    /**
     * Die Auswahl der Selektierten Elemente ist eigentlich ein Set,
     * nimmt aber Arrays von Außen entgegen (zur Vereinfachung).
     * @param selected
     */
    set luxSelected(selected) {
        this.luxSelected.clear();
        if (selected) {
            selected.forEach(entry => {
                this.luxSelected.add(entry);
            });
        }
        if (this.luxData && this.luxData.length > 0) {
            this.updateSelection();
        }
    }
    get luxPickValue() {
        return this._luxPickValue;
    }
    // Funktion, um den zu vergleichenden Wert aus den einzelnen Objekten zu ziehen.
    // Standardmäßig einfach das Objekt zurückgeben.
    set luxPickValue(pickFn) {
        this._luxPickValue = pickFn ? pickFn : o => o;
    }
    get luxCompareWith() {
        return this._luxCompareWith;
    }
    // Vergleichsfunktion; vergleicht standardmäßig einfach die Referenzen der beiden Objekte.
    set luxCompareWith(compareFn) {
        this._luxCompareWith = compareFn ? compareFn : (o1, o2) => o1 === o2;
    }
    ngOnInit() {
        setTimeout(() => {
            if (this.luxHttpDAO) {
                this.loadHttpDAOData();
            }
            else {
                this.updateDataSourceAttributes(this.luxData);
                this.handleSort();
                this.insertCustomCSSClasses();
            }
        });
    }
    ngAfterViewInit() {
        if (this.tableColumns) {
            // Für den Fall das Spalten wegfallen/dazu kommen
            this.tableColumnsChangedSubscription = this.tableColumns.changes.subscribe(() => {
                this.updateColumnsByMediaQuery();
                this.updateColumnSubscriptions();
            });
            // Für den Fall das sich Änderungen innerhalb der Spalten ergeben
            this.updateColumnSubscriptions();
            // Nach dem Init sollten einmal die Spalten aktualisiert werden
            setTimeout(() => {
                this.updateColumnsByMediaQuery();
            });
        }
        if (this.luxShowPagination) {
            this.handlePagination();
        }
    }
    ngDoCheck() {
        if (this.tableContainerElement.nativeElement.offsetWidth !== this.previousWidth ||
            this.tableContainerElement.nativeElement.offsetHeight !== this.previousHeight) {
            this.previousWidth = this.tableContainerElement.nativeElement.offsetWidth;
            this.previousHeight = this.tableContainerElement.nativeElement.offsetHeight;
            this.calculateProportions();
        }
    }
    ngOnDestroy() {
        // Subscriptions auflösen
        this.columnSubscriptions.forEach((subscription) => {
            subscription.unsubscribe();
        });
        if (this.httpDaoSubscription) {
            this.httpDaoSubscription.unsubscribe();
        }
        if (this.filterChangedSubscription) {
            this.filterChangedSubscription.unsubscribe();
        }
        if (this.tableColumnsChangedSubscription) {
            this.tableColumnsChangedSubscription.unsubscribe();
        }
        if (this.sortChangedSubscription) {
            this.sortChangedSubscription.unsubscribe();
        }
        if (this.paginatorPageSubscription) {
            this.paginatorPageSubscription.unsubscribe();
        }
        if (this.selectedSubscription) {
            this.selectedSubscription.unsubscribe();
        }
    }
    /**
     * Zieht sich die aktuellen CSS-Klassen aus den zugewiesenen
     * CSS-Klassen.
     * @param row
     * @returns string
     */
    getCustomClassesForIndex(row) {
        const customClasses = this.currentCustomClasses.find(value => value.entry === row);
        return customClasses ? customClasses.classes : '';
    }
    /**
     * TrackBy-Funktion um die Tabelle etwas schneller zu machen.
     * @param index
     * @param item
     */
    trackFn(index, item) {
        return index;
    }
    /**
     * Wird beim Klick auf eine Row aufgerufen und handelt das Sichern und Entfernen von
     * selektierten Einträgen.
     * @param entry
     */
    changeSelectedEntry(entry) {
        if (this.luxMultiSelect) {
            if (this.luxSelected.has(entry)) {
                this.luxSelected.delete(entry);
            }
            else {
                this.luxSelected.add(entry);
            }
        }
        else {
            if (this.luxSelected.has(entry)) {
                // Wenn der selektierte Eintrag erneut angeklickt wird,
                // wird die Selektion entfernt.
                this.luxSelected.clear();
            }
            else {
                this.luxSelected.clear();
                this.luxSelected.add(entry);
            }
        }
        this.luxSelectedChange.next(Array.from(this.luxSelected));
        this.dataSource.selectedEntries = this.luxSelected;
        this.allSelected = this.checkFilteredAllSelected();
    }
    /**
     * Selektiert/Deselektiert alle Einträge in dieser Tabelle.
     *
     * Voraussetzung dafür ist, das Multiselect aktiv ist und keine Http-Table vorliegt.
     */
    changeSelectedEntries() {
        if (this.luxMultiSelect && !this.luxHttpDAO) {
            if (this.checkFilteredAllSelected()) {
                this.dataSource.filteredData.forEach((dataEntry) => this.luxSelected.delete(dataEntry));
            }
            else {
                this.dataSource.filteredData.forEach((dataEntry) => this.luxSelected.add(dataEntry));
            }
            this.luxSelectedChange.next(Array.from(this.luxSelected));
            this.dataSource.selectedEntries = this.luxSelected;
            this.allSelected = this.checkFilteredAllSelected();
        }
    }
    /**
     * Prüft ob die aktuell angezeigten Einträge alle selektiert sind oder nicht.
     */
    checkFilteredAllSelected() {
        let result = true;
        if (this.luxSelected.size === 0) {
            result = false;
        }
        else {
            // Prüfen ob die gefilterten Daten selected sind
            this.dataSource.filteredData.forEach((dataEntry) => {
                if (!this.luxSelected.has(dataEntry)) {
                    result = false;
                }
            });
        }
        return result;
    }
    /**
     * Gibt zurück, ob irgendein Footer-Element für diese Tabelle aktuell sichtbar ist.
     */
    anyFootersAvailable() {
        return this.luxMultiSelect || !!this.tableColumns.find((column) => !!column.footer);
    }
    /**
     * Aktualisiert die DataSource und evtl. Subscriptions sowie die CustomCSS-Classes
     * nach einer Änderung.
     */
    updateDataSourceAttributes(data) {
        if (!this.luxHttpDAO && this.luxAutoPaginate && data && data.length > LuxTableComponent_1.AUTO_PAGINATION_START) {
            this.luxShowPagination = true;
        }
        if (!this.luxHttpDAO) {
            if (this.luxShowPagination) {
                this.handlePagination();
            }
        }
        if (!this.luxHttpDAO) {
            this.dataSource.sort = this.sort;
        }
        if (!this.luxHttpDAO) {
            this.dataSource.totalElements = this.dataSource.data ? this.dataSource.data.length : 0;
        }
    }
    /**
     * Prueft anhand der mitgegebenen Callbacks die CSS-Klassen
     * fuer die einzelnen Rows.
     */
    insertCustomCSSClasses() {
        if (this.luxClasses && this.dataSource.data) {
            this.currentCustomClasses = [];
            this.dataSource.data.forEach((entry, i) => {
                let classes = '';
                this.luxClasses.forEach((cssClass) => {
                    if (cssClass.check(entry)) {
                        classes += cssClass.class + ' ';
                    }
                });
                this.currentCustomClasses.push({ entry: entry, classes: classes });
            });
        }
    }
    /**
     * Gibt das Aria-Label für die Sortierung der Spalten-Überschrift zurück.
     * @param tableColumnDef
     */
    getAriaSortingLabel(tableColumnDef) {
        if (this.sort.active === tableColumnDef) {
            if (this.sort.direction === 'asc') {
                return 'aufsteigend sortiert';
            }
            if (this.sort.direction === 'desc') {
                return 'absteigend sortiert';
            }
        }
        return 'nicht sortiert';
    }
    /**
     * Gibt über den liveAnnouncer eine Nachricht aus, dass sich die Sortierung einer Spalte geändert hat.
     * @param $event
     */
    announceSortChange($event) {
        const index = this.tableColumns
            .toArray()
            .findIndex((tableColumn) => $event.active === tableColumn.luxColumnDef);
        let columnDef = index > -1 ? this.tableColumns.toArray()[index].luxColumnDef : null;
        if (columnDef === null) {
            columnDef = $event.active === 'multiSelect' ? 'multiSelect' : null;
        }
        if (columnDef !== null) {
            let directionDescription;
            switch ($event.direction) {
                case 'desc':
                    directionDescription = 'absteigend';
                    break;
                case 'asc':
                    directionDescription = 'aufsteigend';
                    break;
                case '':
                    directionDescription = 'nicht mehr';
                    break;
            }
            this.liveAnnouncer.announce(`Spalte ${columnDef} sortiert nun ${directionDescription}`, 'assertive');
        }
    }
    /**
     * Aktualisiert die momentan angezeigten Spalten anhand der für sie definierten
     * Responsive-Queries und Verhaltensweisen.
     */
    updateColumnsByMediaQuery() {
        if (!this.tableColumns) {
            return;
        }
        this._dataColumnDefs = [];
        // wenn Multiselect, dann benötigen wir hier noch eine Spalte mehr
        if (this.luxMultiSelect) {
            this._dataColumnDefs.push('multiSelect');
        }
        this.tableColumns.forEach((column) => this._dataColumnDefs.push(column.luxColumnDef));
        this.movedTableColumns = [];
        // Zuerst die auszublendenden Spalten durchgehen
        this.tableColumns.forEach((tableColumn) => {
            if ((tableColumn.luxResponsiveAt && !tableColumn.luxResponsiveBehaviour) ||
                (!tableColumn.luxResponsiveAt && tableColumn.luxResponsiveBehaviour)) {
                this.luxConsole.error(`Achtung! Die Column '${tableColumn.luxColumnDef}' hat entweder keine Media-Queries ` +
                    `oder kein Responsive-Verhalten zugewiesen bekommen.`);
            }
            else if (this.doesResponsiveAtApply(tableColumn.luxResponsiveAt)) {
                // Schauen, ob eine Spalte angegeben wurde, in welche sich diese hier verschieben kann
                if (this._dataColumnDefs.find((column) => column === tableColumn.luxResponsiveBehaviour)) {
                    // Wenn ja, die Spalte merken und vorerst ausblenden
                    this.movedTableColumns.push(tableColumn);
                }
                this._dataColumnDefs = this.dataColumnDefs.filter((dataColumn) => dataColumn !== tableColumn.luxColumnDef);
            }
        });
    }
    /**
     * Prüft ob die aktuelle MediaQuery mit der übergebenen MediaQuery/den übergebenen MediaQueries übereinstimmt.
     * @param responsiveAt
     */
    doesResponsiveAtApply(responsiveAt) {
        const mediaQueries = [];
        if (!Array.isArray(responsiveAt)) {
            mediaQueries.push(responsiveAt);
        }
        else {
            mediaQueries.push(...responsiveAt);
        }
        for (const mediaQuery of mediaQueries) {
            if (mediaQuery === this.mediaQuery) {
                return true;
            }
        }
        return false;
    }
    /**
     * Durchläuft die aktuellen TableColumns und hört auf Changes in den Properties
     * der Columns und merkt sich die Subscriptions.
     */
    updateColumnSubscriptions() {
        this.columnSubscriptions.forEach((subscription) => {
            subscription.unsubscribe();
        });
        this.columnSubscriptions = [];
        this.tableColumns.forEach((column) => {
            this.columnSubscriptions.push(column.change$.subscribe(() => {
                this.updateColumnsByMediaQuery();
            }));
        });
    }
    /**
     * Triggert über das DAO die Abfrage nach neuen Daten.
     * Sendet dabei das Request-Conf Objekt, welches Informationen bzgl.
     * page, pageSize, filter, sort, order mitgibt.
     * @param filteredBy?
     */
    loadHttpDAOData(filteredBy) {
        this.isLoadingResults = true;
        this.luxHttpDAO
            .loadData(this.httpRequestConf)
            .pipe(tap((data) => {
            this.isLoadingResults = false;
            // Wenn ein Filter-Text gegeben ist, sich dieser aber vom Aktuellen unterscheiden, brechen wir die Datenaktualisierung ab
            if (filteredBy && this.httpRequestConf.filter !== filteredBy) {
                return;
            }
            if (data) {
                this.dataSource.totalElements = data.totalCount;
                this.luxData = data.items;
                if (this.luxAutoPaginate && data.totalCount > LuxTableComponent_1.AUTO_PAGINATION_START) {
                    this.luxShowPagination = true;
                }
            }
            else {
                this.dataSource.totalElements = 0;
                this.luxData = [];
            }
        }), catchError(error => {
            this.isLoadingResults = false;
            return of(error);
        }))
            .subscribe();
    }
    /**
     * Wird aufgerufen wenn der Sort neu zur DataSource hinzugefügt werden soll (Data wurde neu gesetzt).
     * Resettet die Pagination und aktualisiert wenn es sich um eine asynchrone Tabelle handelt die
     * requestConf.
     */
    handleSort() {
        if (this.sort) {
            if (this.sortChangedSubscription) {
                this.sortChangedSubscription.unsubscribe();
            }
            this.sortChangedSubscription = this.sort.sortChange.subscribe((sort) => {
                this.paginator.pageIndex = 0;
                if (this.luxHttpDAO) {
                    this.httpRequestConf.page = this.paginator.pageIndex;
                    this.httpRequestConf.sort = sort.active;
                    this.httpRequestConf.order = sort.direction;
                    this.loadHttpDAOData();
                }
            });
        }
        this.calculateProportions();
    }
    /**
     * Wird nach dem set von luxShowFilter aufgerufen und fängt neue Filter-Operationen ab und
     * aktualisiert dementsprechend die Daten.
     */
    handleFilter() {
        if (this.filterChangedSubscription) {
            this.filterChangedSubscription.unsubscribe();
        }
        if (this.luxShowFilter) {
            this.filterChangedSubscription = this.filtered$
                .asObservable()
                .pipe(tap(() => (this.isLoadingResults = true)), debounceTime(500), distinctUntilChanged((x, y) => {
                if (x === y) {
                    this.isLoadingResults = false;
                }
                return x === y;
            }))
                .subscribe((filterValue) => {
                filterValue = filterValue.trim();
                filterValue = filterValue.toLocaleLowerCase();
                this.paginator.pageIndex = 0;
                this.isLoadingResults = false;
                if (!this.luxHttpDAO) {
                    this.dataSource.filter = filterValue;
                }
                if (this.luxHttpDAO) {
                    this.httpRequestConf.filter = filterValue;
                    this.loadHttpDAOData(filterValue);
                }
            });
        }
        this.calculateProportions();
    }
    /**
     * Wird nach dem set von luxShowPagination aufgerufen und setzt wenn es sich hier um
     * eine asynchrone Tabelle handelt eine Subscription um Pagination-Änderungen zu erhalten.
     */
    handlePagination() {
        if (this.luxShowPagination) {
            if (this.luxHttpDAO) {
                if (this.paginatorPageSubscription) {
                    this.paginatorPageSubscription.unsubscribe();
                }
                this.paginatorPageSubscription = this.paginator.page.subscribe(() => {
                    this.httpRequestConf.page = this.paginator.pageIndex;
                    this.httpRequestConf.pageSize = this.paginator.pageSize;
                    this.loadHttpDAOData();
                });
                this.httpRequestConf.page = this.paginator.pageIndex;
                this.httpRequestConf.pageSize = this.paginator.pageSize;
            }
            if (!this.luxHttpDAO) {
                this.dataSource.paginator = this.paginator;
            }
        }
        else {
            this.dataSource.paginator = null;
        }
        this.calculateProportions();
    }
    /**
     * Erzeugt einen neuen String für die Höhenberechnung der Tabelle und setzt die Minimalbreite für die Tabelle
     * (wenn möglich).
     */
    calculateProportions() {
        setTimeout(() => {
            const filter = this.filterElement ? this.filterElement.nativeElement.offsetHeight : 0;
            const pagination = this.paginatorElement ? this.paginatorElement.nativeElement.scrollHeight : 0;
            const temp = 'calc(100% - ' + pagination + 'px' + ' - ' + filter + 'px)';
            if (temp !== this.tableHeightCSSCalc) {
                this.tableHeightCSSCalc = temp;
            }
            this.tableMinWidth = this.luxMinWidthPx > -1 ? this.luxMinWidthPx + 'px' : 'unset';
        });
    }
    /**
     * Aktualisiert die selectedEntries dieser Component anhand der aktuell gesetzten luxSelected-Elemente.
     *
     * Dabei werden die einzelnen Elemente zuerst mithilfe der luxCompareWith- und luxPickValue-Functions miteinander
     * verglichen.
     */
    updateSelection() {
        // Prüfen ob selected gesetzt ist
        if (this.luxSelected.size > 0) {
            // Die selected-Einträge durchgehen und schauen ob diese im data-Block enthalten sind
            const foundEntries = [];
            this.luxSelected.forEach((entry) => {
                const newEntry = this.dataSource.data.find((dataEntry) => {
                    return this.luxCompareWith(this.luxPickValue(entry), this.luxPickValue(dataEntry));
                });
                // Merkt sich die Entry wenn sie noch nicht in der Selected-Liste ist (wenn es sich um eine HTTP-Tabelle handelt)
                if (newEntry && (!this.luxHttpDAO || (this.luxHttpDAO && !this.luxSelected.has(newEntry)))) {
                    foundEntries.push(newEntry);
                    this.luxSelected.delete(entry);
                }
            });
            // Nur bei nicht-HTTP-Tabellen die Selektion einmal leeren
            if (!this.luxHttpDAO) {
                this.luxSelected.clear();
            }
            foundEntries.forEach((entry) => this.luxSelected.add(entry));
        }
        this.dataSource.selectedEntries = this.luxSelected;
        this.luxSelectedChange.next(Array.from(this.luxSelected));
        this.allSelected = this.checkFilteredAllSelected();
    }
};
LuxTableComponent.AUTO_PAGINATION_START = 100; // 100 Elemente bis automatisch die Pagination aktiviert wird
LuxTableComponent.ctorParameters = () => [
    { type: LuxMediaQueryObserverService },
    { type: LuxConsoleService },
    { type: LiveAnnouncer }
];
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Array)
], LuxTableComponent.prototype, "luxColWidthsPercent", void 0);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", String)
], LuxTableComponent.prototype, "luxFilterText", void 0);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", String)
], LuxTableComponent.prototype, "luxNoDataText", void 0);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Number)
], LuxTableComponent.prototype, "luxPageSize", void 0);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Object)
], LuxTableComponent.prototype, "luxPageSizeOptions", void 0);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Object)
], LuxTableComponent.prototype, "luxHttpDAO", void 0);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Number)
], LuxTableComponent.prototype, "luxMinWidthPx", void 0);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Boolean)
], LuxTableComponent.prototype, "luxAutoPaginate", void 0);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Boolean)
], LuxTableComponent.prototype, "luxHideBorders", void 0);
tslib_1.__decorate([
    Output(),
    tslib_1.__metadata("design:type", EventEmitter)
], LuxTableComponent.prototype, "luxSelectedChange", void 0);
tslib_1.__decorate([
    ViewChild(MatPaginator, { static: true }),
    tslib_1.__metadata("design:type", MatPaginator)
], LuxTableComponent.prototype, "paginator", void 0);
tslib_1.__decorate([
    ViewChild(MatSort, { static: true }),
    tslib_1.__metadata("design:type", MatSort)
], LuxTableComponent.prototype, "sort", void 0);
tslib_1.__decorate([
    ViewChild('paginator', { read: ElementRef, static: true }),
    tslib_1.__metadata("design:type", ElementRef)
], LuxTableComponent.prototype, "paginatorElement", void 0);
tslib_1.__decorate([
    ViewChild('filter', { read: ElementRef, static: true }),
    tslib_1.__metadata("design:type", ElementRef)
], LuxTableComponent.prototype, "filterElement", void 0);
tslib_1.__decorate([
    ViewChild('tableContainer', { read: ElementRef, static: true }),
    tslib_1.__metadata("design:type", ElementRef)
], LuxTableComponent.prototype, "tableContainerElement", void 0);
tslib_1.__decorate([
    ContentChildren(LuxTableColumnComponent),
    tslib_1.__metadata("design:type", QueryList)
], LuxTableComponent.prototype, "tableColumns", void 0);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Object),
    tslib_1.__metadata("design:paramtypes", [Object])
], LuxTableComponent.prototype, "luxClasses", null);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Boolean),
    tslib_1.__metadata("design:paramtypes", [Boolean])
], LuxTableComponent.prototype, "luxShowPagination", null);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Boolean),
    tslib_1.__metadata("design:paramtypes", [Boolean])
], LuxTableComponent.prototype, "luxShowFilter", null);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Array),
    tslib_1.__metadata("design:paramtypes", [Array])
], LuxTableComponent.prototype, "luxData", null);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Boolean),
    tslib_1.__metadata("design:paramtypes", [Boolean])
], LuxTableComponent.prototype, "luxMultiSelect", null);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Set),
    tslib_1.__metadata("design:paramtypes", [Set])
], LuxTableComponent.prototype, "luxSelected", null);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Object),
    tslib_1.__metadata("design:paramtypes", [Object])
], LuxTableComponent.prototype, "luxPickValue", null);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Object),
    tslib_1.__metadata("design:paramtypes", [Object])
], LuxTableComponent.prototype, "luxCompareWith", null);
LuxTableComponent = LuxTableComponent_1 = tslib_1.__decorate([
    Component({
        selector: 'lux-table',
        template: "<div fxLayout=\"column\" fxFlex=\"0 0 100%\" class=\"lux-table\">\n  <!-- Progress f\u00FCr das Laden/Filtern von Daten -->\n  <div fxFlex=\"0 0 15px\">\n    <lux-progress\n      luxTagId=\"tableProgress\"\n      luxType=\"Progressbar\"\n      class=\"lux-mb-3\"\n      *ngIf=\"isLoadingResults\"\n    ></lux-progress>\n  </div>\n  <!-- Input-Feld f\u00FCr das Filtern der Datens\u00E4tze dieser Tabelle -->\n  <lux-input\n    class=\"lux-table-filter\"\n    [luxTagId]=\"luxFilterText\"\n    [luxLabel]=\"luxFilterText\"\n    (luxValueChange)=\"filtered$.next($event)\"\n    [ngClass]=\"{ 'lux-hide': !luxShowFilter }\"\n    #filter\n  >\n  </lux-input>\n  <!-- Die eigentliche Struktur der Tabelle -->\n  <div\n    [ngStyle]=\"{ height: tableHeightCSSCalc }\"\n    class=\"lux-table\"\n    [ngClass]=\"{ 'lux-block-pointer-events': isLoadingResults, 'lux-hide-borders': luxHideBorders }\"\n    #tableContainer\n  >\n    <!-- Overlay, welches bei der Anzeige des Ladebalkens die Interaktion mit der Tabelle unterbindet -->\n    <div class=\"lux-table-overlay\" [ngClass]=\"{ 'lux-table-overlay-active': isLoadingResults }\"></div>\n\n    <div class=\"lux-table-content\">\n      <table\n        mat-table\n        [dataSource]=\"dataSource\"\n        [ngClass]=\"{ 'lux-table-ie': isIE, 'lux-multiselect-table': luxMultiSelect }\"\n        [ngStyle]=\"{ 'min-width': tableMinWidth }\"\n        [trackBy]=\"trackFn\"\n        matSort\n        (matSortChange)=\"announceSortChange($event)\"\n        #table\n      >\n        <ng-container *ngIf=\"tableColumns\">\n          <!-- Zellen, welche nur bei Multiselect-Tabellen dargestellt werden und die Checkboxen + Counter beinhalten -->\n          <ng-container matColumnDef=\"multiSelect\" *ngIf=\"luxMultiSelect\">\n            <th\n              class=\"lux-multiselect-th\"\n              [luxAriaLabel]=\"'Spalte multiSelect ' + getAriaSortingLabel('multiSelect')\"\n              luxAriaLabelSelector=\"button\"\n              mat-header-cell\n              *matHeaderCellDef\n              mat-sort-header\n            >\n              <div fxLayout=\"column\">\n                <span class=\"lux-selected-count\"\n                  >{{ luxSelected.size }} {{ !luxHttpDAO ? '/ ' + dataSource.totalElements : '' }}</span\n                >\n              </div>\n            </th>\n            <td class=\"lux-multiselect-td\" mat-cell *matCellDef=\"let element; let i = index\">\n              <lux-checkbox\n                luxTagId=\"lux-table-multiselect-content-{{ i }}\"\n                class=\"lux-multiselect-toggle\"\n                luxTabIndex=\"-1\"\n                [luxApplyToChildren]=\"['input']\"\n                [luxAriaLabel]=\"'Reihe ' + i\"\n                luxAriaLabelSelector=\"input\"\n                [luxChecked]=\"luxSelected.has(element)\"\n              >\n              </lux-checkbox>\n            </td>\n            <td\n              class=\"lux-multiselect-tf\"\n              [ngClass]=\"{ 'lux-ignore-multiselect-tf': !!luxHttpDAO }\"\n              mat-footer-cell\n              *matFooterCellDef\n            >\n              <div\n                fxLayout=\"column\"\n                fxLayoutAlign=\"center\"\n                fxFill\n                class=\"lux-multiselect-toggle-all-wrapper\"\n                *ngIf=\"!luxHttpDAO\"\n              >\n                <lux-checkbox\n                  luxTagId=\"lux-table-multiselect-header\"\n                  class=\"lux-multiselect-toggle-all\"\n                  luxAriaLabel=\"Alle Eintr\u00E4ge\"\n                  luxAriaLabelSelector=\"input\"\n                  luxTabIndex=\"-1\"\n                  [luxApplyToChildren]=\"['input']\"\n                  [luxChecked]=\"allSelected\"\n                >\n                </lux-checkbox>\n              </div>\n            </td>\n          </ng-container>\n          <!-- Diese Zelle wird nur dargestellt wenn keine Daten/die dataSource.totalElements === 0 sind -->\n          <ng-container matColumnDef=\"noData\">\n            <th mat-header-cell *matHeaderCellDef [colSpan]=\"tableColumns.length\">\n              <span class=\"lux-no-data-text\">{{ luxNoDataText }}</span>\n            </th>\n          </ng-container>\n          <!-- Hier sind die eigentlichen Inhalts-Zellen -->\n          <ng-container *ngFor=\"let tableColumn of tableColumns.toArray(); let i = index\">\n            <ng-container\n              [matColumnDef]=\"tableColumn.luxColumnDef\"\n              [sticky]=\"i === 0 && tableColumn.luxSticky\"\n              [stickyEnd]=\"i === tableColumns.length - 1 && tableColumn.luxSticky\"\n            >\n              <th\n                [luxAriaLabel]=\"\n                  'Spalte ' + tableColumn.luxColumnDef + ' ' + getAriaSortingLabel(tableColumn.luxColumnDef)\n                \"\n                luxAriaLabelSelector=\"button\"\n                mat-header-cell\n                *matHeaderCellDef\n                mat-sort-header\n                [ngClass]=\"\n                  'lux-table-column-header-' +\n                  i +\n                  (!tableColumn.luxSortable ? ' lux-table-header-blocked' : '') +\n                  (!tableColumn.header ? ' lux-table-column-header-empty' : '')\n                \"\n                [ngStyle]=\"{\n                  width: luxColWidthsPercent && luxColWidthsPercent[i] ? luxColWidthsPercent[i] + '%' : 'unset'\n                }\"\n              >\n                <ng-container *ngTemplateOutlet=\"tableColumn.header?.tempRef\"></ng-container>\n              </th>\n\n              <!-- Hier enstehen die Zellen mit den Inhalten -->\n              <td\n                mat-cell\n                *matCellDef=\"let element\"\n                [ngStyle]=\"{\n                  width: luxColWidthsPercent && luxColWidthsPercent[i] ? luxColWidthsPercent[i] + '%' : 'unset'\n                }\"\n              >\n                <ng-container\n                  *ngTemplateOutlet=\"tableColumn.content?.tempRef; context: { $implicit: element }\"\n                ></ng-container>\n\n                <!-- Hier werden die aufgrund von Responsive-Verhalten verschobenen Spalten innerhalb dieser Spalte dargestellt -->\n                <ng-container *ngFor=\"let movedTableColumn of movedTableColumns\">\n                  <ng-container *ngIf=\"movedTableColumn.luxResponsiveBehaviour === tableColumn.luxColumnDef\">\n                    <div class=\"lux-moved-header-title lux-label\">\n                      <ng-container *ngTemplateOutlet=\"movedTableColumn.header?.tempRef\"></ng-container>\n                    </div>\n                    <div>\n                      <ng-container\n                        *ngTemplateOutlet=\"movedTableColumn.content.tempRef; context: { $implicit: element }\"\n                      ></ng-container>\n                    </div>\n                  </ng-container>\n                </ng-container>\n              </td>\n              <td mat-footer-cell *matFooterCellDef>\n                <ng-container *ngTemplateOutlet=\"tableColumn.footer?.tempRef\"></ng-container>\n              </td>\n            </ng-container>\n          </ng-container>\n\n          <!-- Die Table-Row f\u00FCr die Header (standardm\u00E4\u00DFig sticky) -->\n          <tr mat-header-row *matHeaderRowDef=\"dataColumnDefs; sticky: true\"></tr>\n          <!-- Die Table-Row f\u00FCr die \"no-data\"-Anzeige -->\n          <tr\n            mat-header-row\n            *matHeaderRowDef=\"['noData']; sticky: true\"\n            class=\"lux-table-header-no-data\"\n            [ngClass]=\"{ 'lux-display-none': dataSource.totalElements > 0 && dataSource.filteredData.length > 0 }\"\n          ></tr>\n          <!-- Die Table-Rows f\u00FCr alle Inhalts-Spalten -->\n          <tr\n            mat-row\n            *matRowDef=\"let rowData; columns: dataColumnDefs; let i = index\"\n            class=\"lux-row {{ getCustomClassesForIndex(rowData) }}\"\n            tabindex=\"0\"\n            [ngClass]=\"{ 'lux-multiselect-field': luxMultiSelect, 'lux-row-selected': luxSelected.has(rowData) }\"\n            (click)=\"changeSelectedEntry(rowData)\"\n            (keydown.space)=\"changeSelectedEntry(rowData)\"\n            (keydown.enter)=\"changeSelectedEntry(rowData)\"\n          ></tr>\n          <!-- Die Table-Row f\u00FCr den Footer dieser Tabelle -->\n          <tr\n            mat-footer-row\n            *matFooterRowDef=\"dataColumnDefs; sticky: true\"\n            ngClass=\"lux-footer-row\"\n            [ngClass]=\"{\n              'lux-display-none': !anyFootersAvailable(),\n              'lux-multiselect-field': luxMultiSelect && !luxHttpDAO\n            }\"\n            tabindex=\"0\"\n            (click)=\"changeSelectedEntries()\"\n            (keydown.space)=\"changeSelectedEntries()\"\n            (keydown.enter)=\"changeSelectedEntries()\"\n          ></tr>\n        </ng-container>\n      </table>\n    </div>\n  </div>\n  <mat-paginator\n    #paginator\n    [length]=\"dataSource.totalElements\"\n    [pageSize]=\"luxPageSize\"\n    [pageSizeOptions]=\"luxPageSizeOptions\"\n    [showFirstLastButtons]=\"true\"\n    [ngClass]=\"{ 'lux-hide': !luxShowPagination }\"\n    [ngClass.xs]=\"{ 'lux-paginator-xs': true, 'lux-hide': !luxShowPagination }\"\n    fxFlex=\"auto\"\n  >\n  </mat-paginator>\n</div>\n",
        providers: [{ provide: MatPaginatorIntl, useClass: LuxPaginatorIntl }],
        styles: ["@charset \"UTF-8\";lux-side-nav .lux-side-nav-item,lux-side-nav lux-link{box-sizing:border-box}lux-side-nav .lux-side-nav-item.lux-side-nav-item-selected,lux-side-nav lux-link.lux-side-nav-item-selected{background-color:rgba(112,141,170,.2)!important;position:relative;border-radius:4px}lux-side-nav .lux-side-nav-item.lux-side-nav-item-selected:after,lux-side-nav lux-link.lux-side-nav-item-selected:after{content:'';left:0;width:6px;top:0;bottom:0;position:absolute;border-left:6px solid #0073b3;border-radius:4px 0 0 4px}lux-side-nav .lux-side-nav-item button .mat-button-focus-overlay,lux-side-nav lux-link button .mat-button-focus-overlay{display:none}lux-side-nav .lux-side-nav-item button:focus,lux-side-nav lux-link button:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}lux-side-nav .lux-side-nav-item button:hover,lux-side-nav lux-link button:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-list{border:4px solid transparent}lux-list:focus{outline-width:0;border:4px solid rgba(112,141,170,.2)!important}lux-list lux-list-item:focus{outline-width:0}lux-list lux-list-item:focus mat-card{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}lux-list lux-list-item lux-card.lux-list-item-selected mat-card{background-color:rgba(112,141,170,.2)!important;position:relative;border-radius:4px}lux-list lux-list-item lux-card.lux-list-item-selected mat-card:after{content:'';left:0;width:6px;top:0;bottom:0;position:absolute;border-left:6px solid #0073b3;border-radius:4px 0 0 4px}lux-list lux-list-item lux-card mat-card{box-sizing:border-box}lux-list lux-list-item lux-card mat-card:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .lux-form-control-label>*{color:#335c85}lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .cdk-focused .mat-radio-container,lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .mat-checkbox-inner-container,lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .mat-slide-toggle-thumb{position:relative}lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .cdk-focused .mat-radio-container:after,lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .mat-checkbox-inner-container:after,lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .mat-slide-toggle-thumb:after{content:\"\";border:1px solid rgba(112,141,170,.2);background-color:rgba(112,141,170,.2);display:block;top:-4px;left:-4px;right:-4px;bottom:-4px;border-radius:15px;z-index:1;position:absolute}lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .lux-form-control-container:after{content:'';display:block;box-sizing:border-box;left:0;right:0;position:absolute;height:2px;border-bottom:2px solid #0073b3}lux-datepicker mat-datepicker-toggle button:focus:after{content:\"\";border:1px solid rgba(112,141,170,.2);background-color:rgba(112,141,170,.2);display:block;top:-4px;left:-4px;right:-4px;bottom:-4px;border-radius:15px;z-index:1;position:absolute}.lux-datepicker-panel .mat-calendar-header button .mat-button-focus-overlay,lux-datepicker mat-datepicker-toggle .mat-button-focus-overlay{display:none}.lux-datepicker-panel .mat-calendar-header button:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}.lux-datepicker-panel .mat-calendar-header button:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}.lux-datepicker-panel .mat-calendar-content td.mat-calendar-body-cell:hover>div{background-color:rgba(0,0,0,.2)!important;border-radius:999px}.lux-datepicker-panel .mat-calendar-content td.mat-calendar-body-cell.mat-calendar-body-active>div{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:999px}lux-table tr:hover>td,lux-table tr:hover>th{border-radius:0;background-color:#cfcfcf!important}lux-table th button.mat-sort-header-button:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}.lux-select-panel mat-option{border-left:0;box-sizing:border-box}.lux-select-panel mat-option.mat-selected{background-color:rgba(112,141,170,.2)!important;position:relative;border-radius:4px}.lux-select-panel mat-option.mat-selected:after{content:'';left:0;width:6px;top:0;bottom:0;position:absolute;border-left:6px solid #0073b3;border-radius:4px 0 0 4px}.lux-select-panel mat-option:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}.lux-select-panel mat-option.mat-active,.lux-select-panel mat-option:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-button button:not([disabled]) .mat-button-focus-overlay{display:none}lux-button button:not([disabled]):not(.mat-fab):not(.mat-raised-button):focus{background-color:rgba(112,141,170,.2)!important}lux-button button:not([disabled]):not(.mat-fab):not(.mat-raised-button):hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-button button:not([disabled]).mat-fab:focus,lux-button button:not([disabled]).mat-raised-button:focus{background-color:rgba(112,141,170,.2)!important}lux-button button:not([disabled]).mat-fab:focus.mat-accent,lux-button button:not([disabled]).mat-raised-button:focus.mat-accent{background-color:#b6d184!important}lux-button button:not([disabled]).mat-fab:focus.mat-warn,lux-button button:not([disabled]).mat-raised-button:focus.mat-warn{background-color:#ea2524!important}lux-button button:not([disabled]).mat-fab:focus.mat-primary,lux-button button:not([disabled]).mat-raised-button:focus.mat-primary{background-color:#4b82ba!important}.lux-autocomplete-panel mat-option{border-left:0;box-sizing:border-box}.lux-autocomplete-panel mat-option:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}.lux-autocomplete-panel mat-option.mat-active,.lux-autocomplete-panel mat-option:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-tabs mat-ink-bar{background-color:#0073b3!important}lux-tabs .mat-tab-label:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}lux-panel mat-expansion-panel-header:hover,lux-stepper mat-step-header:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-panel mat-expansion-panel-header:focus,lux-stepper mat-step-header:focus,lux-stepper mat-step-header[aria-selected=true],lux-tile mat-card:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}lux-master-detail lux-master-header .lux-master-header-collapse button.lux-button:not(.mat-fab):not(.mat-raised-button):focus{background-color:rgba(0,0,0,.2)!important}lux-file-list .lux-file-list{border:4px solid transparent}lux-file-list .lux-file-list:focus{outline-width:0;border:4px solid rgba(112,141,170,.2)!important}lux-file-list .lux-file-list .lux-file-list-entry{border:4px solid transparent}lux-file-list .lux-file-list .lux-file-list-entry:focus{outline-width:0;border:4px solid rgba(112,141,170,.2)!important}lux-file-list .lux-file-list mat-card{margin:4px}.lux-menu-panel .lux-menu-item:not([disabled=true]):focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}.lux-menu-panel .lux-menu-item:not([disabled=true]):hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-dialog-structure lux-dialog-content:focus,lux-dialog-structure lux-dialog-title:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}example-root .example-base-components-list .example-component-list-item,example-root .example-base-components-list mat-expansion-panel-header{box-sizing:border-box}example-root .example-base-components-list .example-component-list-item.example-component-list-item-selected,example-root .example-base-components-list mat-expansion-panel-header.example-component-list-item-selected{background-color:rgba(112,141,170,.2)!important;position:relative;border-radius:4px}example-root .example-base-components-list .example-component-list-item.example-component-list-item-selected:after,example-root .example-base-components-list mat-expansion-panel-header.example-component-list-item-selected:after{content:'';left:0;width:6px;top:0;bottom:0;position:absolute;border-left:6px solid #0073b3;border-radius:4px 0 0 4px}example-root .example-base-components-list .example-component-list-item:focus,example-root .example-base-components-list mat-expansion-panel-header:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}example-root .example-base-components-list .example-component-list-item:hover,example-root .example-base-components-list mat-expansion-panel-header:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}.lux-app-container,body,html{height:100%}.lux-app-container{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex}body{-webkit-overflow-scrolling:touch}div{font-family:Roboto,Helvetica Neue,sans-serif}.cdk-overlay-backdrop.cdk-overlay-backdrop-showing.lux-file-preview-backdrop{background:#000;opacity:.8!important}lux-card.lux-card-grow{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;width:400px;min-width:0}lux-card.lux-card-grow mat-card,lux-card.lux-card-grow mat-card-content{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0}.lux-crop{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.lux-label{color:rgba(0,0,0,.54);font-size:75%}.lux-hint{color:rgba(0,0,0,.6);font-size:12px}.lux-display-none{display:none}.lux-hidden{visibility:hidden}.lux-nowrap{white-space:nowrap}.lux-cursor{cursor:pointer}.lux-block-pointer-events{pointer-events:none}.lux-vertical-align-baseline{vertical-align:baseline!important}.lux-black-semi-transparent{color:rgba(0,0,0,.87)}.lux-semi-transparent{opacity:.6}.lux-overflow-y-hidden{overflow-y:hidden}.lux-overflow-y-auto{overflow-y:auto}.lux-overflow-wrap-break-word{overflow-wrap:break-word}.lux-bold{font-weight:700!important}.lux-uppercase{text-transform:uppercase!important}.lux-lowercase{text-transform:lowercase!important}.lux-hyphenate{overflow-wrap:break-word;word-wrap:break-word;word-break:normal;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow-x:auto}.lux-p-footer,.lux-p-header{padding:8px}.lux-snackbar{top:68px;right:8px;position:absolute;margin:0!important;min-width:unset!important;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-snack-bar-handset .lux-snackbar{left:8px;width:auto!important}.lux-mt-0{margin-top:0}.lux-pt-0{padding-top:0}.lux-mt-1{margin-top:2px}.lux-pt-1{padding-top:2px}.lux-mt-2{margin-top:4px}.lux-pt-2{padding-top:4px}.lux-mt-3{margin-top:8px}.lux-pt-3{padding-top:8px}.lux-mt-4{margin-top:16px}.lux-pt-4{padding-top:16px}.lux-mb-0{margin-bottom:0}.lux-pb-0{padding-bottom:0}.lux-mb-1{margin-bottom:2px}.lux-pb-1{padding-bottom:2px}.lux-mb-2{margin-bottom:4px}.lux-pb-2{padding-bottom:4px}.lux-mb-3{margin-bottom:8px}.lux-pb-3{padding-bottom:8px}.lux-mb-4{margin-bottom:16px}.lux-pb-4{padding-bottom:16px}.lux-ml-0{margin-left:0}.lux-pl-0{padding-left:0}.lux-ml-1{margin-left:2px}.lux-pl-1{padding-left:2px}.lux-ml-2{margin-left:4px}.lux-pl-2{padding-left:4px}.lux-ml-3{margin-left:8px}.lux-pl-3{padding-left:8px}.lux-ml-4{margin-left:16px}.lux-pl-4{padding-left:16px}.lux-m-0{margin:0}.lux-mr-0{margin-right:0}.lux-p-0{padding:0}.lux-pr-0{padding-right:0}.lux-m-1{margin:2px}.lux-mr-1{margin-right:2px}.lux-p-1{padding:2px}.lux-pr-1{padding-right:2px}.lux-m-2{margin:4px}.lux-mr-2{margin-right:4px}.lux-p-2{padding:4px}.lux-pr-2{padding-right:4px}.lux-m-3{margin:8px}.lux-mr-3{margin-right:8px}.lux-p-3{padding:8px}.lux-pr-3{padding-right:8px}.lux-m-4{margin:16px}.lux-mr-4{margin-right:16px}.lux-p-4{padding:16px}.lux-pr-4{padding-right:16px}.lux-flex-layout-gap-10[style*=row]>:not(:last-child){margin-right:10px}.lux-flex-layout-gap-10[style*=column]>:not(:last-child){margin-bottom:10px}.lux-flex-layout-gap-20[style*=row]>:not(:last-child){margin-right:20px}.lux-flex-layout-gap-20[style*=column]>:not(:last-child){margin-bottom:20px}.lux-flex-layout-gap-30[style*=row]>:not(:last-child){margin-right:30px}.lux-flex-layout-gap-30[style*=column]>:not(:last-child){margin-bottom:30px}.lux-z-index-100{z-index:100}.lux-z-index-500{z-index:500}.lux-z-index-1000{z-index:1000}.lux-uppercase>lux-button .lux-button-label,lux-button.lux-uppercase .lux-button-label{text-transform:uppercase}.lux-bg-color-red{background:#b01211}.lux-bg-color-green{background:#95bc4c}.lux-bg-color-yellow{background:#ebc000}.lux-bg-color-blue{background:#335c85}.lux-bg-color-gray{background:#c8c8c8}.lux-bg-color-orange{background:#ec9c1b}.lux-bg-color-brown{background:#783f04}.lux-font-color-black{color:#000}.lux-font-color-white{color:#fff}.lux-badge-notification.mat-badge-large .mat-badge-content{font-size:15px}.lux-badge-notification.lux-badge-color-default .mat-badge-content{color:#000;background:#fff;border:1px solid rgba(0,0,0,.87)}lux-progress ::ng-deep mat-progress-bar{margin-bottom:8px}.lux-row-selected{background-color:rgba(112,141,170,.2)!important}:host{display:block;height:100%}:host>div{padding-bottom:8px}.lux-table{height:100%}.lux-table .lux-table-content{position:relative;overflow:auto;height:100%;width:100%}.lux-table .lux-table-content table{width:100%}.lux-table .lux-table-content table td.mat-table-sticky{z-index:103!important}.lux-table .lux-table-content table td:not(.mat-table-sticky){z-index:97!important}.lux-table .lux-table-content table td.mat-header-cell{z-index:103!important}.lux-table .lux-table-content table ::ng-deep tfoot td.mat-table-sticky:first-of-type{z-index:105!important}.lux-table .lux-table-content table th{vertical-align:top;height:30px}.lux-table .lux-table-content table .lux-table-header-no-data th{height:30px;vertical-align:middle}.lux-table .lux-table-content table td,.lux-table .lux-table-content table th{padding:8px}.lux-table .lux-table-content table td.lux-multiselect-td+td,.lux-table .lux-table-content table td.lux-multiselect-tf+td,.lux-table .lux-table-content table th.lux-multiselect-th+th{padding-left:16px}.lux-table .lux-table-content table ::ng-deep tr.mat-header-row{height:auto}.lux-table .lux-table-content table .lux-moved-header-title{font-size:12px;margin-top:4px}.lux-table .lux-table-content table .lux-moved-header-title:first-of-type{margin-top:8px}.lux-table .lux-table-content table td.mat-cell:last-of-type,.lux-table .lux-table-content table td.mat-footer-cell:last-of-type,.lux-table .lux-table-content table th.mat-header-cell:last-of-type{padding-right:0}.lux-table .lux-table-content table ::ng-deep tbody tr:last-of-type td{border-bottom:none}.lux-table .lux-table-content table .mat-footer-row>td{border-top:1px solid rgba(0,0,0,.12)}.lux-table .lux-table-content .lux-table-header-blocked{pointer-events:none}.lux-table.lux-hide-borders .lux-multiselect-td,.lux-table.lux-hide-borders .lux-multiselect-tf,.lux-table.lux-hide-borders td,.lux-table.lux-hide-borders th{border:unset!important}.lux-table th.lux-table-column-header-empty{display:none}.lux-table-overlay{-webkit-transition:opacity 1s;transition:opacity 1s;position:absolute}.lux-table-overlay-active{pointer-events:none;z-index:1003;left:0;right:0;top:0;bottom:0;opacity:0}.lux-table-ie mat-cell,.lux-table-ie mat-header-cell{height:1em}.lux-hide{display:none!important}.lux-multiselect-td,.lux-multiselect-tf,.lux-multiselect-th{max-width:70px;min-width:70px;width:70px;padding-right:6px;margin-right:6px}.lux-multiselect-td lux-checkbox,.lux-multiselect-tf lux-checkbox,.lux-multiselect-th lux-checkbox{pointer-events:none}.lux-multiselect-td lux-checkbox ::ng-deep .lux-form-control-label,.lux-multiselect-tf lux-checkbox ::ng-deep .lux-form-control-label,.lux-multiselect-th lux-checkbox ::ng-deep .lux-form-control-label{display:none}.lux-multiselect-td ::ng-deep .lux-form-field,.lux-multiselect-tf ::ng-deep .lux-form-field,.lux-multiselect-th ::ng-deep .lux-form-field{margin-bottom:0}.lux-multiselect-td+td,.lux-multiselect-td+th,.lux-multiselect-tf+td,.lux-multiselect-tf+th,.lux-multiselect-th+td,.lux-multiselect-th+th{padding-left:6px}.lux-multiselect-th{padding-left:6px!important;width:1%!important}.lux-multiselect-th span{text-align:start}.lux-multiselect-td,.lux-multiselect-tf:not(.lux-ignore-multiselect-tf){border-right:1px solid rgba(0,0,0,.12)}.lux-multiselect-field{cursor:pointer}.lux-table-header-no-data th{border:unset!important}.lux-multiselect-toggle-all-wrapper{position:relative}::ng-deep .lux-multiselect-toggle ::ng-deep .lux-form-control-label,::ng-deep .lux-multiselect-toggle-all ::ng-deep .lux-form-control-label{display:none}.lux-paginator-xs:not(.lux-hide) ::ng-deep .mat-paginator-container{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.lux-paginator-xs:not(.lux-hide) ::ng-deep .mat-paginator-range-actions{display:block;margin-top:10px}.lux-paginator-xs:not(.lux-hide) ::ng-deep .mat-paginator-range-actions button:first-of-type{margin-left:-10px}.lux-paginator-xs:not(.lux-hide) ::ng-deep .mat-paginator-range-label{margin:0}.lux-table-filter{display:block}.lux-aria-visible{position:absolute;font-size:0;color:transparent;width:0;height:0}"]
    }),
    tslib_1.__metadata("design:paramtypes", [LuxMediaQueryObserverService,
        LuxConsoleService,
        LiveAnnouncer])
], LuxTableComponent);
export { LuxTableComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibHV4LXRhYmxlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BpaGstZ2ZpL2x1eC1jb21wb25lbnRzLyIsInNvdXJjZXMiOlsic3JjL2FwcC9tb2R1bGVzL2x1eC1jb21tb24vbHV4LXRhYmxlL2x1eC10YWJsZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxpQ0FBaUM7QUFDakMsT0FBTyxFQUVMLFNBQVMsRUFDVCxlQUFlLEVBRWYsVUFBVSxFQUNWLFlBQVksRUFDWixLQUFLLEVBR0wsTUFBTSxFQUNOLFNBQVMsRUFDVCxTQUFTLEVBQ1YsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLFlBQVksRUFBRSxnQkFBZ0IsRUFBRSxPQUFPLEVBQVEsTUFBTSxtQkFBbUIsQ0FBQztBQUVsRixPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUc3RCxPQUFPLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBZ0IsTUFBTSxNQUFNLENBQUM7QUFDakQsT0FBTyxFQUFFLFVBQVUsRUFBRSxZQUFZLEVBQUUsb0JBQW9CLEVBQUUsR0FBRyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDckYsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQ2xELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLG1DQUFtQyxDQUFDO0FBQ3JFLE9BQU8sRUFBRSw0QkFBNEIsRUFBRSxNQUFNLGlEQUFpRCxDQUFDO0FBQy9GLE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxNQUFNLHNEQUFzRCxDQUFDO0FBQy9GLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLG9DQUFvQyxDQUFDO0FBQ3ZFLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQVFsRCxJQUFhLGlCQUFpQix5QkFBOUIsTUFBYSxpQkFBaUI7SUE2TTVCLFlBQVk7SUFFWixZQUNVLGFBQTJDLEVBQzNDLFVBQTZCLEVBQzdCLGFB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QUFSLEtBQUssRUFBRTs7O3VEQVlQO0FBYVE7SUFBUixLQUFLLEVBQUU7c0NBQTJCLEdBQUc7NkNBQUgsR0FBRztvREFVckM7QUFRUTtJQUFSLEtBQUssRUFBRTs7O3FEQUVQO0FBT1E7SUFBUixLQUFLLEVBQUU7Ozt1REFFUDtBQTlLVSxpQkFBaUI7SUFON0IsU0FBUyxDQUFDO1FBQ1QsUUFBUSxFQUFFLFdBQVc7UUFDckIseW5TQUF5QztRQUV6QyxTQUFTLEVBQUUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsZ0JBQWdCLEVBQUUsQ0FBQzs7S0FDdkUsQ0FBQzs2Q0FpTnlCLDRCQUE0QjtRQUMvQixpQkFBaUI7UUFDZCxhQUFhO0dBbE4zQixpQkFBaUIsQ0EydEI3QjtTQTN0QlksaUJBQWlCIiwic291cmNlc0NvbnRlbnQiOlsiLy8gdHNsaW50OmRpc2FibGU6bWVtYmVyLW9yZGVyaW5nXG5pbXBvcnQge1xuICBBZnRlclZpZXdJbml0LFxuICBDb21wb25lbnQsXG4gIENvbnRlbnRDaGlsZHJlbixcbiAgRG9DaGVjayxcbiAgRWxlbWVudFJlZixcbiAgRXZlbnRFbWl0dGVyLFxuICBJbnB1dCxcbiAgT25EZXN0cm95LFxuICBPbkluaXQsXG4gIE91dHB1dCxcbiAgUXVlcnlMaXN0LFxuICBWaWV3Q2hpbGRcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBNYXRQYWdpbmF0b3IsIE1hdFBhZ2luYXRvckludGwsIE1hdFNvcnQsIFNvcnQgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbCc7XG5pbXBvcnQgeyBJQ3VzdG9tQ1NTQ29uZmlnIH0gZnJvbSAnLi9sdXgtdGFibGUtY3VzdG9tLWNzcy1jb25maWcuaW50ZXJmYWNlJztcbmltcG9ydCB7IEx1eFRhYmxlRGF0YVNvdXJjZSB9IGZyb20gJy4vbHV4LXRhYmxlLWRhdGEtc291cmNlJztcbmltcG9ydCB7IElMdXhUYWJsZUh0dHBEYW9TdHJ1Y3R1cmUgfSBmcm9tICcuL2x1eC10YWJsZS1odHRwL2x1eC10YWJsZS1odHRwLWRhby1zdHJ1Y3R1cmUuaW50ZXJmYWNlJztcbmltcG9ydCB7IElMdXhUYWJsZUh0dHBEYW8gfSBmcm9tICcuL2x1eC10YWJsZS1odHRwL2x1eC10YWJsZS1odHRwLWRhby5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgb2YsIFN1YmplY3QsIFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgY2F0Y2hFcnJvciwgZGVib3VuY2VUaW1lLCBkaXN0aW5jdFVudGlsQ2hhbmdlZCwgdGFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgTHV4VXRpbCB9IGZyb20gJy4uLy4uL2x1eC11dGlsL2x1eC11dGlsJztcbmltcG9ydCB7IEx1eFBhZ2luYXRvckludGwgfSBmcm9tICcuLi8uLi9sdXgtdXRpbC9sdXgtcGFnaW5hdG9yLWludGwnO1xuaW1wb3J0IHsgTHV4TWVkaWFRdWVyeU9ic2VydmVyU2VydmljZSB9IGZyb20gJy4uLy4uL2x1eC11dGlsL2x1eC1tZWRpYS1xdWVyeS1vYnNlcnZlci5zZXJ2aWNlJztcbmltcG9ydCB7IEx1eFRhYmxlQ29sdW1uQ29tcG9uZW50IH0gZnJvbSAnLi9sdXgtdGFibGUtc3ViY29tcG9uZW50cy9sdXgtdGFibGUtY29sdW1uLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBMdXhDb25zb2xlU2VydmljZSB9IGZyb20gJy4uLy4uL2x1eC11dGlsL2x1eC1jb25zb2xlLnNlcnZpY2UnO1xuaW1wb3J0IHsgTGl2ZUFubm91bmNlciB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9hMTF5JztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbHV4LXRhYmxlJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2x1eC10YWJsZS5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2x1eC10YWJsZS5jb21wb25lbnQuc2NzcyddLFxuICBwcm92aWRlcnM6IFt7IHByb3ZpZGU6IE1hdFBhZ2luYXRvckludGwsIHVzZUNsYXNzOiBMdXhQYWdpbmF0b3JJbnRsIH1dXG59KVxuZXhwb3J0IGNsYXNzIEx1eFRhYmxlQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0LCBEb0NoZWNrLCBPbkRlc3Ryb3kge1xuICBzdGF0aWMgQVVUT19QQUdJTkFUSU9OX1NUQVJUOiBudW1iZXIgPSAxMDA7IC8vIDEwMCBFbGVtZW50ZSBiaXMgYXV0b21hdGlzY2ggZGllIFBhZ2luYXRpb24gYWt0aXZpZXJ0IHdpcmRcblxuICBwcml2YXRlIF9sdXhDbGFzc2VzOiBJQ3VzdG9tQ1NTQ29uZmlnIHwgSUN1c3RvbUNTU0NvbmZpZ1tdID0gW107XG4gIHByaXZhdGUgX2x1eFNob3dQYWdpbmF0aW9uOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgX2RhdGFDb2x1bW5EZWZzOiBzdHJpbmdbXSA9IFtdO1xuICBwcml2YXRlIF9sdXhNdWx0aVNlbGVjdDogYm9vbGVhbjtcbiAgcHJpdmF0ZSBfbHV4U2hvd0ZpbHRlcjogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIF9kYXRhU291cmNlOiBMdXhUYWJsZURhdGFTb3VyY2U8YW55PiA9IG5ldyBMdXhUYWJsZURhdGFTb3VyY2U8YW55PihbXSk7XG4gIHByaXZhdGUgX2x1eFBpY2tWYWx1ZSA9IG8gPT4gbztcbiAgcHJpdmF0ZSBfbHV4Q29tcGFyZVdpdGggPSAobzEsIG8yKSA9PiBvMSA9PT0gbzI7XG5cbiAgcHJpdmF0ZSBwcmV2aW91c1dpZHRoOiBudW1iZXI7XG4gIHByaXZhdGUgcHJldmlvdXNIZWlnaHQ6IG51bWJlcjtcbiAgcHJpdmF0ZSBodHRwUmVxdWVzdENvbmY6IHsgcGFnZT87IHBhZ2VTaXplPzsgZmlsdGVyPzsgc29ydD87IG9yZGVyPyB9ID0ge307XG5cbiAgcHJpdmF0ZSBtZWRpYVF1ZXJ5U3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XG4gIHByaXZhdGUgaHR0cERhb1N1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xuICBwcml2YXRlIGZpbHRlckNoYW5nZWRTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcbiAgcHJpdmF0ZSBjb2x1bW5TdWJzY3JpcHRpb25zOiBTdWJzY3JpcHRpb25bXSA9IFtdO1xuICBwcml2YXRlIHRhYmxlQ29sdW1uc0NoYW5nZWRTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcbiAgcHJpdmF0ZSBzb3J0Q2hhbmdlZFN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xuICBwcml2YXRlIHBhZ2luYXRvclBhZ2VTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcbiAgcHJpdmF0ZSBzZWxlY3RlZFN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xuXG4gIGZpbHRlcmVkJDogU3ViamVjdDxzdHJpbmc+ID0gbmV3IFN1YmplY3Q8c3RyaW5nPigpO1xuICBjdXJyZW50Q3VzdG9tQ2xhc3NlczogeyBlbnRyeTogYW55OyBjbGFzc2VzOiBzdHJpbmcgfVtdID0gW107XG4gIGlzTG9hZGluZ1Jlc3VsdHM6IGJvb2xlYW47XG4gIGlzSUU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgYWxsU2VsZWN0ZWQ6IGJvb2xlYW47XG4gIG1lZGlhUXVlcnk6IHN0cmluZztcbiAgbW92ZWRUYWJsZUNvbHVtbnM6IEx1eFRhYmxlQ29sdW1uQ29tcG9uZW50W10gPSBbXTtcbiAgdGFibGVNaW5XaWR0aDogc3RyaW5nO1xuICB0YWJsZUhlaWdodENTU0NhbGM6IHN0cmluZztcblxuICBASW5wdXQoKSBsdXhDb2xXaWR0aHNQZXJjZW50OiBudW1iZXJbXSA9IFtdO1xuICBASW5wdXQoKSBsdXhGaWx0ZXJUZXh0OiBzdHJpbmcgPSAnRmlsdGVyJztcbiAgQElucHV0KCkgbHV4Tm9EYXRhVGV4dDogc3RyaW5nID0gJ0tlaW5lIERhdGVuIGdlZnVuZGVuLic7XG4gIEBJbnB1dCgpIGx1eFBhZ2VTaXplOiBudW1iZXIgPSAxMDtcbiAgQElucHV0KCkgbHV4UGFnZVNpemVPcHRpb25zID0gWzUsIDEwLCAyNSwgNTBdO1xuICBASW5wdXQoKSBsdXhIdHRwREFPOiBJTHV4VGFibGVIdHRwRGFvO1xuICBASW5wdXQoKSBsdXhNaW5XaWR0aFB4OiBudW1iZXIgPSAtMTtcbiAgQElucHV0KCkgbHV4QXV0b1BhZ2luYXRlOiBib29sZWFuID0gdHJ1ZTtcbiAgQElucHV0KCkgbHV4SGlkZUJvcmRlcnM6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBAT3V0cHV0KCkgbHV4U2VsZWN0ZWRDaGFuZ2U6IEV2ZW50RW1pdHRlcjxhbnlbXT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueVtdPigpO1xuXG4gIEBWaWV3Q2hpbGQoTWF0UGFnaW5hdG9yLCB7IHN0YXRpYzogdHJ1ZSB9KSBwYWdpbmF0b3I6IE1hdFBhZ2luYXRvcjtcbiAgQFZpZXdDaGlsZChNYXRTb3J0LCB7IHN0YXRpYzogdHJ1ZSB9KSBzb3J0OiBNYXRTb3J0O1xuICBAVmlld0NoaWxkKCdwYWdpbmF0b3InLCB7IHJlYWQ6IEVsZW1lbnRSZWYsIHN0YXRpYzogdHJ1ZSB9KSBwYWdpbmF0b3JFbGVtZW50OiBFbGVtZW50UmVmO1xuICBAVmlld0NoaWxkKCdmaWx0ZXInLCB7IHJlYWQ6IEVsZW1lbnRSZWYsIHN0YXRpYzogdHJ1ZSB9KSBmaWx0ZXJFbGVtZW50OiBFbGVtZW50UmVmO1xuICBAVmlld0NoaWxkKCd0YWJsZUNvbnRhaW5lcicsIHsgcmVhZDogRWxlbWVudFJlZiwgc3RhdGljOiB0cnVlIH0pIHRhYmxlQ29udGFpbmVyRWxlbWVudDogRWxlbWVudFJlZjtcbiAgQENvbnRlbnRDaGlsZHJlbihMdXhUYWJsZUNvbHVtbkNvbXBvbmVudCkgdGFibGVDb2x1bW5zOiBRdWVyeUxpc3Q8THV4VGFibGVDb2x1bW5Db21wb25lbnQ+O1xuXG4gIC8vIHJlZ2lvbiBTZXR0ZXIvR2V0dGVyc1xuICBnZXQgbHV4Q2xhc3NlcygpOiBJQ3VzdG9tQ1NTQ29uZmlnIHwgSUN1c3RvbUNTU0NvbmZpZ1tdIHtcbiAgICByZXR1cm4gdGhpcy5fbHV4Q2xhc3NlcztcbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBsdXhDbGFzc2VzKGNsYXNzZXM6IElDdXN0b21DU1NDb25maWcgfCBJQ3VzdG9tQ1NTQ29uZmlnW10pIHtcbiAgICBpZiAoY2xhc3NlcyAmJiAhQXJyYXkuaXNBcnJheShjbGFzc2VzKSkge1xuICAgICAgY2xhc3NlcyA9IFtjbGFzc2VzXTtcbiAgICB9XG5cbiAgICB0aGlzLl9sdXhDbGFzc2VzID0gY2xhc3NlcztcbiAgICB0aGlzLmluc2VydEN1c3RvbUNTU0NsYXNzZXMoKTtcbiAgfVxuXG4gIGdldCBsdXhTaG93UGFnaW5hdGlvbigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fbHV4U2hvd1BhZ2luYXRpb247XG4gIH1cblxuICBASW5wdXQoKSBzZXQgbHV4U2hvd1BhZ2luYXRpb24oc2hvdzogYm9vbGVhbikge1xuICAgIHRoaXMuX2x1eFNob3dQYWdpbmF0aW9uID0gc2hvdztcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuaGFuZGxlUGFnaW5hdGlvbigpO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0IGx1eFNob3dGaWx0ZXIoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2x1eFNob3dGaWx0ZXI7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgbHV4U2hvd0ZpbHRlcihzaG93OiBib29sZWFuKSB7XG4gICAgdGhpcy5fbHV4U2hvd0ZpbHRlciA9IHNob3c7XG4gICAgdGhpcy5oYW5kbGVGaWx0ZXIoKTtcbiAgfVxuXG4gIGdldCBkYXRhQ29sdW1uRGVmcygpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGFDb2x1bW5EZWZzO1xuICB9XG5cbiAgZ2V0IGRhdGFTb3VyY2UoKTogTHV4VGFibGVEYXRhU291cmNlPGFueT4ge1xuICAgIHJldHVybiB0aGlzLl9kYXRhU291cmNlO1xuICB9XG5cbiAgZ2V0IGx1eERhdGEoKTogYW55W10ge1xuICAgIHJldHVybiB0aGlzLmRhdGFTb3VyY2UuZGF0YTtcbiAgfVxuXG4gIEBJbnB1dCgpXG4gIHNldCBsdXhEYXRhKGRhdGE6IGFueVtdKSB7XG4gICAgZGF0YSA9IGRhdGEgPyBkYXRhIDogW107XG4gICAgdGhpcy5kYXRhU291cmNlLmRhdGEgPSBkYXRhO1xuICAgIGlmICh0aGlzLmRhdGFTb3VyY2UpIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLnVwZGF0ZURhdGFTb3VyY2VBdHRyaWJ1dGVzKGRhdGEpO1xuICAgICAgICB0aGlzLmhhbmRsZVNvcnQoKTtcbiAgICAgICAgdGhpcy5pbnNlcnRDdXN0b21DU1NDbGFzc2VzKCk7XG4gICAgICAgIHRoaXMudXBkYXRlQ29sdW1uc0J5TWVkaWFRdWVyeSgpO1xuICAgICAgICB0aGlzLmNhbGN1bGF0ZVByb3BvcnRpb25zKCk7XG4gICAgICAgIHRoaXMudXBkYXRlU2VsZWN0aW9uKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBnZXQgbHV4TXVsdGlTZWxlY3QoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2x1eE11bHRpU2VsZWN0O1xuICB9XG5cbiAgQElucHV0KCkgc2V0IGx1eE11bHRpU2VsZWN0KG11bHRpU2VsZWN0OiBib29sZWFuKSB7XG4gICAgdGhpcy5fbHV4TXVsdGlTZWxlY3QgPSBtdWx0aVNlbGVjdDtcbiAgICBpZiAodGhpcy5sdXhNdWx0aVNlbGVjdCkge1xuICAgICAgdGhpcy5sdXhTZWxlY3RlZC5jbGVhcigpO1xuICAgICAgdGhpcy5fZGF0YUNvbHVtbkRlZnMudW5zaGlmdCgnbXVsdGlTZWxlY3QnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZGF0YUNvbHVtbkRlZnMgPSB0aGlzLl9kYXRhQ29sdW1uRGVmcy5maWx0ZXIoKGNvbDogc3RyaW5nKSA9PiBjb2wgIT09ICdtdWx0aVNlbGVjdCcpO1xuICAgIH1cblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5jYWxjdWxhdGVQcm9wb3J0aW9ucygpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBfbHV4U2VsZWN0ZWQ6IFNldDxhbnk+ID0gbmV3IFNldCgpO1xuXG4gIGdldCBsdXhTZWxlY3RlZCgpOiBTZXQ8YW55PiB7XG4gICAgcmV0dXJuIHRoaXMuX2x1eFNlbGVjdGVkO1xuICB9XG5cbiAgLyoqXG4gICAqIERpZSBBdXN3YWhsIGRlciBTZWxla3RpZXJ0ZW4gRWxlbWVudGUgaXN0IGVpZ2VudGxpY2ggZWluIFNldCxcbiAgICogbmltbXQgYWJlciBBcnJheXMgdm9uIEF1w59lbiBlbnRnZWdlbiAoenVyIFZlcmVpbmZhY2h1bmcpLlxuICAgKiBAcGFyYW0gc2VsZWN0ZWRcbiAgICovXG4gIEBJbnB1dCgpIHNldCBsdXhTZWxlY3RlZChzZWxlY3RlZDogU2V0PGFueT4pIHtcbiAgICB0aGlzLmx1eFNlbGVjdGVkLmNsZWFyKCk7XG4gICAgaWYgKHNlbGVjdGVkKSB7XG4gICAgICBzZWxlY3RlZC5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICAgICAgdGhpcy5sdXhTZWxlY3RlZC5hZGQoZW50cnkpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh0aGlzLmx1eERhdGEgJiYgdGhpcy5sdXhEYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMudXBkYXRlU2VsZWN0aW9uKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGx1eFBpY2tWYWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fbHV4UGlja1ZhbHVlO1xuICB9XG5cbiAgLy8gRnVua3Rpb24sIHVtIGRlbiB6dSB2ZXJnbGVpY2hlbmRlbiBXZXJ0IGF1cyBkZW4gZWluemVsbmVuIE9iamVrdGVuIHp1IHppZWhlbi5cbiAgLy8gU3RhbmRhcmRtw6TDn2lnIGVpbmZhY2ggZGFzIE9iamVrdCB6dXLDvGNrZ2ViZW4uXG4gIEBJbnB1dCgpIHNldCBsdXhQaWNrVmFsdWUocGlja0ZuKSB7XG4gICAgdGhpcy5fbHV4UGlja1ZhbHVlID0gcGlja0ZuID8gcGlja0ZuIDogbyA9PiBvO1xuICB9XG5cbiAgZ2V0IGx1eENvbXBhcmVXaXRoKCkge1xuICAgIHJldHVybiB0aGlzLl9sdXhDb21wYXJlV2l0aDtcbiAgfVxuXG4gIC8vIFZlcmdsZWljaHNmdW5rdGlvbjsgdmVyZ2xlaWNodCBzdGFuZGFyZG3DpMOfaWcgZWluZmFjaCBkaWUgUmVmZXJlbnplbiBkZXIgYmVpZGVuIE9iamVrdGUuXG4gIEBJbnB1dCgpIHNldCBsdXhDb21wYXJlV2l0aChjb21wYXJlRm4pIHtcbiAgICB0aGlzLl9sdXhDb21wYXJlV2l0aCA9IGNvbXBhcmVGbiA/IGNvbXBhcmVGbiA6IChvMSwgbzIpID0+IG8xID09PSBvMjtcbiAgfVxuXG4gIC8qKlxuICAgKiBFaWdlbmUgSW1wbGVtZW50aWVydW5nIGRlciBGaWx0ZXJ1bmcgZsO8ciBkaWVzZSBUYWJlbGxlLlxuICAgKiBJdGVyaWVydCDDvGJlciBkaWUgVmFsdWVzIGRlcyBlaW56ZWxuZW4gT2JqZWt0ZXMgdW5kIHByw7xmdCBkYW5uIG9iIGRlciBGaWx0ZXItV2VydCBpcmdlbmR3byB2b3Jrb21tdC5cbiAgICogQHBhcmFtIGRhdGFcbiAgICogQHBhcmFtIGZpbHRlclxuICAgKi9cbiAgcHJpdmF0ZSBjdXN0b21GaWx0ZXJQcmVkaWNhdGUgPSAoZGF0YTogYW55LCBmaWx0ZXI6IHN0cmluZyA9ICcnKSA9PiB7XG4gICAgZm9yIChjb25zdCBwcm9wZXJ0eSBpbiBkYXRhKSB7XG4gICAgICBpZiAoZGF0YS5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eSkpIHtcbiAgICAgICAgY29uc3QgZGF0YUVudHJ5ID0gZGF0YVtwcm9wZXJ0eV07XG4gICAgICAgIGlmIChMdXhVdGlsLmlzRGF0ZShkYXRhRW50cnkpKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgZGF0YUVudHJ5XG4gICAgICAgICAgICAgIC50b0xvY2FsZVN0cmluZygpXG4gICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgIC5pbmRleE9mKGZpbHRlcikgPiAtMVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICgoZGF0YUVudHJ5ICsgJycpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihmaWx0ZXIpID4gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgLy8gZW5kcmVnaW9uXG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBxdWVyeU9ic2VydmVyOiBMdXhNZWRpYVF1ZXJ5T2JzZXJ2ZXJTZXJ2aWNlLFxuICAgIHByaXZhdGUgbHV4Q29uc29sZTogTHV4Q29uc29sZVNlcnZpY2UsXG4gICAgcHJpdmF0ZSBsaXZlQW5ub3VuY2VyOiBMaXZlQW5ub3VuY2VyXG4gICkge1xuICAgIC8vIERhdGFzb3VyY2UgdW0gZWlnZW5lIEZpbHRlci1GdW5rdGlvbmFsaXRhZXQgZXJnYWVuemVuXG4gICAgdGhpcy5kYXRhU291cmNlLmZpbHRlclByZWRpY2F0ZSA9IHRoaXMuY3VzdG9tRmlsdGVyUHJlZGljYXRlO1xuXG4gICAgdGhpcy5pc0lFID0gTHV4VXRpbC5pc0lFb3JFZGdlKCk7XG5cbiAgICB0aGlzLm1lZGlhUXVlcnlTdWJzY3JpcHRpb24gPSB0aGlzLnF1ZXJ5T2JzZXJ2ZXIuZ2V0TWVkaWFRdWVyeUNoYW5nZWRBc09ic2VydmFibGUoKS5zdWJzY3JpYmUoKHF1ZXJ5OiBzdHJpbmcpID0+IHtcbiAgICAgIHRoaXMubWVkaWFRdWVyeSA9IHF1ZXJ5O1xuICAgICAgdGhpcy51cGRhdGVDb2x1bW5zQnlNZWRpYVF1ZXJ5KCk7XG4gICAgfSk7XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmICh0aGlzLmx1eEh0dHBEQU8pIHtcbiAgICAgICAgdGhpcy5sb2FkSHR0cERBT0RhdGEoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudXBkYXRlRGF0YVNvdXJjZUF0dHJpYnV0ZXModGhpcy5sdXhEYXRhKTtcbiAgICAgICAgdGhpcy5oYW5kbGVTb3J0KCk7XG4gICAgICAgIHRoaXMuaW5zZXJ0Q3VzdG9tQ1NTQ2xhc3NlcygpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgIGlmICh0aGlzLnRhYmxlQ29sdW1ucykge1xuICAgICAgLy8gRsO8ciBkZW4gRmFsbCBkYXMgU3BhbHRlbiB3ZWdmYWxsZW4vZGF6dSBrb21tZW5cbiAgICAgIHRoaXMudGFibGVDb2x1bW5zQ2hhbmdlZFN1YnNjcmlwdGlvbiA9IHRoaXMudGFibGVDb2x1bW5zLmNoYW5nZXMuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgdGhpcy51cGRhdGVDb2x1bW5zQnlNZWRpYVF1ZXJ5KCk7XG4gICAgICAgIHRoaXMudXBkYXRlQ29sdW1uU3Vic2NyaXB0aW9ucygpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEbDvHIgZGVuIEZhbGwgZGFzIHNpY2ggw4RuZGVydW5nZW4gaW5uZXJoYWxiIGRlciBTcGFsdGVuIGVyZ2ViZW5cbiAgICAgIHRoaXMudXBkYXRlQ29sdW1uU3Vic2NyaXB0aW9ucygpO1xuXG4gICAgICAvLyBOYWNoIGRlbSBJbml0IHNvbGx0ZW4gZWlubWFsIGRpZSBTcGFsdGVuIGFrdHVhbGlzaWVydCB3ZXJkZW5cbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLnVwZGF0ZUNvbHVtbnNCeU1lZGlhUXVlcnkoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmx1eFNob3dQYWdpbmF0aW9uKSB7XG4gICAgICB0aGlzLmhhbmRsZVBhZ2luYXRpb24oKTtcbiAgICB9XG4gIH1cblxuICBuZ0RvQ2hlY2soKSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy50YWJsZUNvbnRhaW5lckVsZW1lbnQubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aCAhPT0gdGhpcy5wcmV2aW91c1dpZHRoIHx8XG4gICAgICB0aGlzLnRhYmxlQ29udGFpbmVyRWxlbWVudC5uYXRpdmVFbGVtZW50Lm9mZnNldEhlaWdodCAhPT0gdGhpcy5wcmV2aW91c0hlaWdodFxuICAgICkge1xuICAgICAgdGhpcy5wcmV2aW91c1dpZHRoID0gdGhpcy50YWJsZUNvbnRhaW5lckVsZW1lbnQubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgICAgIHRoaXMucHJldmlvdXNIZWlnaHQgPSB0aGlzLnRhYmxlQ29udGFpbmVyRWxlbWVudC5uYXRpdmVFbGVtZW50Lm9mZnNldEhlaWdodDtcblxuICAgICAgdGhpcy5jYWxjdWxhdGVQcm9wb3J0aW9ucygpO1xuICAgIH1cbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICAgIC8vIFN1YnNjcmlwdGlvbnMgYXVmbMO2c2VuXG4gICAgdGhpcy5jb2x1bW5TdWJzY3JpcHRpb25zLmZvckVhY2goKHN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uKSA9PiB7XG4gICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICB9KTtcbiAgICBpZiAodGhpcy5odHRwRGFvU3Vic2NyaXB0aW9uKSB7XG4gICAgICB0aGlzLmh0dHBEYW9TdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuZmlsdGVyQ2hhbmdlZFN1YnNjcmlwdGlvbikge1xuICAgICAgdGhpcy5maWx0ZXJDaGFuZ2VkU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLnRhYmxlQ29sdW1uc0NoYW5nZWRTdWJzY3JpcHRpb24pIHtcbiAgICAgIHRoaXMudGFibGVDb2x1bW5zQ2hhbmdlZFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5zb3J0Q2hhbmdlZFN1YnNjcmlwdGlvbikge1xuICAgICAgdGhpcy5zb3J0Q2hhbmdlZFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5wYWdpbmF0b3JQYWdlU3Vic2NyaXB0aW9uKSB7XG4gICAgICB0aGlzLnBhZ2luYXRvclBhZ2VTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRTdWJzY3JpcHRpb24pIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWRTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogWmllaHQgc2ljaCBkaWUgYWt0dWVsbGVuIENTUy1LbGFzc2VuIGF1cyBkZW4genVnZXdpZXNlbmVuXG4gICAqIENTUy1LbGFzc2VuLlxuICAgKiBAcGFyYW0gcm93XG4gICAqIEByZXR1cm5zIHN0cmluZ1xuICAgKi9cbiAgZ2V0Q3VzdG9tQ2xhc3Nlc0ZvckluZGV4KHJvdzogYW55KTogc3RyaW5nIHtcbiAgICBjb25zdCBjdXN0b21DbGFzc2VzID0gdGhpcy5jdXJyZW50Q3VzdG9tQ2xhc3Nlcy5maW5kKHZhbHVlID0+IHZhbHVlLmVudHJ5ID09PSByb3cpO1xuICAgIHJldHVybiBjdXN0b21DbGFzc2VzID8gY3VzdG9tQ2xhc3Nlcy5jbGFzc2VzIDogJyc7XG4gIH1cblxuICAvKipcbiAgICogVHJhY2tCeS1GdW5rdGlvbiB1bSBkaWUgVGFiZWxsZSBldHdhcyBzY2huZWxsZXIgenUgbWFjaGVuLlxuICAgKiBAcGFyYW0gaW5kZXhcbiAgICogQHBhcmFtIGl0ZW1cbiAgICovXG4gIHRyYWNrRm4oaW5kZXgsIGl0ZW0pIHtcbiAgICByZXR1cm4gaW5kZXg7XG4gIH1cblxuICAvKipcbiAgICogV2lyZCBiZWltIEtsaWNrIGF1ZiBlaW5lIFJvdyBhdWZnZXJ1ZmVuIHVuZCBoYW5kZWx0IGRhcyBTaWNoZXJuIHVuZCBFbnRmZXJuZW4gdm9uXG4gICAqIHNlbGVrdGllcnRlbiBFaW50csOkZ2VuLlxuICAgKiBAcGFyYW0gZW50cnlcbiAgICovXG4gIGNoYW5nZVNlbGVjdGVkRW50cnkoZW50cnk6IGFueSkge1xuICAgIGlmICh0aGlzLmx1eE11bHRpU2VsZWN0KSB7XG4gICAgICBpZiAodGhpcy5sdXhTZWxlY3RlZC5oYXMoZW50cnkpKSB7XG4gICAgICAgIHRoaXMubHV4U2VsZWN0ZWQuZGVsZXRlKGVudHJ5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubHV4U2VsZWN0ZWQuYWRkKGVudHJ5KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMubHV4U2VsZWN0ZWQuaGFzKGVudHJ5KSkge1xuICAgICAgICAvLyBXZW5uIGRlciBzZWxla3RpZXJ0ZSBFaW50cmFnIGVybmV1dCBhbmdla2xpY2t0IHdpcmQsXG4gICAgICAgIC8vIHdpcmQgZGllIFNlbGVrdGlvbiBlbnRmZXJudC5cbiAgICAgICAgdGhpcy5sdXhTZWxlY3RlZC5jbGVhcigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5sdXhTZWxlY3RlZC5jbGVhcigpO1xuICAgICAgICB0aGlzLmx1eFNlbGVjdGVkLmFkZChlbnRyeSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5sdXhTZWxlY3RlZENoYW5nZS5uZXh0KEFycmF5LmZyb20odGhpcy5sdXhTZWxlY3RlZCkpO1xuICAgIHRoaXMuZGF0YVNvdXJjZS5zZWxlY3RlZEVudHJpZXMgPSB0aGlzLmx1eFNlbGVjdGVkO1xuICAgIHRoaXMuYWxsU2VsZWN0ZWQgPSB0aGlzLmNoZWNrRmlsdGVyZWRBbGxTZWxlY3RlZCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbGVrdGllcnQvRGVzZWxla3RpZXJ0IGFsbGUgRWludHLDpGdlIGluIGRpZXNlciBUYWJlbGxlLlxuICAgKlxuICAgKiBWb3JhdXNzZXR6dW5nIGRhZsO8ciBpc3QsIGRhcyBNdWx0aXNlbGVjdCBha3RpdiBpc3QgdW5kIGtlaW5lIEh0dHAtVGFibGUgdm9ybGllZ3QuXG4gICAqL1xuICBjaGFuZ2VTZWxlY3RlZEVudHJpZXMoKSB7XG4gICAgaWYgKHRoaXMubHV4TXVsdGlTZWxlY3QgJiYgIXRoaXMubHV4SHR0cERBTykge1xuICAgICAgaWYgKHRoaXMuY2hlY2tGaWx0ZXJlZEFsbFNlbGVjdGVkKCkpIHtcbiAgICAgICAgdGhpcy5kYXRhU291cmNlLmZpbHRlcmVkRGF0YS5mb3JFYWNoKChkYXRhRW50cnk6IGFueSkgPT4gdGhpcy5sdXhTZWxlY3RlZC5kZWxldGUoZGF0YUVudHJ5KSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRhdGFTb3VyY2UuZmlsdGVyZWREYXRhLmZvckVhY2goKGRhdGFFbnRyeTogYW55KSA9PiB0aGlzLmx1eFNlbGVjdGVkLmFkZChkYXRhRW50cnkpKTtcbiAgICAgIH1cbiAgICAgIHRoaXMubHV4U2VsZWN0ZWRDaGFuZ2UubmV4dChBcnJheS5mcm9tKHRoaXMubHV4U2VsZWN0ZWQpKTtcbiAgICAgIHRoaXMuZGF0YVNvdXJjZS5zZWxlY3RlZEVudHJpZXMgPSB0aGlzLmx1eFNlbGVjdGVkO1xuICAgICAgdGhpcy5hbGxTZWxlY3RlZCA9IHRoaXMuY2hlY2tGaWx0ZXJlZEFsbFNlbGVjdGVkKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFByw7xmdCBvYiBkaWUgYWt0dWVsbCBhbmdlemVpZ3RlbiBFaW50csOkZ2UgYWxsZSBzZWxla3RpZXJ0IHNpbmQgb2RlciBuaWNodC5cbiAgICovXG4gIGNoZWNrRmlsdGVyZWRBbGxTZWxlY3RlZCgpOiBib29sZWFuIHtcbiAgICBsZXQgcmVzdWx0ID0gdHJ1ZTtcbiAgICBpZiAodGhpcy5sdXhTZWxlY3RlZC5zaXplID09PSAwKSB7XG4gICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUHLDvGZlbiBvYiBkaWUgZ2VmaWx0ZXJ0ZW4gRGF0ZW4gc2VsZWN0ZWQgc2luZFxuICAgICAgdGhpcy5kYXRhU291cmNlLmZpbHRlcmVkRGF0YS5mb3JFYWNoKChkYXRhRW50cnk6IGFueSkgPT4ge1xuICAgICAgICBpZiAoIXRoaXMubHV4U2VsZWN0ZWQuaGFzKGRhdGFFbnRyeSkpIHtcbiAgICAgICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHaWJ0IHp1csO8Y2ssIG9iIGlyZ2VuZGVpbiBGb290ZXItRWxlbWVudCBmw7xyIGRpZXNlIFRhYmVsbGUgYWt0dWVsbCBzaWNodGJhciBpc3QuXG4gICAqL1xuICBhbnlGb290ZXJzQXZhaWxhYmxlKCkge1xuICAgIHJldHVybiB0aGlzLmx1eE11bHRpU2VsZWN0IHx8ICEhdGhpcy50YWJsZUNvbHVtbnMuZmluZCgoY29sdW1uOiBMdXhUYWJsZUNvbHVtbkNvbXBvbmVudCkgPT4gISFjb2x1bW4uZm9vdGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBa3R1YWxpc2llcnQgZGllIERhdGFTb3VyY2UgdW5kIGV2dGwuIFN1YnNjcmlwdGlvbnMgc293aWUgZGllIEN1c3RvbUNTUy1DbGFzc2VzXG4gICAqIG5hY2ggZWluZXIgw4RuZGVydW5nLlxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVEYXRhU291cmNlQXR0cmlidXRlcyhkYXRhOiBhbnlbXSkge1xuICAgIGlmICghdGhpcy5sdXhIdHRwREFPICYmIHRoaXMubHV4QXV0b1BhZ2luYXRlICYmIGRhdGEgJiYgZGF0YS5sZW5ndGggPiBMdXhUYWJsZUNvbXBvbmVudC5BVVRPX1BBR0lOQVRJT05fU1RBUlQpIHtcbiAgICAgIHRoaXMubHV4U2hvd1BhZ2luYXRpb24gPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoIXRoaXMubHV4SHR0cERBTykge1xuICAgICAgaWYgKHRoaXMubHV4U2hvd1BhZ2luYXRpb24pIHtcbiAgICAgICAgdGhpcy5oYW5kbGVQYWdpbmF0aW9uKCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdGhpcy5sdXhIdHRwREFPKSB7XG4gICAgICB0aGlzLmRhdGFTb3VyY2Uuc29ydCA9IHRoaXMuc29ydDtcbiAgICB9XG4gICAgaWYgKCF0aGlzLmx1eEh0dHBEQU8pIHtcbiAgICAgIHRoaXMuZGF0YVNvdXJjZS50b3RhbEVsZW1lbnRzID0gdGhpcy5kYXRhU291cmNlLmRhdGEgPyB0aGlzLmRhdGFTb3VyY2UuZGF0YS5sZW5ndGggOiAwO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQcnVlZnQgYW5oYW5kIGRlciBtaXRnZWdlYmVuZW4gQ2FsbGJhY2tzIGRpZSBDU1MtS2xhc3NlblxuICAgKiBmdWVyIGRpZSBlaW56ZWxuZW4gUm93cy5cbiAgICovXG4gIHByaXZhdGUgaW5zZXJ0Q3VzdG9tQ1NTQ2xhc3NlcygpIHtcbiAgICBpZiAodGhpcy5sdXhDbGFzc2VzICYmIHRoaXMuZGF0YVNvdXJjZS5kYXRhKSB7XG4gICAgICB0aGlzLmN1cnJlbnRDdXN0b21DbGFzc2VzID0gW107XG4gICAgICB0aGlzLmRhdGFTb3VyY2UuZGF0YS5mb3JFYWNoKChlbnRyeTogYW55LCBpOiBudW1iZXIpID0+IHtcbiAgICAgICAgbGV0IGNsYXNzZXMgPSAnJztcbiAgICAgICAgKDxJQ3VzdG9tQ1NTQ29uZmlnW10+dGhpcy5sdXhDbGFzc2VzKS5mb3JFYWNoKChjc3NDbGFzczogSUN1c3RvbUNTU0NvbmZpZykgPT4ge1xuICAgICAgICAgIGlmIChjc3NDbGFzcy5jaGVjayhlbnRyeSkpIHtcbiAgICAgICAgICAgIGNsYXNzZXMgKz0gY3NzQ2xhc3MuY2xhc3MgKyAnICc7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jdXJyZW50Q3VzdG9tQ2xhc3Nlcy5wdXNoKHsgZW50cnk6IGVudHJ5LCBjbGFzc2VzOiBjbGFzc2VzIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdpYnQgZGFzIEFyaWEtTGFiZWwgZsO8ciBkaWUgU29ydGllcnVuZyBkZXIgU3BhbHRlbi3DnGJlcnNjaHJpZnQgenVyw7xjay5cbiAgICogQHBhcmFtIHRhYmxlQ29sdW1uRGVmXG4gICAqL1xuICBnZXRBcmlhU29ydGluZ0xhYmVsKHRhYmxlQ29sdW1uRGVmOiBzdHJpbmcpIHtcbiAgICBpZiAodGhpcy5zb3J0LmFjdGl2ZSA9PT0gdGFibGVDb2x1bW5EZWYpIHtcbiAgICAgIGlmICh0aGlzLnNvcnQuZGlyZWN0aW9uID09PSAnYXNjJykge1xuICAgICAgICByZXR1cm4gJ2F1ZnN0ZWlnZW5kIHNvcnRpZXJ0JztcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnNvcnQuZGlyZWN0aW9uID09PSAnZGVzYycpIHtcbiAgICAgICAgcmV0dXJuICdhYnN0ZWlnZW5kIHNvcnRpZXJ0JztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuICduaWNodCBzb3J0aWVydCc7XG4gIH1cblxuICAvKipcbiAgICogR2lidCDDvGJlciBkZW4gbGl2ZUFubm91bmNlciBlaW5lIE5hY2hyaWNodCBhdXMsIGRhc3Mgc2ljaCBkaWUgU29ydGllcnVuZyBlaW5lciBTcGFsdGUgZ2XDpG5kZXJ0IGhhdC5cbiAgICogQHBhcmFtICRldmVudFxuICAgKi9cbiAgYW5ub3VuY2VTb3J0Q2hhbmdlKCRldmVudDogU29ydCkge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy50YWJsZUNvbHVtbnNcbiAgICAgIC50b0FycmF5KClcbiAgICAgIC5maW5kSW5kZXgoKHRhYmxlQ29sdW1uOiBMdXhUYWJsZUNvbHVtbkNvbXBvbmVudCkgPT4gJGV2ZW50LmFjdGl2ZSA9PT0gdGFibGVDb2x1bW4ubHV4Q29sdW1uRGVmKTtcbiAgICBsZXQgY29sdW1uRGVmID0gaW5kZXggPiAtMSA/IHRoaXMudGFibGVDb2x1bW5zLnRvQXJyYXkoKVtpbmRleF0ubHV4Q29sdW1uRGVmIDogbnVsbDtcbiAgICBpZiAoY29sdW1uRGVmID09PSBudWxsKSB7XG4gICAgICBjb2x1bW5EZWYgPSAkZXZlbnQuYWN0aXZlID09PSAnbXVsdGlTZWxlY3QnID8gJ211bHRpU2VsZWN0JyA6IG51bGw7XG4gICAgfVxuICAgIGlmIChjb2x1bW5EZWYgIT09IG51bGwpIHtcbiAgICAgIGxldCBkaXJlY3Rpb25EZXNjcmlwdGlvbjtcbiAgICAgIHN3aXRjaCAoJGV2ZW50LmRpcmVjdGlvbikge1xuICAgICAgICBjYXNlICdkZXNjJzpcbiAgICAgICAgICBkaXJlY3Rpb25EZXNjcmlwdGlvbiA9ICdhYnN0ZWlnZW5kJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnYXNjJzpcbiAgICAgICAgICBkaXJlY3Rpb25EZXNjcmlwdGlvbiA9ICdhdWZzdGVpZ2VuZCc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJyc6XG4gICAgICAgICAgZGlyZWN0aW9uRGVzY3JpcHRpb24gPSAnbmljaHQgbWVocic7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICB0aGlzLmxpdmVBbm5vdW5jZXIuYW5ub3VuY2UoYFNwYWx0ZSAke2NvbHVtbkRlZn0gc29ydGllcnQgbnVuICR7ZGlyZWN0aW9uRGVzY3JpcHRpb259YCwgJ2Fzc2VydGl2ZScpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBa3R1YWxpc2llcnQgZGllIG1vbWVudGFuIGFuZ2V6ZWlndGVuIFNwYWx0ZW4gYW5oYW5kIGRlciBmw7xyIHNpZSBkZWZpbmllcnRlblxuICAgKiBSZXNwb25zaXZlLVF1ZXJpZXMgdW5kIFZlcmhhbHRlbnN3ZWlzZW4uXG4gICAqL1xuICBwcml2YXRlIHVwZGF0ZUNvbHVtbnNCeU1lZGlhUXVlcnkoKSB7XG4gICAgaWYgKCF0aGlzLnRhYmxlQ29sdW1ucykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2RhdGFDb2x1bW5EZWZzID0gW107XG5cbiAgICAvLyB3ZW5uIE11bHRpc2VsZWN0LCBkYW5uIGJlbsO2dGlnZW4gd2lyIGhpZXIgbm9jaCBlaW5lIFNwYWx0ZSBtZWhyXG4gICAgaWYgKHRoaXMubHV4TXVsdGlTZWxlY3QpIHtcbiAgICAgIHRoaXMuX2RhdGFDb2x1bW5EZWZzLnB1c2goJ211bHRpU2VsZWN0Jyk7XG4gICAgfVxuXG4gICAgdGhpcy50YWJsZUNvbHVtbnMuZm9yRWFjaCgoY29sdW1uOiBMdXhUYWJsZUNvbHVtbkNvbXBvbmVudCkgPT4gdGhpcy5fZGF0YUNvbHVtbkRlZnMucHVzaChjb2x1bW4ubHV4Q29sdW1uRGVmKSk7XG4gICAgdGhpcy5tb3ZlZFRhYmxlQ29sdW1ucyA9IFtdO1xuICAgIC8vIFp1ZXJzdCBkaWUgYXVzenVibGVuZGVuZGVuIFNwYWx0ZW4gZHVyY2hnZWhlblxuICAgIHRoaXMudGFibGVDb2x1bW5zLmZvckVhY2goKHRhYmxlQ29sdW1uOiBMdXhUYWJsZUNvbHVtbkNvbXBvbmVudCkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICAodGFibGVDb2x1bW4ubHV4UmVzcG9uc2l2ZUF0ICYmICF0YWJsZUNvbHVtbi5sdXhSZXNwb25zaXZlQmVoYXZpb3VyKSB8fFxuICAgICAgICAoIXRhYmxlQ29sdW1uLmx1eFJlc3BvbnNpdmVBdCAmJiB0YWJsZUNvbHVtbi5sdXhSZXNwb25zaXZlQmVoYXZpb3VyKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMubHV4Q29uc29sZS5lcnJvcihcbiAgICAgICAgICBgQWNodHVuZyEgRGllIENvbHVtbiAnJHt0YWJsZUNvbHVtbi5sdXhDb2x1bW5EZWZ9JyBoYXQgZW50d2VkZXIga2VpbmUgTWVkaWEtUXVlcmllcyBgICtcbiAgICAgICAgICAgIGBvZGVyIGtlaW4gUmVzcG9uc2l2ZS1WZXJoYWx0ZW4genVnZXdpZXNlbiBiZWtvbW1lbi5gXG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZG9lc1Jlc3BvbnNpdmVBdEFwcGx5KHRhYmxlQ29sdW1uLmx1eFJlc3BvbnNpdmVBdCkpIHtcbiAgICAgICAgLy8gU2NoYXVlbiwgb2IgZWluZSBTcGFsdGUgYW5nZWdlYmVuIHd1cmRlLCBpbiB3ZWxjaGUgc2ljaCBkaWVzZSBoaWVyIHZlcnNjaGllYmVuIGthbm5cbiAgICAgICAgaWYgKHRoaXMuX2RhdGFDb2x1bW5EZWZzLmZpbmQoKGNvbHVtbjogc3RyaW5nKSA9PiBjb2x1bW4gPT09IHRhYmxlQ29sdW1uLmx1eFJlc3BvbnNpdmVCZWhhdmlvdXIpKSB7XG4gICAgICAgICAgLy8gV2VubiBqYSwgZGllIFNwYWx0ZSBtZXJrZW4gdW5kIHZvcmVyc3QgYXVzYmxlbmRlblxuICAgICAgICAgIHRoaXMubW92ZWRUYWJsZUNvbHVtbnMucHVzaCh0YWJsZUNvbHVtbik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9kYXRhQ29sdW1uRGVmcyA9IHRoaXMuZGF0YUNvbHVtbkRlZnMuZmlsdGVyKFxuICAgICAgICAgIChkYXRhQ29sdW1uOiBzdHJpbmcpID0+IGRhdGFDb2x1bW4gIT09IHRhYmxlQ29sdW1uLmx1eENvbHVtbkRlZlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFByw7xmdCBvYiBkaWUgYWt0dWVsbGUgTWVkaWFRdWVyeSBtaXQgZGVyIMO8YmVyZ2ViZW5lbiBNZWRpYVF1ZXJ5L2RlbiDDvGJlcmdlYmVuZW4gTWVkaWFRdWVyaWVzIMO8YmVyZWluc3RpbW10LlxuICAgKiBAcGFyYW0gcmVzcG9uc2l2ZUF0XG4gICAqL1xuICBwcml2YXRlIGRvZXNSZXNwb25zaXZlQXRBcHBseShyZXNwb25zaXZlQXQ6IHN0cmluZyB8IHN0cmluZ1tdKSB7XG4gICAgY29uc3QgbWVkaWFRdWVyaWVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShyZXNwb25zaXZlQXQpKSB7XG4gICAgICBtZWRpYVF1ZXJpZXMucHVzaChyZXNwb25zaXZlQXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBtZWRpYVF1ZXJpZXMucHVzaCguLi5yZXNwb25zaXZlQXQpO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgbWVkaWFRdWVyeSBvZiBtZWRpYVF1ZXJpZXMpIHtcbiAgICAgIGlmIChtZWRpYVF1ZXJ5ID09PSB0aGlzLm1lZGlhUXVlcnkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEdXJjaGzDpHVmdCBkaWUgYWt0dWVsbGVuIFRhYmxlQ29sdW1ucyB1bmQgaMO2cnQgYXVmIENoYW5nZXMgaW4gZGVuIFByb3BlcnRpZXNcbiAgICogZGVyIENvbHVtbnMgdW5kIG1lcmt0IHNpY2ggZGllIFN1YnNjcmlwdGlvbnMuXG4gICAqL1xuICBwcml2YXRlIHVwZGF0ZUNvbHVtblN1YnNjcmlwdGlvbnMoKSB7XG4gICAgdGhpcy5jb2x1bW5TdWJzY3JpcHRpb25zLmZvckVhY2goKHN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uKSA9PiB7XG4gICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICB9KTtcbiAgICB0aGlzLmNvbHVtblN1YnNjcmlwdGlvbnMgPSBbXTtcbiAgICB0aGlzLnRhYmxlQ29sdW1ucy5mb3JFYWNoKChjb2x1bW46IEx1eFRhYmxlQ29sdW1uQ29tcG9uZW50KSA9PiB7XG4gICAgICB0aGlzLmNvbHVtblN1YnNjcmlwdGlvbnMucHVzaChcbiAgICAgICAgY29sdW1uLmNoYW5nZSQuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbHVtbnNCeU1lZGlhUXVlcnkoKTtcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVHJpZ2dlcnQgw7xiZXIgZGFzIERBTyBkaWUgQWJmcmFnZSBuYWNoIG5ldWVuIERhdGVuLlxuICAgKiBTZW5kZXQgZGFiZWkgZGFzIFJlcXVlc3QtQ29uZiBPYmpla3QsIHdlbGNoZXMgSW5mb3JtYXRpb25lbiBiemdsLlxuICAgKiBwYWdlLCBwYWdlU2l6ZSwgZmlsdGVyLCBzb3J0LCBvcmRlciBtaXRnaWJ0LlxuICAgKiBAcGFyYW0gZmlsdGVyZWRCeT9cbiAgICovXG4gIHByaXZhdGUgbG9hZEh0dHBEQU9EYXRhKGZpbHRlcmVkQnk/OiBzdHJpbmcpIHtcbiAgICB0aGlzLmlzTG9hZGluZ1Jlc3VsdHMgPSB0cnVlO1xuICAgIHRoaXMubHV4SHR0cERBT1xuICAgICAgLmxvYWREYXRhKHRoaXMuaHR0cFJlcXVlc3RDb25mKVxuICAgICAgLnBpcGUoXG4gICAgICAgIHRhcCgoZGF0YTogSUx1eFRhYmxlSHR0cERhb1N0cnVjdHVyZSkgPT4ge1xuICAgICAgICAgIHRoaXMuaXNMb2FkaW5nUmVzdWx0cyA9IGZhbHNlO1xuICAgICAgICAgIC8vIFdlbm4gZWluIEZpbHRlci1UZXh0IGdlZ2ViZW4gaXN0LCBzaWNoIGRpZXNlciBhYmVyIHZvbSBBa3R1ZWxsZW4gdW50ZXJzY2hlaWRlbiwgYnJlY2hlbiB3aXIgZGllIERhdGVuYWt0dWFsaXNpZXJ1bmcgYWJcbiAgICAgICAgICBpZiAoZmlsdGVyZWRCeSAmJiB0aGlzLmh0dHBSZXF1ZXN0Q29uZi5maWx0ZXIgIT09IGZpbHRlcmVkQnkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5kYXRhU291cmNlLnRvdGFsRWxlbWVudHMgPSBkYXRhLnRvdGFsQ291bnQ7XG4gICAgICAgICAgICB0aGlzLmx1eERhdGEgPSBkYXRhLml0ZW1zO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5sdXhBdXRvUGFnaW5hdGUgJiYgZGF0YS50b3RhbENvdW50ID4gTHV4VGFibGVDb21wb25lbnQuQVVUT19QQUdJTkFUSU9OX1NUQVJUKSB7XG4gICAgICAgICAgICAgIHRoaXMubHV4U2hvd1BhZ2luYXRpb24gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFTb3VyY2UudG90YWxFbGVtZW50cyA9IDA7XG4gICAgICAgICAgICB0aGlzLmx1eERhdGEgPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pLFxuICAgICAgICBjYXRjaEVycm9yKGVycm9yID0+IHtcbiAgICAgICAgICB0aGlzLmlzTG9hZGluZ1Jlc3VsdHMgPSBmYWxzZTtcbiAgICAgICAgICByZXR1cm4gb2YoZXJyb3IpO1xuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgLnN1YnNjcmliZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdpcmQgYXVmZ2VydWZlbiB3ZW5uIGRlciBTb3J0IG5ldSB6dXIgRGF0YVNvdXJjZSBoaW56dWdlZsO8Z3Qgd2VyZGVuIHNvbGwgKERhdGEgd3VyZGUgbmV1IGdlc2V0enQpLlxuICAgKiBSZXNldHRldCBkaWUgUGFnaW5hdGlvbiB1bmQgYWt0dWFsaXNpZXJ0IHdlbm4gZXMgc2ljaCB1bSBlaW5lIGFzeW5jaHJvbmUgVGFiZWxsZSBoYW5kZWx0IGRpZVxuICAgKiByZXF1ZXN0Q29uZi5cbiAgICovXG4gIHByaXZhdGUgaGFuZGxlU29ydCgpIHtcbiAgICBpZiAodGhpcy5zb3J0KSB7XG4gICAgICBpZiAodGhpcy5zb3J0Q2hhbmdlZFN1YnNjcmlwdGlvbikge1xuICAgICAgICB0aGlzLnNvcnRDaGFuZ2VkU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICB9XG4gICAgICB0aGlzLnNvcnRDaGFuZ2VkU3Vic2NyaXB0aW9uID0gdGhpcy5zb3J0LnNvcnRDaGFuZ2Uuc3Vic2NyaWJlKChzb3J0OiBhbnkpID0+IHtcbiAgICAgICAgdGhpcy5wYWdpbmF0b3IucGFnZUluZGV4ID0gMDtcblxuICAgICAgICBpZiAodGhpcy5sdXhIdHRwREFPKSB7XG4gICAgICAgICAgdGhpcy5odHRwUmVxdWVzdENvbmYucGFnZSA9IHRoaXMucGFnaW5hdG9yLnBhZ2VJbmRleDtcbiAgICAgICAgICB0aGlzLmh0dHBSZXF1ZXN0Q29uZi5zb3J0ID0gc29ydC5hY3RpdmU7XG4gICAgICAgICAgdGhpcy5odHRwUmVxdWVzdENvbmYub3JkZXIgPSBzb3J0LmRpcmVjdGlvbjtcbiAgICAgICAgICB0aGlzLmxvYWRIdHRwREFPRGF0YSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLmNhbGN1bGF0ZVByb3BvcnRpb25zKCk7XG4gIH1cblxuICAvKipcbiAgICogV2lyZCBuYWNoIGRlbSBzZXQgdm9uIGx1eFNob3dGaWx0ZXIgYXVmZ2VydWZlbiB1bmQgZsOkbmd0IG5ldWUgRmlsdGVyLU9wZXJhdGlvbmVuIGFiIHVuZFxuICAgKiBha3R1YWxpc2llcnQgZGVtZW50c3ByZWNoZW5kIGRpZSBEYXRlbi5cbiAgICovXG4gIHByaXZhdGUgaGFuZGxlRmlsdGVyKCkge1xuICAgIGlmICh0aGlzLmZpbHRlckNoYW5nZWRTdWJzY3JpcHRpb24pIHtcbiAgICAgIHRoaXMuZmlsdGVyQ2hhbmdlZFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5sdXhTaG93RmlsdGVyKSB7XG4gICAgICB0aGlzLmZpbHRlckNoYW5nZWRTdWJzY3JpcHRpb24gPSB0aGlzLmZpbHRlcmVkJFxuICAgICAgICAuYXNPYnNlcnZhYmxlKClcbiAgICAgICAgLnBpcGUoXG4gICAgICAgICAgdGFwKCgpID0+ICh0aGlzLmlzTG9hZGluZ1Jlc3VsdHMgPSB0cnVlKSksXG4gICAgICAgICAgZGVib3VuY2VUaW1lKDUwMCksXG4gICAgICAgICAgZGlzdGluY3RVbnRpbENoYW5nZWQoKHg6IHN0cmluZywgeTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICBpZiAoeCA9PT0geSkge1xuICAgICAgICAgICAgICB0aGlzLmlzTG9hZGluZ1Jlc3VsdHMgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHggPT09IHk7XG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgICAuc3Vic2NyaWJlKChmaWx0ZXJWYWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgZmlsdGVyVmFsdWUgPSBmaWx0ZXJWYWx1ZS50cmltKCk7XG4gICAgICAgICAgZmlsdGVyVmFsdWUgPSBmaWx0ZXJWYWx1ZS50b0xvY2FsZUxvd2VyQ2FzZSgpO1xuICAgICAgICAgIHRoaXMucGFnaW5hdG9yLnBhZ2VJbmRleCA9IDA7XG4gICAgICAgICAgdGhpcy5pc0xvYWRpbmdSZXN1bHRzID0gZmFsc2U7XG4gICAgICAgICAgaWYgKCF0aGlzLmx1eEh0dHBEQU8pIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZS5maWx0ZXIgPSBmaWx0ZXJWYWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMubHV4SHR0cERBTykge1xuICAgICAgICAgICAgdGhpcy5odHRwUmVxdWVzdENvbmYuZmlsdGVyID0gZmlsdGVyVmFsdWU7XG4gICAgICAgICAgICB0aGlzLmxvYWRIdHRwREFPRGF0YShmaWx0ZXJWYWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy5jYWxjdWxhdGVQcm9wb3J0aW9ucygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdpcmQgbmFjaCBkZW0gc2V0IHZvbiBsdXhTaG93UGFnaW5hdGlvbiBhdWZnZXJ1ZmVuIHVuZCBzZXR6dCB3ZW5uIGVzIHNpY2ggaGllciB1bVxuICAgKiBlaW5lIGFzeW5jaHJvbmUgVGFiZWxsZSBoYW5kZWx0IGVpbmUgU3Vic2NyaXB0aW9uIHVtIFBhZ2luYXRpb24tw4RuZGVydW5nZW4genUgZXJoYWx0ZW4uXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZVBhZ2luYXRpb24oKSB7XG4gICAgaWYgKHRoaXMubHV4U2hvd1BhZ2luYXRpb24pIHtcbiAgICAgIGlmICh0aGlzLmx1eEh0dHBEQU8pIHtcbiAgICAgICAgaWYgKHRoaXMucGFnaW5hdG9yUGFnZVN1YnNjcmlwdGlvbikge1xuICAgICAgICAgIHRoaXMucGFnaW5hdG9yUGFnZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFnaW5hdG9yUGFnZVN1YnNjcmlwdGlvbiA9IHRoaXMucGFnaW5hdG9yLnBhZ2Uuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICB0aGlzLmh0dHBSZXF1ZXN0Q29uZi5wYWdlID0gdGhpcy5wYWdpbmF0b3IucGFnZUluZGV4O1xuICAgICAgICAgIHRoaXMuaHR0cFJlcXVlc3RDb25mLnBhZ2VTaXplID0gdGhpcy5wYWdpbmF0b3IucGFnZVNpemU7XG4gICAgICAgICAgdGhpcy5sb2FkSHR0cERBT0RhdGEoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaHR0cFJlcXVlc3RDb25mLnBhZ2UgPSB0aGlzLnBhZ2luYXRvci5wYWdlSW5kZXg7XG4gICAgICAgIHRoaXMuaHR0cFJlcXVlc3RDb25mLnBhZ2VTaXplID0gdGhpcy5wYWdpbmF0b3IucGFnZVNpemU7XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMubHV4SHR0cERBTykge1xuICAgICAgICB0aGlzLmRhdGFTb3VyY2UucGFnaW5hdG9yID0gdGhpcy5wYWdpbmF0b3I7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGF0YVNvdXJjZS5wYWdpbmF0b3IgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLmNhbGN1bGF0ZVByb3BvcnRpb25zKCk7XG4gIH1cblxuICAvKipcbiAgICogRXJ6ZXVndCBlaW5lbiBuZXVlbiBTdHJpbmcgZsO8ciBkaWUgSMO2aGVuYmVyZWNobnVuZyBkZXIgVGFiZWxsZSB1bmQgc2V0enQgZGllIE1pbmltYWxicmVpdGUgZsO8ciBkaWUgVGFiZWxsZVxuICAgKiAod2VubiBtw7ZnbGljaCkuXG4gICAqL1xuICBwcml2YXRlIGNhbGN1bGF0ZVByb3BvcnRpb25zKCkge1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY29uc3QgZmlsdGVyID0gdGhpcy5maWx0ZXJFbGVtZW50ID8gdGhpcy5maWx0ZXJFbGVtZW50Lm5hdGl2ZUVsZW1lbnQub2Zmc2V0SGVpZ2h0IDogMDtcbiAgICAgIGNvbnN0IHBhZ2luYXRpb24gPSB0aGlzLnBhZ2luYXRvckVsZW1lbnQgPyB0aGlzLnBhZ2luYXRvckVsZW1lbnQubmF0aXZlRWxlbWVudC5zY3JvbGxIZWlnaHQgOiAwO1xuICAgICAgY29uc3QgdGVtcCA9ICdjYWxjKDEwMCUgLSAnICsgcGFnaW5hdGlvbiArICdweCcgKyAnIC0gJyArIGZpbHRlciArICdweCknO1xuXG4gICAgICBpZiAodGVtcCAhPT0gdGhpcy50YWJsZUhlaWdodENTU0NhbGMpIHtcbiAgICAgICAgdGhpcy50YWJsZUhlaWdodENTU0NhbGMgPSB0ZW1wO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnRhYmxlTWluV2lkdGggPSB0aGlzLmx1eE1pbldpZHRoUHggPiAtMSA/IHRoaXMubHV4TWluV2lkdGhQeCArICdweCcgOiAndW5zZXQnO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEFrdHVhbGlzaWVydCBkaWUgc2VsZWN0ZWRFbnRyaWVzIGRpZXNlciBDb21wb25lbnQgYW5oYW5kIGRlciBha3R1ZWxsIGdlc2V0enRlbiBsdXhTZWxlY3RlZC1FbGVtZW50ZS5cbiAgICpcbiAgICogRGFiZWkgd2VyZGVuIGRpZSBlaW56ZWxuZW4gRWxlbWVudGUgenVlcnN0IG1pdGhpbGZlIGRlciBsdXhDb21wYXJlV2l0aC0gdW5kIGx1eFBpY2tWYWx1ZS1GdW5jdGlvbnMgbWl0ZWluYW5kZXJcbiAgICogdmVyZ2xpY2hlbi5cbiAgICovXG4gIHByaXZhdGUgdXBkYXRlU2VsZWN0aW9uKCkge1xuICAgIC8vIFByw7xmZW4gb2Igc2VsZWN0ZWQgZ2VzZXR6dCBpc3RcbiAgICBpZiAodGhpcy5sdXhTZWxlY3RlZC5zaXplID4gMCkge1xuICAgICAgLy8gRGllIHNlbGVjdGVkLUVpbnRyw6RnZSBkdXJjaGdlaGVuIHVuZCBzY2hhdWVuIG9iIGRpZXNlIGltIGRhdGEtQmxvY2sgZW50aGFsdGVuIHNpbmRcbiAgICAgIGNvbnN0IGZvdW5kRW50cmllcyA9IFtdO1xuICAgICAgdGhpcy5sdXhTZWxlY3RlZC5mb3JFYWNoKChlbnRyeTogYW55KSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld0VudHJ5ID0gdGhpcy5kYXRhU291cmNlLmRhdGEuZmluZCgoZGF0YUVudHJ5OiBhbnkpID0+IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5sdXhDb21wYXJlV2l0aCh0aGlzLmx1eFBpY2tWYWx1ZShlbnRyeSksIHRoaXMubHV4UGlja1ZhbHVlKGRhdGFFbnRyeSkpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBNZXJrdCBzaWNoIGRpZSBFbnRyeSB3ZW5uIHNpZSBub2NoIG5pY2h0IGluIGRlciBTZWxlY3RlZC1MaXN0ZSBpc3QgKHdlbm4gZXMgc2ljaCB1bSBlaW5lIEhUVFAtVGFiZWxsZSBoYW5kZWx0KVxuICAgICAgICBpZiAobmV3RW50cnkgJiYgKCF0aGlzLmx1eEh0dHBEQU8gfHwgKHRoaXMubHV4SHR0cERBTyAmJiAhdGhpcy5sdXhTZWxlY3RlZC5oYXMobmV3RW50cnkpKSkpIHtcbiAgICAgICAgICBmb3VuZEVudHJpZXMucHVzaChuZXdFbnRyeSk7XG4gICAgICAgICAgdGhpcy5sdXhTZWxlY3RlZC5kZWxldGUoZW50cnkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIC8vIE51ciBiZWkgbmljaHQtSFRUUC1UYWJlbGxlbiBkaWUgU2VsZWt0aW9uIGVpbm1hbCBsZWVyZW5cbiAgICAgIGlmICghdGhpcy5sdXhIdHRwREFPKSB7XG4gICAgICAgIHRoaXMubHV4U2VsZWN0ZWQuY2xlYXIoKTtcbiAgICAgIH1cbiAgICAgIGZvdW5kRW50cmllcy5mb3JFYWNoKChlbnRyeTogYm9vbGVhbikgPT4gdGhpcy5sdXhTZWxlY3RlZC5hZGQoZW50cnkpKTtcbiAgICB9XG5cbiAgICB0aGlzLmRhdGFTb3VyY2Uuc2VsZWN0ZWRFbnRyaWVzID0gdGhpcy5sdXhTZWxlY3RlZDtcbiAgICB0aGlzLmx1eFNlbGVjdGVkQ2hhbmdlLm5leHQoQXJyYXkuZnJvbSh0aGlzLmx1eFNlbGVjdGVkKSk7XG4gICAgdGhpcy5hbGxTZWxlY3RlZCA9IHRoaXMuY2hlY2tGaWx0ZXJlZEFsbFNlbGVjdGVkKCk7XG4gIH1cbn1cbiJdfQ==