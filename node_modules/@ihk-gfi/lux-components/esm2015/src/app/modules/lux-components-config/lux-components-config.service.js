import * as tslib_1 from "tslib";
var LuxComponentsConfigService_1;
import { Inject, Injectable, Optional } from '@angular/core';
import { LuxConfigTokenService } from './lux-components-config.module';
import { BehaviorSubject } from 'rxjs';
import * as i0 from "@angular/core";
import * as i1 from "./lux-components-config.module";
/**
 * Dieser Service wird dazu verwendet, auf die Konfiguration der LuxComponents zuzugreifen und diese auszulesen bzw.
 * auch zu aktualisieren.
 */
let LuxComponentsConfigService = LuxComponentsConfigService_1 = class LuxComponentsConfigService {
    constructor(config) {
        // Subject mit dem aktuellen Konfig-Wert, welcher ausgelesen werden kann
        this.config$ = new BehaviorSubject(null);
        // Wenn keine Konfiguration geladen werden konnte, Standard-Konfig benutzen und eine Warnung ausgeben.
        if (!config) {
            console.warn('Achtung: Es wurde keine Konfiguration für die LuxComponents definiert.\n', 'Benutze Standard-Konfiguration:', LuxComponentsConfigService_1.DEFAULT_CONFIG);
            this.config$.next(LuxComponentsConfigService_1.DEFAULT_CONFIG);
        }
        else {
            this.config$.next(this.mergeDefaultData(config));
        }
    }
    /**
     * Gibt das Observable mit der aktuell gesetzten Konfiguration zurück.
     */
    get config() {
        return this.config$.asObservable();
    }
    /**
     * Gibt die aktuell gesetzte Konfiguration direkt zurück.
     */
    get currentConfig() {
        return this.config$.getValue();
    }
    /**
     * Gibt zurück, ob die Labels als Uppercase gekennzeichnet sind und ob
     * die übergebenen Selektoren in den Ausnahmen geführt sind.
     * @param selector
     */
    isLabelUppercaseForSelector(selector) {
        const config = this.config$.value;
        return config.labelConfiguration.allUppercase && config.labelConfiguration.notAppliedTo.indexOf(selector) === -1;
    }
    /**
     * Ersetzt die aktuelle Konfiguration mit der übergebenen (wenn gültiger Wert).
     * @param config
     */
    updateConfiguration(config) {
        if (!config) {
            console.warn('Die übergebene Konfiguration ist undefined/null und wird nicht übernommen.');
        }
        else {
            this.config$.next(this.mergeDefaultData(config));
        }
    }
    /**
     * Kombiniert die übergebene Konfiguration mit der Standard-Konfig.
     *
     * Übernimmt die Werte aus der Standard-Konfig, die nicht im übergebenen gesetzt wurden.
     * @param config
     */
    mergeDefaultData(config) {
        const mergedConfig = {};
        Object.keys(config).forEach((key) => {
            mergedConfig[key] = config[key];
        });
        Object.keys(LuxComponentsConfigService_1.DEFAULT_CONFIG).forEach((key) => {
            if (mergedConfig[key] === undefined || mergedConfig[key] === null) {
                mergedConfig[key] = LuxComponentsConfigService_1.DEFAULT_CONFIG[key];
            }
        });
        return mergedConfig;
    }
};
// Fallback-Konfiguration, falls sonst keine gefunden werden konnte
LuxComponentsConfigService.DEFAULT_CONFIG = {
    displayLuxConsoleLogs: false,
    generateLuxTagIds: false,
    lookupServiceUrl: '/lookup/',
    labelConfiguration: {
        allUppercase: true,
        notAppliedTo: ['lux-link', 'lux-side-nav-item', 'lux-menu-item']
    },
    cardExpansionAnimationActive: true,
    displayBindingDebugHint: true,
    rippleConfiguration: {
        exitDuration: 500,
        enterDuration: 500
    }
};
LuxComponentsConfigService.ctorParameters = () => [
    { type: undefined, decorators: [{ type: Inject, args: [LuxConfigTokenService,] }, { type: Optional }] }
];
LuxComponentsConfigService.ngInjectableDef = i0.ɵɵdefineInjectable({ factory: function LuxComponentsConfigService_Factory() { return new LuxComponentsConfigService(i0.ɵɵinject(i1.LuxConfigTokenService, 8)); }, token: LuxComponentsConfigService, providedIn: "root" });
LuxComponentsConfigService = LuxComponentsConfigService_1 = tslib_1.__decorate([
    Injectable({
        providedIn: 'root'
    }),
    tslib_1.__param(0, Inject(LuxConfigTokenService)), tslib_1.__param(0, Optional()),
    tslib_1.__metadata("design:paramtypes", [Object])
], LuxComponentsConfigService);
export { LuxComponentsConfigService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibHV4LWNvbXBvbmVudHMtY29uZmlnLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AaWhrLWdmaS9sdXgtY29tcG9uZW50cy8iLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kdWxlcy9sdXgtY29tcG9uZW50cy1jb25maWcvbHV4LWNvbXBvbmVudHMtY29uZmlnLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxPQUFPLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDN0QsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFFdkUsT0FBTyxFQUFFLGVBQWUsRUFBYyxNQUFNLE1BQU0sQ0FBQzs7O0FBRW5EOzs7R0FHRztBQUlILElBQWEsMEJBQTBCLGtDQUF2QyxNQUFhLDBCQUEwQjtJQXFDckMsWUFBdUQsTUFBcUM7UUFuQjVGLHdFQUF3RTtRQUNoRSxZQUFPLEdBQW1ELElBQUksZUFBZSxDQUNuRixJQUFJLENBQ0wsQ0FBQztRQWlCQSxzR0FBc0c7UUFDdEcsSUFBSSxDQUFDLE1BQU0sRUFBRTtZQUNYLE9BQU8sQ0FBQyxJQUFJLENBQ1YsMEVBQTBFLEVBQzFFLGlDQUFpQyxFQUNqQyw0QkFBMEIsQ0FBQyxjQUFjLENBQzFDLENBQUM7WUFDRixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyw0QkFBMEIsQ0FBQyxjQUFjLENBQUMsQ0FBQztTQUM5RDthQUFNO1lBQ0wsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7U0FDbEQ7SUFDSCxDQUFDO0lBMUJEOztPQUVHO0lBQ0gsSUFBSSxNQUFNO1FBQ1IsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksRUFBRSxDQUFDO0lBQ3JDLENBQUM7SUFFRDs7T0FFRztJQUNILElBQUksYUFBYTtRQUNmLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsQ0FBQztJQUNqQyxDQUFDO0lBZ0JEOzs7O09BSUc7SUFDSCwyQkFBMkIsQ0FBQyxRQUFnQjtRQUMxQyxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQztRQUNsQyxPQUFPLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxZQUFZLElBQUksTUFBTSxDQUFDLGtCQUFrQixDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFDbkgsQ0FBQztJQUVEOzs7T0FHRztJQUNILG1CQUFtQixDQUFDLE1BQXFDO1FBQ3ZELElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDWCxPQUFPLENBQUMsSUFBSSxDQUFDLDRFQUE0RSxDQUFDLENBQUM7U0FDNUY7YUFBTTtZQUNMLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1NBQ2xEO0lBQ0gsQ0FBQztJQUVEOzs7OztPQUtHO0lBQ0ssZ0JBQWdCLENBQUMsTUFBcUM7UUFDNUQsTUFBTSxZQUFZLEdBQUcsRUFBRSxDQUFDO1FBQ3hCLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBVyxFQUFFLEVBQUU7WUFDMUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNsQyxDQUFDLENBQUMsQ0FBQztRQUNILE1BQU0sQ0FBQyxJQUFJLENBQUMsNEJBQTBCLENBQUMsY0FBYyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBVyxFQUFFLEVBQUU7WUFDN0UsSUFBSSxZQUFZLENBQUMsR0FBRyxDQUFDLEtBQUssU0FBUyxJQUFJLFlBQVksQ0FBQyxHQUFHLENBQUMsS0FBSyxJQUFJLEVBQUU7Z0JBQ2pFLFlBQVksQ0FBQyxHQUFHLENBQUMsR0FBRyw0QkFBMEIsQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLENBQUM7YUFDcEU7UUFDSCxDQUFDLENBQUMsQ0FBQztRQUNILE9BQU8sWUFBNkMsQ0FBQztJQUN2RCxDQUFDO0NBQ0YsQ0FBQTtBQTFGQyxtRUFBbUU7QUFDNUMseUNBQWMsR0FBa0M7SUFDckUscUJBQXFCLEVBQUUsS0FBSztJQUM1QixpQkFBaUIsRUFBRSxLQUFLO0lBQ3hCLGdCQUFnQixFQUFFLFVBQVU7SUFDNUIsa0JBQWtCLEVBQUU7UUFDbEIsWUFBWSxFQUFFLElBQUk7UUFDbEIsWUFBWSxFQUFFLENBQUMsVUFBVSxFQUFFLG1CQUFtQixFQUFFLGVBQWUsQ0FBQztLQUNqRTtJQUNELDRCQUE0QixFQUFFLElBQUk7SUFDbEMsdUJBQXVCLEVBQUUsSUFBSTtJQUM3QixtQkFBbUIsRUFBRTtRQUNuQixZQUFZLEVBQUUsR0FBRztRQUNqQixhQUFhLEVBQUUsR0FBRztLQUNuQjtDQUNGLENBQUM7OzRDQXFCVyxNQUFNLFNBQUMscUJBQXFCLGNBQUcsUUFBUTs7O0FBckN6QywwQkFBMEI7SUFIdEMsVUFBVSxDQUFDO1FBQ1YsVUFBVSxFQUFFLE1BQU07S0FDbkIsQ0FBQztJQXNDYSxtQkFBQSxNQUFNLENBQUMscUJBQXFCLENBQUMsQ0FBQSxFQUFFLG1CQUFBLFFBQVEsRUFBRSxDQUFBOztHQXJDM0MsMEJBQTBCLENBMkZ0QztTQTNGWSwwQkFBMEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3QsIEluamVjdGFibGUsIE9wdGlvbmFsIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBMdXhDb25maWdUb2tlblNlcnZpY2UgfSBmcm9tICcuL2x1eC1jb21wb25lbnRzLWNvbmZpZy5tb2R1bGUnO1xuaW1wb3J0IHsgTHV4Q29tcG9uZW50c0NvbmZpZ1BhcmFtZXRlcnMgfSBmcm9tICcuL2x1eC1jb21wb25lbnRzLWNvbmZpZy1wYXJhbWV0ZXJzLmludGVyZmFjZSc7XG5pbXBvcnQgeyBCZWhhdmlvclN1YmplY3QsIE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcblxuLyoqXG4gKiBEaWVzZXIgU2VydmljZSB3aXJkIGRhenUgdmVyd2VuZGV0LCBhdWYgZGllIEtvbmZpZ3VyYXRpb24gZGVyIEx1eENvbXBvbmVudHMgenV6dWdyZWlmZW4gdW5kIGRpZXNlIGF1c3p1bGVzZW4gYnp3LlxuICogYXVjaCB6dSBha3R1YWxpc2llcmVuLlxuICovXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBMdXhDb21wb25lbnRzQ29uZmlnU2VydmljZSB7XG4gIC8vIEZhbGxiYWNrLUtvbmZpZ3VyYXRpb24sIGZhbGxzIHNvbnN0IGtlaW5lIGdlZnVuZGVuIHdlcmRlbiBrb25udGVcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBERUZBVUxUX0NPTkZJRzogTHV4Q29tcG9uZW50c0NvbmZpZ1BhcmFtZXRlcnMgPSB7XG4gICAgZGlzcGxheUx1eENvbnNvbGVMb2dzOiBmYWxzZSxcbiAgICBnZW5lcmF0ZUx1eFRhZ0lkczogZmFsc2UsXG4gICAgbG9va3VwU2VydmljZVVybDogJy9sb29rdXAvJyxcbiAgICBsYWJlbENvbmZpZ3VyYXRpb246IHtcbiAgICAgIGFsbFVwcGVyY2FzZTogdHJ1ZSxcbiAgICAgIG5vdEFwcGxpZWRUbzogWydsdXgtbGluaycsICdsdXgtc2lkZS1uYXYtaXRlbScsICdsdXgtbWVudS1pdGVtJ11cbiAgICB9LFxuICAgIGNhcmRFeHBhbnNpb25BbmltYXRpb25BY3RpdmU6IHRydWUsXG4gICAgZGlzcGxheUJpbmRpbmdEZWJ1Z0hpbnQ6IHRydWUsXG4gICAgcmlwcGxlQ29uZmlndXJhdGlvbjoge1xuICAgICAgZXhpdER1cmF0aW9uOiA1MDAsXG4gICAgICBlbnRlckR1cmF0aW9uOiA1MDBcbiAgICB9XG4gIH07XG5cbiAgLy8gU3ViamVjdCBtaXQgZGVtIGFrdHVlbGxlbiBLb25maWctV2VydCwgd2VsY2hlciBhdXNnZWxlc2VuIHdlcmRlbiBrYW5uXG4gIHByaXZhdGUgY29uZmlnJDogQmVoYXZpb3JTdWJqZWN0PEx1eENvbXBvbmVudHNDb25maWdQYXJhbWV0ZXJzPiA9IG5ldyBCZWhhdmlvclN1YmplY3Q8THV4Q29tcG9uZW50c0NvbmZpZ1BhcmFtZXRlcnM+KFxuICAgIG51bGxcbiAgKTtcblxuICAvKipcbiAgICogR2lidCBkYXMgT2JzZXJ2YWJsZSBtaXQgZGVyIGFrdHVlbGwgZ2VzZXR6dGVuIEtvbmZpZ3VyYXRpb24genVyw7xjay5cbiAgICovXG4gIGdldCBjb25maWcoKTogT2JzZXJ2YWJsZTxMdXhDb21wb25lbnRzQ29uZmlnUGFyYW1ldGVycz4ge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZyQuYXNPYnNlcnZhYmxlKCk7XG4gIH1cblxuICAvKipcbiAgICogR2lidCBkaWUgYWt0dWVsbCBnZXNldHp0ZSBLb25maWd1cmF0aW9uIGRpcmVrdCB6dXLDvGNrLlxuICAgKi9cbiAgZ2V0IGN1cnJlbnRDb25maWcoKTogTHV4Q29tcG9uZW50c0NvbmZpZ1BhcmFtZXRlcnMge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZyQuZ2V0VmFsdWUoKTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKEBJbmplY3QoTHV4Q29uZmlnVG9rZW5TZXJ2aWNlKSBAT3B0aW9uYWwoKSBjb25maWc6IEx1eENvbXBvbmVudHNDb25maWdQYXJhbWV0ZXJzKSB7XG4gICAgLy8gV2VubiBrZWluZSBLb25maWd1cmF0aW9uIGdlbGFkZW4gd2VyZGVuIGtvbm50ZSwgU3RhbmRhcmQtS29uZmlnIGJlbnV0emVuIHVuZCBlaW5lIFdhcm51bmcgYXVzZ2ViZW4uXG4gICAgaWYgKCFjb25maWcpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgJ0FjaHR1bmc6IEVzIHd1cmRlIGtlaW5lIEtvbmZpZ3VyYXRpb24gZsO8ciBkaWUgTHV4Q29tcG9uZW50cyBkZWZpbmllcnQuXFxuJyxcbiAgICAgICAgJ0JlbnV0emUgU3RhbmRhcmQtS29uZmlndXJhdGlvbjonLFxuICAgICAgICBMdXhDb21wb25lbnRzQ29uZmlnU2VydmljZS5ERUZBVUxUX0NPTkZJR1xuICAgICAgKTtcbiAgICAgIHRoaXMuY29uZmlnJC5uZXh0KEx1eENvbXBvbmVudHNDb25maWdTZXJ2aWNlLkRFRkFVTFRfQ09ORklHKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jb25maWckLm5leHQodGhpcy5tZXJnZURlZmF1bHREYXRhKGNvbmZpZykpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHaWJ0IHp1csO8Y2ssIG9iIGRpZSBMYWJlbHMgYWxzIFVwcGVyY2FzZSBnZWtlbm56ZWljaG5ldCBzaW5kIHVuZCBvYlxuICAgKiBkaWUgw7xiZXJnZWJlbmVuIFNlbGVrdG9yZW4gaW4gZGVuIEF1c25haG1lbiBnZWbDvGhydCBzaW5kLlxuICAgKiBAcGFyYW0gc2VsZWN0b3JcbiAgICovXG4gIGlzTGFiZWxVcHBlcmNhc2VGb3JTZWxlY3RvcihzZWxlY3Rvcjogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgY29uZmlnID0gdGhpcy5jb25maWckLnZhbHVlO1xuICAgIHJldHVybiBjb25maWcubGFiZWxDb25maWd1cmF0aW9uLmFsbFVwcGVyY2FzZSAmJiBjb25maWcubGFiZWxDb25maWd1cmF0aW9uLm5vdEFwcGxpZWRUby5pbmRleE9mKHNlbGVjdG9yKSA9PT0gLTE7XG4gIH1cblxuICAvKipcbiAgICogRXJzZXR6dCBkaWUgYWt0dWVsbGUgS29uZmlndXJhdGlvbiBtaXQgZGVyIMO8YmVyZ2ViZW5lbiAod2VubiBnw7xsdGlnZXIgV2VydCkuXG4gICAqIEBwYXJhbSBjb25maWdcbiAgICovXG4gIHVwZGF0ZUNvbmZpZ3VyYXRpb24oY29uZmlnOiBMdXhDb21wb25lbnRzQ29uZmlnUGFyYW1ldGVycykge1xuICAgIGlmICghY29uZmlnKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0RpZSDDvGJlcmdlYmVuZSBLb25maWd1cmF0aW9uIGlzdCB1bmRlZmluZWQvbnVsbCB1bmQgd2lyZCBuaWNodCDDvGJlcm5vbW1lbi4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jb25maWckLm5leHQodGhpcy5tZXJnZURlZmF1bHREYXRhKGNvbmZpZykpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBLb21iaW5pZXJ0IGRpZSDDvGJlcmdlYmVuZSBLb25maWd1cmF0aW9uIG1pdCBkZXIgU3RhbmRhcmQtS29uZmlnLlxuICAgKlxuICAgKiDDnGJlcm5pbW10IGRpZSBXZXJ0ZSBhdXMgZGVyIFN0YW5kYXJkLUtvbmZpZywgZGllIG5pY2h0IGltIMO8YmVyZ2ViZW5lbiBnZXNldHp0IHd1cmRlbi5cbiAgICogQHBhcmFtIGNvbmZpZ1xuICAgKi9cbiAgcHJpdmF0ZSBtZXJnZURlZmF1bHREYXRhKGNvbmZpZzogTHV4Q29tcG9uZW50c0NvbmZpZ1BhcmFtZXRlcnMpOiBMdXhDb21wb25lbnRzQ29uZmlnUGFyYW1ldGVycyB7XG4gICAgY29uc3QgbWVyZ2VkQ29uZmlnID0ge307XG4gICAgT2JqZWN0LmtleXMoY29uZmlnKS5mb3JFYWNoKChrZXk6IHN0cmluZykgPT4ge1xuICAgICAgbWVyZ2VkQ29uZmlnW2tleV0gPSBjb25maWdba2V5XTtcbiAgICB9KTtcbiAgICBPYmplY3Qua2V5cyhMdXhDb21wb25lbnRzQ29uZmlnU2VydmljZS5ERUZBVUxUX0NPTkZJRykuZm9yRWFjaCgoa2V5OiBzdHJpbmcpID0+IHtcbiAgICAgIGlmIChtZXJnZWRDb25maWdba2V5XSA9PT0gdW5kZWZpbmVkIHx8IG1lcmdlZENvbmZpZ1trZXldID09PSBudWxsKSB7XG4gICAgICAgIG1lcmdlZENvbmZpZ1trZXldID0gTHV4Q29tcG9uZW50c0NvbmZpZ1NlcnZpY2UuREVGQVVMVF9DT05GSUdba2V5XTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbWVyZ2VkQ29uZmlnIGFzIEx1eENvbXBvbmVudHNDb25maWdQYXJhbWV0ZXJzO1xuICB9XG59XG4iXX0=