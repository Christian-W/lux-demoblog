import * as tslib_1 from "tslib";
import { Injectable } from '@angular/core';
import { BehaviorSubject } from 'rxjs';
/**
 * Der LuxStorageService speichert Daten im lokalen Browserstorage.
 * Wenn man beim Speichern (Methode -> setItem) angibt, dass es sich um sensible Daten handelt,
 * können diese einfach über die Methode 'clearSensitiveItems' gelöscht werden.
 */
let LuxStorageService = class LuxStorageService {
    constructor() {
        this.postfixSensitive = '.sensitive';
        this.itemSources = new Map();
        addEventListener('storage', (event) => {
            if (event.key) {
                if (this.itemSources.has(event.key)) {
                    this.itemSources.get(event.key).next(event.newValue);
                }
            }
        });
    }
    /**
     * Diese Methode liefert den Wert für den übergebenen Schlüssel zurück.
     *
     * @param key - Der eindeutige Schlüssel.
     * @returns Liefert den Wert für den übergebenen Schlüssel zurück.
     */
    getItem(key) {
        if (!this.itemSources.has(key)) {
            this.itemSources.set(key, new BehaviorSubject(localStorage.getItem(key)));
        }
        return this.itemSources.get(key).getValue();
    }
    /**
     * Diese Methode liefert ein Observable zurück, das über alle Änderungen an dem Schlüssel informiert wird.
     *
     * @param key - Der eindeutige Schlüssel.
     * @returns Liefert ein Observable zurück, das über alle Änderungen an dem Schlüssel informiert wird.
     */
    getItemAsObservable(key) {
        if (!this.itemSources.has(key)) {
            this.itemSources.set(key, new BehaviorSubject(localStorage.getItem(key)));
        }
        return this.itemSources.get(key).asObservable();
    }
    /**
     * Diese Methode setzt den übergebenen Wert für den Schlüssel. Zusätzlich muss angegeben werden, ob es sich um
     * sensible oder personenbezogene Daten handelt.
     *
     * @param key - Der eindeutige Schlüssel.
     * @param value - Der neue Wert.
     * @param sensitive - Gibt an, ob es sich um sensible oder personenbezogene Daten handelt. Diese können leicht über
     *                    die Methode 'clearSensitiveItems' (z.B. beim Ausloggen) gelöscht werden.
     */
    setItem(key, value, sensitive) {
        try {
            localStorage.setItem(key, value);
            if (sensitive) {
                localStorage.setItem(key + this.postfixSensitive, 'true');
            }
            if (this.itemSources.has(key)) {
                this.itemSources.get(key).next(localStorage.getItem(key));
            }
        }
        catch (error) {
            this.itemSources.get(key).error(error);
        }
    }
    /**
     * Diese Methode entfernt den übergebenen Schlüssel.
     *
     * @param key - Der eindeutige Schlüssel.
     */
    removeItem(key) {
        localStorage.removeItem(key);
        localStorage.removeItem(key + this.postfixSensitive);
        if (this.itemSources.has(key)) {
            this.itemSources.get(key).next(localStorage.getItem(key));
        }
    }
    /**
     * Diese Methode löscht alle sensiblen und personenbezogenen Einträge (d.h. alle Items bei denen das Flag 'sensitive'
     * auf true gesetzt wurde).
     */
    clearSensitiveItems() {
        // Alle Schlüssel sammeln.
        const keys = [];
        for (let i = 0; i < localStorage.length; i++) {
            keys.push(localStorage.key(i));
        }
        // Alle sensiblen Einträge löschen.
        keys.forEach(key => {
            if (key && key.endsWith(this.postfixSensitive)) {
                this.removeItem(key.replace(this.postfixSensitive, ''));
            }
        });
    }
    /**
     * Diese Methode löscht alle Einträge aus dem Storage.
     */
    clearAll() {
        localStorage.clear();
        this.itemSources.forEach((itemSource) => {
            itemSource.next(null);
            itemSource.complete();
        });
        this.itemSources.clear();
    }
};
LuxStorageService = tslib_1.__decorate([
    Injectable(),
    tslib_1.__metadata("design:paramtypes", [])
], LuxStorageService);
export { LuxStorageService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibHV4LXN0b3JhZ2Uuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BpaGstZ2ZpL2x1eC1jb21wb25lbnRzLyIsInNvdXJjZXMiOlsic3JjL2FwcC9tb2R1bGVzL2x1eC11dGlsL2x1eC1zdG9yYWdlLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDM0MsT0FBTyxFQUFFLGVBQWUsRUFBYyxNQUFNLE1BQU0sQ0FBQztBQUVuRDs7OztHQUlHO0FBRUgsSUFBYSxpQkFBaUIsR0FBOUIsTUFBYSxpQkFBaUI7SUFLNUI7UUFKaUIscUJBQWdCLEdBQUcsWUFBWSxDQUFDO1FBRXpDLGdCQUFXLEdBQXlDLElBQUksR0FBRyxFQUFFLENBQUM7UUFHcEUsZ0JBQWdCLENBQUMsU0FBUyxFQUFFLENBQUMsS0FBbUIsRUFBRSxFQUFFO1lBQ2xELElBQUksS0FBSyxDQUFDLEdBQUcsRUFBRTtnQkFDYixJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFBRTtvQkFDbkMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7aUJBQ3REO2FBQ0Y7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRDs7Ozs7T0FLRztJQUNILE9BQU8sQ0FBQyxHQUFXO1FBQ2pCLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRTtZQUM5QixJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsSUFBSSxlQUFlLENBQVMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDbkY7UUFFRCxPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMs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QixDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDM0IsQ0FBQztDQUNGLENBQUE7QUFoSFksaUJBQWlCO0lBRDdCLFVBQVUsRUFBRTs7R0FDQSxpQkFBaUIsQ0FnSDdCO1NBaEhZLGlCQUFpQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCwgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuXG4vKipcbiAqIERlciBMdXhTdG9yYWdlU2VydmljZSBzcGVpY2hlcnQgRGF0ZW4gaW0gbG9rYWxlbiBCcm93c2Vyc3RvcmFnZS5cbiAqIFdlbm4gbWFuIGJlaW0gU3BlaWNoZXJuIChNZXRob2RlIC0+IHNldEl0ZW0pIGFuZ2lidCwgZGFzcyBlcyBzaWNoIHVtIHNlbnNpYmxlIERhdGVuIGhhbmRlbHQsXG4gKiBrw7ZubmVuIGRpZXNlIGVpbmZhY2ggw7xiZXIgZGllIE1ldGhvZGUgJ2NsZWFyU2Vuc2l0aXZlSXRlbXMnIGdlbMO2c2NodCB3ZXJkZW4uXG4gKi9cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBMdXhTdG9yYWdlU2VydmljZSB7XG4gIHByaXZhdGUgcmVhZG9ubHkgcG9zdGZpeFNlbnNpdGl2ZSA9ICcuc2Vuc2l0aXZlJztcblxuICBwcml2YXRlIGl0ZW1Tb3VyY2VzOiBNYXA8c3RyaW5nLCBCZWhhdmlvclN1YmplY3Q8c3RyaW5nPj4gPSBuZXcgTWFwKCk7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgYWRkRXZlbnRMaXN0ZW5lcignc3RvcmFnZScsIChldmVudDogU3RvcmFnZUV2ZW50KSA9PiB7XG4gICAgICBpZiAoZXZlbnQua2V5KSB7XG4gICAgICAgIGlmICh0aGlzLml0ZW1Tb3VyY2VzLmhhcyhldmVudC5rZXkpKSB7XG4gICAgICAgICAgdGhpcy5pdGVtU291cmNlcy5nZXQoZXZlbnQua2V5KS5uZXh0KGV2ZW50Lm5ld1ZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERpZXNlIE1ldGhvZGUgbGllZmVydCBkZW4gV2VydCBmw7xyIGRlbiDDvGJlcmdlYmVuZW4gU2NobMO8c3NlbCB6dXLDvGNrLlxuICAgKlxuICAgKiBAcGFyYW0ga2V5IC0gRGVyIGVpbmRldXRpZ2UgU2NobMO8c3NlbC5cbiAgICogQHJldHVybnMgTGllZmVydCBkZW4gV2VydCBmw7xyIGRlbiDDvGJlcmdlYmVuZW4gU2NobMO8c3NlbCB6dXLDvGNrLlxuICAgKi9cbiAgZ2V0SXRlbShrZXk6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKCF0aGlzLml0ZW1Tb3VyY2VzLmhhcyhrZXkpKSB7XG4gICAgICB0aGlzLml0ZW1Tb3VyY2VzLnNldChrZXksIG5ldyBCZWhhdmlvclN1YmplY3Q8c3RyaW5nPihsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuaXRlbVNvdXJjZXMuZ2V0KGtleSkuZ2V0VmFsdWUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaWVzZSBNZXRob2RlIGxpZWZlcnQgZWluIE9ic2VydmFibGUgenVyw7xjaywgZGFzIMO8YmVyIGFsbGUgw4RuZGVydW5nZW4gYW4gZGVtIFNjaGzDvHNzZWwgaW5mb3JtaWVydCB3aXJkLlxuICAgKlxuICAgKiBAcGFyYW0ga2V5IC0gRGVyIGVpbmRldXRpZ2UgU2NobMO8c3NlbC5cbiAgICogQHJldHVybnMgTGllZmVydCBlaW4gT2JzZXJ2YWJsZSB6dXLDvGNrLCBkYXMgw7xiZXIgYWxsZSDDhG5kZXJ1bmdlbiBhbiBkZW0gU2NobMO8c3NlbCBpbmZvcm1pZXJ0IHdpcmQuXG4gICAqL1xuICBnZXRJdGVtQXNPYnNlcnZhYmxlKGtleTogc3RyaW5nKTogT2JzZXJ2YWJsZTxzdHJpbmc+IHtcbiAgICBpZiAoIXRoaXMuaXRlbVNvdXJjZXMuaGFzKGtleSkpIHtcbiAgICAgIHRoaXMuaXRlbVNvdXJjZXMuc2V0KGtleSwgbmV3IEJlaGF2aW9yU3ViamVjdDxzdHJpbmc+KGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSkpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5pdGVtU291cmNlcy5nZXQoa2V5KS5hc09ic2VydmFibGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaWVzZSBNZXRob2RlIHNldHp0IGRlbiDDvGJlcmdlYmVuZW4gV2VydCBmw7xyIGRlbiBTY2hsw7xzc2VsLiBadXPDpHR6bGljaCBtdXNzIGFuZ2VnZWJlbiB3ZXJkZW4sIG9iIGVzIHNpY2ggdW1cbiAgICogc2Vuc2libGUgb2RlciBwZXJzb25lbmJlem9nZW5lIERhdGVuIGhhbmRlbHQuXG4gICAqXG4gICAqIEBwYXJhbSBrZXkgLSBEZXIgZWluZGV1dGlnZSBTY2hsw7xzc2VsLlxuICAgKiBAcGFyYW0gdmFsdWUgLSBEZXIgbmV1ZSBXZXJ0LlxuICAgKiBAcGFyYW0gc2Vuc2l0aXZlIC0gR2lidCBhbiwgb2IgZXMgc2ljaCB1bSBzZW5zaWJsZSBvZGVyIHBlcnNvbmVuYmV6b2dlbmUgRGF0ZW4gaGFuZGVsdC4gRGllc2Uga8O2bm5lbiBsZWljaHQgw7xiZXJcbiAgICogICAgICAgICAgICAgICAgICAgIGRpZSBNZXRob2RlICdjbGVhclNlbnNpdGl2ZUl0ZW1zJyAoei5CLiBiZWltIEF1c2xvZ2dlbikgZ2Vsw7ZzY2h0IHdlcmRlbi5cbiAgICovXG4gIHNldEl0ZW0oa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIHNlbnNpdGl2ZTogYm9vbGVhbik6IHZvaWQge1xuICAgIHRyeSB7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIHZhbHVlKTtcblxuICAgICAgaWYgKHNlbnNpdGl2ZSkge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXkgKyB0aGlzLnBvc3RmaXhTZW5zaXRpdmUsICd0cnVlJyk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5pdGVtU291cmNlcy5oYXMoa2V5KSkge1xuICAgICAgICB0aGlzLml0ZW1Tb3VyY2VzLmdldChrZXkpLm5leHQobG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuaXRlbVNvdXJjZXMuZ2V0KGtleSkuZXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEaWVzZSBNZXRob2RlIGVudGZlcm50IGRlbiDDvGJlcmdlYmVuZW4gU2NobMO8c3NlbC5cbiAgICpcbiAgICogQHBhcmFtIGtleSAtIERlciBlaW5kZXV0aWdlIFNjaGzDvHNzZWwuXG4gICAqL1xuICByZW1vdmVJdGVtKGtleTogc3RyaW5nKTogdm9pZCB7XG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkgKyB0aGlzLnBvc3RmaXhTZW5zaXRpdmUpO1xuXG4gICAgaWYgKHRoaXMuaXRlbVNvdXJjZXMuaGFzKGtleSkpIHtcbiAgICAgIHRoaXMuaXRlbVNvdXJjZXMuZ2V0KGtleSkubmV4dChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGllc2UgTWV0aG9kZSBsw7ZzY2h0IGFsbGUgc2Vuc2libGVuIHVuZCBwZXJzb25lbmJlem9nZW5lbiBFaW50csOkZ2UgKGQuaC4gYWxsZSBJdGVtcyBiZWkgZGVuZW4gZGFzIEZsYWcgJ3NlbnNpdGl2ZSdcbiAgICogYXVmIHRydWUgZ2VzZXR6dCB3dXJkZSkuXG4gICAqL1xuICBjbGVhclNlbnNpdGl2ZUl0ZW1zKCk6IHZvaWQge1xuICAgIC8vIEFsbGUgU2NobMO8c3NlbCBzYW1tZWxuLlxuICAgIGNvbnN0IGtleXM6IHN0cmluZ1tdID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsb2NhbFN0b3JhZ2UubGVuZ3RoOyBpKyspIHtcbiAgICAgIGtleXMucHVzaChsb2NhbFN0b3JhZ2Uua2V5KGkpKTtcbiAgICB9XG5cbiAgICAvLyBBbGxlIHNlbnNpYmxlbiBFaW50csOkZ2UgbMO2c2NoZW4uXG4gICAga2V5cy5mb3JFYWNoKGtleSA9PiB7XG4gICAgICBpZiAoa2V5ICYmIGtleS5lbmRzV2l0aCh0aGlzLnBvc3RmaXhTZW5zaXRpdmUpKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlSXRlbShrZXkucmVwbGFjZSh0aGlzLnBvc3RmaXhTZW5zaXRpdmUsICcnKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRGllc2UgTWV0aG9kZSBsw7ZzY2h0IGFsbGUgRWludHLDpGdlIGF1cyBkZW0gU3RvcmFnZS5cbiAgICovXG4gIGNsZWFyQWxsKCk6IHZvaWQge1xuICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpO1xuICAgIHRoaXMuaXRlbVNvdXJjZXMuZm9yRWFjaCgoaXRlbVNvdXJjZTogQmVoYXZpb3JTdWJqZWN0PHN0cmluZz4pID0+IHtcbiAgICAgIGl0ZW1Tb3VyY2UubmV4dChudWxsKTtcbiAgICAgIGl0ZW1Tb3VyY2UuY29tcGxldGUoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuaXRlbVNvdXJjZXMuY2xlYXIoKTtcbiAgfVxufVxuIl19