import * as tslib_1 from "tslib";
import { Component, Input } from '@angular/core';
let LuxImageComponent = class LuxImageComponent {
    constructor() {
        this.luxImageSrc = '';
        this.luxImageWidth = 'auto';
        this.luxImageHeight = 'auto';
        this.luxRawSrc = false;
    }
    ngOnChanges(simpleChanges) {
        if (simpleChanges.luxImageSrc) {
            if (!this.luxRawSrc) {
                this.updateImageSrc();
            }
        }
        else if (simpleChanges.luxRawSrc) {
            if (!this.luxRawSrc) {
                this.updateImageSrc();
            }
        }
    }
    ngOnInit() { }
    updateImageSrc() {
        if (this.luxImageSrc) {
            // Pruefen ob es sich um ein externes Bild handelt
            if (this.luxImageSrc.startsWith('http')) {
                this.sanitizeImageSrc();
            }
            else {
                // Wenn nicht, auf den Assets-Ordner verweisen
                if (this.luxImageSrc.indexOf('asset') === -1) {
                    this.luxImageSrc = 'assets/' + this.luxImageSrc;
                }
                this.sanitizeImageSrc();
            }
        }
    }
    sanitizeImageSrc() {
        // Doppelte Slashes entfernen
        this.luxImageSrc = this.luxImageSrc.replace(/\/\/+/g, '/');
        // Fuehrende Slashes entfernen
        if (this.luxImageSrc.startsWith('/')) {
            this.luxImageSrc = this.luxImageSrc.slice(1, this.luxImageSrc.length);
        }
    }
};
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", String)
], LuxImageComponent.prototype, "luxImageSrc", void 0);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", String)
], LuxImageComponent.prototype, "luxImageWidth", void 0);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", String)
], LuxImageComponent.prototype, "luxImageHeight", void 0);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Boolean)
], LuxImageComponent.prototype, "luxRawSrc", void 0);
LuxImageComponent = tslib_1.__decorate([
    Component({
        selector: 'lux-image',
        template: "<div>\n  <img [src]=\"luxImageSrc\" class=\"lux-image\" [ngStyle]=\"{ width: luxImageWidth, height: luxImageHeight }\" />\n</div>\n",
        styles: [":host{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;max-height:100%;max-width:100%}div{display:-webkit-box;display:-ms-flexbox;display:flex;max-height:100%;height:100%;width:100%}"]
    }),
    tslib_1.__metadata("design:paramtypes", [])
], LuxImageComponent);
export { LuxImageComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibHV4LWltYWdlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BpaGstZ2ZpL2x1eC1jb21wb25lbnRzLyIsInNvdXJjZXMiOlsic3JjL2FwcC9tb2R1bGVzL2x1eC1pY29uL2x1eC1pbWFnZS9sdXgtaW1hZ2UuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBb0MsTUFBTSxlQUFlLENBQUM7QUFPbkYsSUFBYSxpQkFBaUIsR0FBOUIsTUFBYSxpQkFBaUI7SUFNNUI7UUFMUyxnQkFBVyxHQUFXLEVBQUUsQ0FBQztRQUN6QixrQkFBYSxHQUFXLE1BQU0sQ0FBQztRQUMvQixtQkFBYyxHQUFXLE1BQU0sQ0FBQztRQUNoQyxjQUFTLEdBQVksS0FBSyxDQUFDO0lBRXJCLENBQUM7SUFFaEIsV0FBVyxDQUFDLGFBQTRCO1FBQ3RDLElBQUksYUFBYSxDQUFDLFdBQVcsRUFBRTtZQUM3QixJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRTtnQkFDbkIsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO2FBQ3ZCO1NBQ0Y7YUFBTSxJQUFJLGFBQWEsQ0FBQyxTQUFTLEVBQUU7WUFDbEMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUU7Z0JBQ25CLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQzthQUN2QjtTQUNGO0lBQ0gsQ0FBQztJQUVELFFBQVEsS0FBSSxDQUFDO0lBRUwsY0FBYztRQUNwQixJQUFJLElBQUksQ0FBQyxXQUFXLEVBQUU7WUFDcEIsa0RBQWtEO1lBQ2xELElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLEVBQUU7Z0JBQ3ZDLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO2FBQ3pCO2lCQUFNO2dCQUNMLDhDQUE4QztnQkFDOUMsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRTtvQkFDNUMsSUFBSSxDQUFDLFdBQVcsR0FBRyxTQUFTLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQztpQkFDakQ7Z0JBQ0QsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7YUFDekI7U0FDRjtJQUNILENBQUM7SUFFTyxnQkFBZ0I7UUFDdEIsNkJBQTZCO1FBQzdCLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQzNELDhCQUE4QjtRQUM5QixJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxFQUFFO1lBQ3BDLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUM7U0FDdkU7SUFDSCxDQUFDO0NBQ0YsQ0FBQTtBQTVDVTtJQUFSLEtBQUssRUFBRTs7c0RBQTBCO0FBQ3pCO0lBQVIsS0FBSyxFQUFFOzt3REFBZ0M7QUFDL0I7SUFBUixLQUFLLEVBQUU7O3lEQUFpQztBQUNoQztJQUFSLEtBQUssRUFBRTs7b0RBQTRCO0FBSnpCLGlCQUFpQjtJQUw3QixTQUFTLENBQUM7UUFDVCxRQUFRLEVBQUUsV0FBVztRQUNyQiwrSUFBeUM7O0tBRTFDLENBQUM7O0dBQ1csaUJBQWlCLENBNkM3QjtTQTdDWSxpQkFBaUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBPbkNoYW5nZXMsIE9uSW5pdCwgU2ltcGxlQ2hhbmdlcyB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdsdXgtaW1hZ2UnLFxuICB0ZW1wbGF0ZVVybDogJy4vbHV4LWltYWdlLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vbHV4LWltYWdlLmNvbXBvbmVudC5zY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgTHV4SW1hZ2VDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcyB7XG4gIEBJbnB1dCgpIGx1eEltYWdlU3JjOiBzdHJpbmcgPSAnJztcbiAgQElucHV0KCkgbHV4SW1hZ2VXaWR0aDogc3RyaW5nID0gJ2F1dG8nO1xuICBASW5wdXQoKSBsdXhJbWFnZUhlaWdodDogc3RyaW5nID0gJ2F1dG8nO1xuICBASW5wdXQoKSBsdXhSYXdTcmM6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcigpIHt9XG5cbiAgbmdPbkNoYW5nZXMoc2ltcGxlQ2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xuICAgIGlmIChzaW1wbGVDaGFuZ2VzLmx1eEltYWdlU3JjKSB7XG4gICAgICBpZiAoIXRoaXMubHV4UmF3U3JjKSB7XG4gICAgICAgIHRoaXMudXBkYXRlSW1hZ2VTcmMoKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHNpbXBsZUNoYW5nZXMubHV4UmF3U3JjKSB7XG4gICAgICBpZiAoIXRoaXMubHV4UmF3U3JjKSB7XG4gICAgICAgIHRoaXMudXBkYXRlSW1hZ2VTcmMoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBuZ09uSW5pdCgpIHt9XG5cbiAgcHJpdmF0ZSB1cGRhdGVJbWFnZVNyYygpIHtcbiAgICBpZiAodGhpcy5sdXhJbWFnZVNyYykge1xuICAgICAgLy8gUHJ1ZWZlbiBvYiBlcyBzaWNoIHVtIGVpbiBleHRlcm5lcyBCaWxkIGhhbmRlbHRcbiAgICAgIGlmICh0aGlzLmx1eEltYWdlU3JjLnN0YXJ0c1dpdGgoJ2h0dHAnKSkge1xuICAgICAgICB0aGlzLnNhbml0aXplSW1hZ2VTcmMoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFdlbm4gbmljaHQsIGF1ZiBkZW4gQXNzZXRzLU9yZG5lciB2ZXJ3ZWlzZW5cbiAgICAgICAgaWYgKHRoaXMubHV4SW1hZ2VTcmMuaW5kZXhPZignYXNzZXQnKSA9PT0gLTEpIHtcbiAgICAgICAgICB0aGlzLmx1eEltYWdlU3JjID0gJ2Fzc2V0cy8nICsgdGhpcy5sdXhJbWFnZVNyYztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNhbml0aXplSW1hZ2VTcmMoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNhbml0aXplSW1hZ2VTcmMoKSB7XG4gICAgLy8gRG9wcGVsdGUgU2xhc2hlcyBlbnRmZXJuZW5cbiAgICB0aGlzLmx1eEltYWdlU3JjID0gdGhpcy5sdXhJbWFnZVNyYy5yZXBsYWNlKC9cXC9cXC8rL2csICcvJyk7XG4gICAgLy8gRnVlaHJlbmRlIFNsYXNoZXMgZW50ZmVybmVuXG4gICAgaWYgKHRoaXMubHV4SW1hZ2VTcmMuc3RhcnRzV2l0aCgnLycpKSB7XG4gICAgICB0aGlzLmx1eEltYWdlU3JjID0gdGhpcy5sdXhJbWFnZVNyYy5zbGljZSgxLCB0aGlzLmx1eEltYWdlU3JjLmxlbmd0aCk7XG4gICAgfVxuICB9XG59XG4iXX0=