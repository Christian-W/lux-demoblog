import * as tslib_1 from "tslib";
import { AfterViewInit, ChangeDetectorRef, Component, ComponentFactory, ComponentFactoryResolver, ComponentRef, ContentChildren, ElementRef, EventEmitter, Input, Output, QueryList, ViewContainerRef } from '@angular/core';
import { LuxStepperHelperService } from './lux-stepper-helper.service';
import { LuxStepComponent } from './lux-stepper-subcomponents/lux-step.component';
import { LuxIconComponent } from '../../lux-icon/lux-icon/lux-icon.component';
import { LuxUtil } from '../../lux-util/lux-util';
let LuxStepperComponent = class LuxStepperComponent {
    constructor(stepperService, cdr, cfr, elementRef) {
        this.stepperService = stepperService;
        this.cdr = cdr;
        this.cfr = cfr;
        this.elementRef = elementRef;
        this._DEFAULT_PREV_BTN_CONF = {
            label: 'Zurück'
        };
        this._DEFAULT_NEXT_BTN_CONF = {
            label: 'Weiter'
        };
        this._DEFAULT_FIN_BTN_CONF = {
            label: 'Abschließen',
            color: 'primary'
        };
        this.luxFinishButtonClicked = new EventEmitter();
        this.luxStepChanged = new EventEmitter();
        this.luxCurrentStepNumberChange = new EventEmitter();
        this.stepperConfiguration = {
            luxCurrentStepNumber: 0,
            luxShowNavigationButtons: true,
            luxHorizontalStepAnimationActive: true,
            luxEditedIconName: 'fa-pencil'
        };
        // Die Default-Konfiguration präventiv als Startwert setzen
        this.luxPreviousButtonConfig = this._DEFAULT_PREV_BTN_CONF;
        this.luxNextButtonConfig = this._DEFAULT_NEXT_BTN_CONF;
        this.luxFinishButtonConfig = this._DEFAULT_FIN_BTN_CONF;
        // Den Stepper im Helper-Service bekannt machen
        this.stepperService.registerStepper(this);
    }
    ngAfterViewInit() {
        // Änderungen an den luxSteps sollten auch dem Konfigurationsobjekt bekannt gemacht werden
        this.luxSteps.changes.subscribe(() => {
            this.stepperConfiguration.luxSteps = this.luxSteps.toArray();
            this.cdr.detectChanges();
        });
        // Initial die aktuellen luxSteps in die Konfiguration schreiben
        this.stepperConfiguration.luxSteps = this.luxSteps.toArray();
        this.cdr.detectChanges();
        // Falls initial bereits bestimmt wurde, dass individuelle Icons genutzt werden, diese generieren
        if (this.stepperConfiguration.luxUseCustomIcons) {
            this.generateCustomIcons();
        }
        // Auf next/previous Aufrufe aus dem Service horchen und entsprechend reagieren
        this.stepperService.getObservable(this).subscribe((next) => {
            // Voraussetzung: Stepper nicht deaktiviert
            if (!this.stepperConfiguration.luxDisabled) {
                if (next === true) {
                    this.checkValidation();
                    this.matStepper.next();
                    this.matStepper._stepHeader.toArray()[this.matStepper.selectedIndex].focus();
                }
                else if (next === false) {
                    this.matStepper.previous();
                    this.matStepper._stepHeader.toArray()[this.matStepper.selectedIndex].focus();
                }
            }
        });
        // Änderungen an den Icons jedes einzelnen Steps führt zu Neugenerierung aller individuellen Icons
        // ==> Material erlaubt leider nur alle Icons identisch zu ändern, nicht für jeden Step einzeln, deshalb
        // generieren wir selbst die Icons.
        this.luxSteps.toArray().forEach((luxStep) => {
            luxStep.getIconChangeObsv().subscribe((iconChange) => {
                if (this.stepperConfiguration.luxUseCustomIcons && iconChange) {
                    this.clearCustomIcons();
                    this.generateCustomIcons();
                }
            });
        });
        this.setFocusedCSS(this.luxCurrentStepNumber);
        this.cdr.detectChanges();
    }
    /**
     * Wird beim Wechsel des aktuellen Steps (Klick auf Tab oder .next()/.previous() Aufruf) aufgerufen.
     * @param $event
     */
    onStepChanged($event) {
        this.luxCurrentStepNumber = $event.selectedIndex;
        this.luxStepChanged.emit($event);
        const matStepHeaders = this.elementRef.nativeElement.querySelectorAll('mat-step-header');
        if (matStepHeaders.item($event.selectedIndex).className.indexOf('lux-step-header-touched') === -1) {
            matStepHeaders.item($event.selectedIndex).className += ' lux-step-header-touched';
        }
        this.setFocusedCSS($event.selectedIndex);
    }
    /**
     * Generiert die individuellen Icons fuer die Steps.
     */
    generateCustomIcons() {
        const factory = this.cfr.resolveComponentFactory(LuxIconComponent);
        let index = 0;
        this.matStepLabels.forEach((stepLabel) => {
            this.generateCustomIconForStep(stepLabel, this.luxSteps.toArray()[index], factory);
            index++;
        });
    }
    /**
     * Entfernt die eigenen Icons fuer die Steps.
     */
    clearCustomIcons() {
        this.matStepLabels.forEach((stepLabel) => {
            stepLabel.clear();
        });
    }
    /**
     * Stößt die Validierungsprüfung für den aktuell sichtbaren Step und dessen StepControl (wenn vorhanden) an.
     */
    checkValidation() {
        const stepControl = this.luxSteps.toArray()[this.stepperConfiguration.luxCurrentStepNumber].luxStepControl;
        if (stepControl) {
            LuxUtil.showValidationErrors(stepControl);
        }
    }
    /**
     * Generiert die Icons fuer einen einzelnen Step
     * @param stepLabel
     * @param luxStep
     * @param factory
     */
    generateCustomIconForStep(stepLabel, luxStep, factory) {
        if (luxStep && luxStep.luxIconName) {
            // Das edited und normal Icon generieren
            const componentIconEdited = stepLabel.createComponent(factory);
            const instanceIconEdited = componentIconEdited.instance;
            instanceIconEdited.luxIconName = this.luxEditedIconName;
            instanceIconEdited.luxIconSize = '2x';
            instanceIconEdited.luxRounded = true;
            instanceIconEdited.luxMargin = '0 8px 0 0';
            componentIconEdited.location.nativeElement.className += ' lux-stepper-edited-icon';
            const componentIconNormal = stepLabel.createComponent(factory);
            const instanceIconNormal = componentIconNormal.instance;
            instanceIconNormal.luxIconName = luxStep.luxIconName;
            instanceIconNormal.luxIconSize = '2x';
            instanceIconNormal.luxRounded = true;
            instanceIconNormal.luxMargin = '0 8px 0 0';
            componentIconNormal.location.nativeElement.className += ' lux-stepper-normal-icon';
        }
    }
    /**
     * Aktualisiert die aktuellen Icons, entfernt zunächst die individuellen Icons und
     * versucht anschließend diese neu zu generieren (nötig bei Änderungen).
     */
    updateIcons() {
        if (this.matStepLabels) {
            this.clearCustomIcons();
            if (this.stepperConfiguration.luxUseCustomIcons) {
                this.generateCustomIcons();
            }
        }
    }
    setFocusedCSS(index) {
        const matStepHeaders = this.elementRef.nativeElement.querySelectorAll('mat-step-header');
        if (matStepHeaders.item(index).className.indexOf('lux-step-header-touched') === -1) {
            matStepHeaders.item(index).className += ' lux-step-header-touched';
        }
    }
    // region ###### Accessoren, die auf die stepperConfiguration verweisen ######
    /**** Getter/Setter luxCurrentStepNumber ****/
    get luxCurrentStepNumber() {
        return this.stepperConfiguration.luxCurrentStepNumber;
    }
    set luxCurrentStepNumber(step) {
        if (step !== this.luxCurrentStepNumber) {
            setTimeout(() => {
                // OutOfBound-Steps abfangen
                step = step < 0 ? 0 : step;
                step = step >= this.luxSteps.length ? this.luxSteps.length - 1 : step;
                this.stepperConfiguration.luxCurrentStepNumber = step;
                this.luxCurrentStepNumberChange.emit(this.stepperConfiguration.luxCurrentStepNumber);
            });
        }
    }
    /**** Getter/Setter luxUseCustomIcons ****/
    get luxUseCustomIcons() {
        return this.stepperConfiguration.luxUseCustomIcons;
    }
    set luxUseCustomIcons(use) {
        this.stepperConfiguration.luxUseCustomIcons = use;
        setTimeout(() => {
            this.updateIcons();
        });
    }
    /**** Getter/Setter luxEditedIconName ****/
    get luxEditedIconName() {
        return this.stepperConfiguration.luxEditedIconName;
    }
    set luxEditedIconName(iconName) {
        this.stepperConfiguration.luxEditedIconName = iconName;
        this.updateIcons();
    }
    /**** Getter/Setter luxVerticalStepper ****/
    get luxVerticalStepper() {
        return this.stepperConfiguration.luxVerticalStepper;
    }
    set luxVerticalStepper(vertical) {
        this.stepperConfiguration.luxVerticalStepper = vertical;
    }
    /**** Getter/Setter luxLinear ****/
    get luxLinear() {
        return this.stepperConfiguration.luxLinear;
    }
    set luxLinear(linear) {
        this.stepperConfiguration.luxLinear = linear;
    }
    /**** Getter/Setter luxDisabled ****/
    get luxDisabled() {
        return this.stepperConfiguration.luxDisabled;
    }
    set luxDisabled(disabled) {
        this.stepperConfiguration.luxDisabled = disabled;
    }
    /**** Getter/Setter luxShowNavigationButtons ****/
    get luxShowNavigationButtons() {
        return this.stepperConfiguration.luxShowNavigationButtons;
    }
    set luxShowNavigationButtons(showNavButtons) {
        this.stepperConfiguration.luxShowNavigationButtons = showNavButtons;
    }
    /**** Getter/Setter luxHorizontalStepAnimationActive ****/
    get luxHorizontalStepAnimationActive() {
        return this.stepperConfiguration.luxHorizontalStepAnimationActive;
    }
    set luxHorizontalStepAnimationActive(animationActive) {
        this.stepperConfiguration.luxHorizontalStepAnimationActive = animationActive;
    }
    /**** Getter/Setter luxPreviousButtonConfig ****/
    get luxPreviousButtonConfig() {
        return this.stepperConfiguration.luxPreviousButtonConfig;
    }
    set luxPreviousButtonConfig(config) {
        this.stepperConfiguration.luxPreviousButtonConfig = config ? config : this._DEFAULT_PREV_BTN_CONF;
    }
    /**** Getter/Setter luxNextButtonConfig ****/
    get luxNextButtonConfig() {
        return this.stepperConfiguration.luxNextButtonConfig;
    }
    set luxNextButtonConfig(config) {
        this.stepperConfiguration.luxNextButtonConfig = config ? config : this._DEFAULT_NEXT_BTN_CONF;
    }
    /**** Getter/Setter luxFinishButtonConfig ****/
    get luxFinishButtonConfig() {
        return this.stepperConfiguration.luxFinishButtonConfig;
    }
    set luxFinishButtonConfig(config) {
        this.stepperConfiguration.luxFinishButtonConfig = config ? config : this._DEFAULT_FIN_BTN_CONF;
    }
};
LuxStepperComponent.ctorParameters = () => [
    { type: LuxStepperHelperService },
    { type: ChangeDetectorRef },
    { type: ComponentFactoryResolver },
    { type: ElementRef }
];
tslib_1.__decorate([
    ContentChildren(LuxStepComponent),
    tslib_1.__metadata("design:type", QueryList)
], LuxStepperComponent.prototype, "luxSteps", void 0);
tslib_1.__decorate([
    Output(),
    tslib_1.__metadata("design:type", EventEmitter)
], LuxStepperComponent.prototype, "luxFinishButtonClicked", void 0);
tslib_1.__decorate([
    Output(),
    tslib_1.__metadata("design:type", EventEmitter)
], LuxStepperComponent.prototype, "luxStepChanged", void 0);
tslib_1.__decorate([
    Output(),
    tslib_1.__metadata("design:type", EventEmitter)
], LuxStepperComponent.prototype, "luxCurrentStepNumberChange", void 0);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Number),
    tslib_1.__metadata("design:paramtypes", [Number])
], LuxStepperComponent.prototype, "luxCurrentStepNumber", null);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Boolean),
    tslib_1.__metadata("design:paramtypes", [Boolean])
], LuxStepperComponent.prototype, "luxUseCustomIcons", null);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", String),
    tslib_1.__metadata("design:paramtypes", [String])
], LuxStepperComponent.prototype, "luxEditedIconName", null);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Boolean),
    tslib_1.__metadata("design:paramtypes", [Boolean])
], LuxStepperComponent.prototype, "luxVerticalStepper", null);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Boolean),
    tslib_1.__metadata("design:paramtypes", [Boolean])
], LuxStepperComponent.prototype, "luxLinear", null);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Boolean),
    tslib_1.__metadata("design:paramtypes", [Boolean])
], LuxStepperComponent.prototype, "luxDisabled", null);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Boolean),
    tslib_1.__metadata("design:paramtypes", [Boolean])
], LuxStepperComponent.prototype, "luxShowNavigationButtons", null);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Boolean),
    tslib_1.__metadata("design:paramtypes", [Boolean])
], LuxStepperComponent.prototype, "luxHorizontalStepAnimationActive", null);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Object),
    tslib_1.__metadata("design:paramtypes", [Object])
], LuxStepperComponent.prototype, "luxPreviousButtonConfig", null);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Object),
    tslib_1.__metadata("design:paramtypes", [Object])
], LuxStepperComponent.prototype, "luxNextButtonConfig", null);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Object),
    tslib_1.__metadata("design:paramtypes", [Object])
], LuxStepperComponent.prototype, "luxFinishButtonConfig", null);
LuxStepperComponent = tslib_1.__decorate([
    Component({
        selector: 'lux-stepper',
        template: "<ng-container [ngSwitch]=\"luxVerticalStepper\">\n  <!-- VERTIKALER STEPPER -->\n  <lux-stepper-vertical\n    [luxStepperConfig]=\"stepperConfiguration\"\n    (luxMatStepperLoaded)=\"matStepper = $event\"\n    (luxMatStepLabelsLoaded)=\"matStepLabels = $event\"\n    (luxStepChanged)=\"onStepChanged($event)\"\n    (luxFinButtonClicked)=\"luxFinishButtonClicked.emit($event)\"\n    (luxPrevButtonClicked)=\"stepperService.previousStep(this)\"\n    (luxNextButtonClicked)=\"stepperService.nextStep(this)\"\n    (luxCheckValidation)=\"checkValidation()\"\n    ngClass.sm=\"lux-stepper-mobile\"\n    ngClass.xs=\"lux-stepper-mobile\"\n    *ngSwitchCase=\"true\"\n  >\n  </lux-stepper-vertical>\n  <!-- HORIZONTALER STEPPER -->\n  <lux-stepper-horizontal\n    [luxStepperConfig]=\"stepperConfiguration\"\n    (luxMatStepperLoaded)=\"matStepper = $event\"\n    (luxMatStepLabelsLoaded)=\"matStepLabels = $event\"\n    (luxStepChanged)=\"onStepChanged($event)\"\n    (luxFinButtonClicked)=\"luxFinishButtonClicked.emit($event)\"\n    (luxPrevButtonClicked)=\"stepperService.previousStep(this)\"\n    (luxNextButtonClicked)=\"stepperService.nextStep(this)\"\n    (luxCheckValidation)=\"checkValidation()\"\n    ngClass.sm=\"lux-stepper-mobile\"\n    ngClass.xs=\"lux-stepper-mobile\"\n    *ngSwitchDefault\n  >\n  </lux-stepper-horizontal>\n</ng-container>\n\n<ng-content select=\"lux-step\"></ng-content>\n<div class=\"lux-stepper-disabled-overlay\" [class.lux-hidden]=\"!luxDisabled\"></div>\n",
        styles: ["@charset \"UTF-8\";lux-side-nav .lux-side-nav-item,lux-side-nav lux-link{box-sizing:border-box}lux-side-nav .lux-side-nav-item.lux-side-nav-item-selected,lux-side-nav lux-link.lux-side-nav-item-selected{background-color:rgba(112,141,170,.2)!important;position:relative;border-radius:4px}lux-side-nav .lux-side-nav-item.lux-side-nav-item-selected:after,lux-side-nav lux-link.lux-side-nav-item-selected:after{content:'';left:0;width:6px;top:0;bottom:0;position:absolute;border-left:6px solid #0073b3;border-radius:4px 0 0 4px}lux-side-nav .lux-side-nav-item button .mat-button-focus-overlay,lux-side-nav lux-link button .mat-button-focus-overlay{display:none}lux-side-nav .lux-side-nav-item button:focus,lux-side-nav lux-link button:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}lux-side-nav .lux-side-nav-item button:hover,lux-side-nav lux-link button:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-list{border:4px solid transparent}lux-list:focus{outline-width:0;border:4px solid rgba(112,141,170,.2)!important}lux-list lux-list-item:focus{outline-width:0}lux-list lux-list-item:focus mat-card{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}lux-list lux-list-item lux-card.lux-list-item-selected mat-card{background-color:rgba(112,141,170,.2)!important;position:relative;border-radius:4px}lux-list lux-list-item lux-card.lux-list-item-selected mat-card:after{content:'';left:0;width:6px;top:0;bottom:0;position:absolute;border-left:6px solid #0073b3;border-radius:4px 0 0 4px}lux-list lux-list-item lux-card mat-card{box-sizing:border-box}lux-list lux-list-item lux-card mat-card:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .lux-form-control-label>*{color:#335c85}lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .cdk-focused .mat-radio-container,lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .mat-checkbox-inner-container,lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .mat-slide-toggle-thumb{position:relative}lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .cdk-focused .mat-radio-container:after,lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .mat-checkbox-inner-container:after,lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .mat-slide-toggle-thumb:after{content:\"\";border:1px solid rgba(112,141,170,.2);background-color:rgba(112,141,170,.2);display:block;top:-4px;left:-4px;right:-4px;bottom:-4px;border-radius:15px;z-index:1;position:absolute}lux-form-control .lux-form-control:not(.lux-form-control-disabled).lux-focused .lux-form-control-container:after{content:'';display:block;box-sizing:border-box;left:0;right:0;position:absolute;height:2px;border-bottom:2px solid #0073b3}lux-datepicker mat-datepicker-toggle button:focus:after{content:\"\";border:1px solid rgba(112,141,170,.2);background-color:rgba(112,141,170,.2);display:block;top:-4px;left:-4px;right:-4px;bottom:-4px;border-radius:15px;z-index:1;position:absolute}.lux-datepicker-panel .mat-calendar-header button .mat-button-focus-overlay,lux-datepicker mat-datepicker-toggle .mat-button-focus-overlay{display:none}.lux-datepicker-panel .mat-calendar-header button:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}.lux-datepicker-panel .mat-calendar-header button:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}.lux-datepicker-panel .mat-calendar-content td.mat-calendar-body-cell:hover>div{background-color:rgba(0,0,0,.2)!important;border-radius:999px}.lux-datepicker-panel .mat-calendar-content td.mat-calendar-body-cell.mat-calendar-body-active>div{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:999px}lux-table tr:hover>td,lux-table tr:hover>th{border-radius:0;background-color:#cfcfcf!important}lux-table th button.mat-sort-header-button:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}.lux-select-panel mat-option{border-left:0;box-sizing:border-box}.lux-select-panel mat-option.mat-selected{background-color:rgba(112,141,170,.2)!important;position:relative;border-radius:4px}.lux-select-panel mat-option.mat-selected:after{content:'';left:0;width:6px;top:0;bottom:0;position:absolute;border-left:6px solid #0073b3;border-radius:4px 0 0 4px}.lux-select-panel mat-option:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}.lux-select-panel mat-option.mat-active,.lux-select-panel mat-option:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-button button:not([disabled]) .mat-button-focus-overlay{display:none}lux-button button:not([disabled]):not(.mat-fab):not(.mat-raised-button):focus{background-color:rgba(112,141,170,.2)!important}lux-button button:not([disabled]):not(.mat-fab):not(.mat-raised-button):hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-button button:not([disabled]).mat-fab:focus,lux-button button:not([disabled]).mat-raised-button:focus{background-color:rgba(112,141,170,.2)!important}lux-button button:not([disabled]).mat-fab:focus.mat-accent,lux-button button:not([disabled]).mat-raised-button:focus.mat-accent{background-color:#b6d184!important}lux-button button:not([disabled]).mat-fab:focus.mat-warn,lux-button button:not([disabled]).mat-raised-button:focus.mat-warn{background-color:#ea2524!important}lux-button button:not([disabled]).mat-fab:focus.mat-primary,lux-button button:not([disabled]).mat-raised-button:focus.mat-primary{background-color:#4b82ba!important}.lux-autocomplete-panel mat-option{border-left:0;box-sizing:border-box}.lux-autocomplete-panel mat-option:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}.lux-autocomplete-panel mat-option.mat-active,.lux-autocomplete-panel mat-option:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-tabs mat-ink-bar{background-color:#0073b3!important}lux-tabs .mat-tab-label:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}lux-panel mat-expansion-panel-header:hover,lux-stepper mat-step-header:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-panel mat-expansion-panel-header:focus,lux-stepper mat-step-header:focus,lux-stepper mat-step-header[aria-selected=true],lux-tile mat-card:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}lux-master-detail lux-master-header .lux-master-header-collapse button.lux-button:not(.mat-fab):not(.mat-raised-button):focus{background-color:rgba(0,0,0,.2)!important}lux-file-list .lux-file-list{border:4px solid transparent}lux-file-list .lux-file-list:focus{outline-width:0;border:4px solid rgba(112,141,170,.2)!important}lux-file-list .lux-file-list .lux-file-list-entry{border:4px solid transparent}lux-file-list .lux-file-list .lux-file-list-entry:focus{outline-width:0;border:4px solid rgba(112,141,170,.2)!important}lux-file-list .lux-file-list mat-card{margin:4px}.lux-menu-panel .lux-menu-item:not([disabled=true]):focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}.lux-menu-panel .lux-menu-item:not([disabled=true]):hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}lux-dialog-structure lux-dialog-content:focus,lux-dialog-structure lux-dialog-title:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}example-root .example-base-components-list .example-component-list-item,example-root .example-base-components-list mat-expansion-panel-header{box-sizing:border-box}example-root .example-base-components-list .example-component-list-item.example-component-list-item-selected,example-root .example-base-components-list mat-expansion-panel-header.example-component-list-item-selected{background-color:rgba(112,141,170,.2)!important;position:relative;border-radius:4px}example-root .example-base-components-list .example-component-list-item.example-component-list-item-selected:after,example-root .example-base-components-list mat-expansion-panel-header.example-component-list-item-selected:after{content:'';left:0;width:6px;top:0;bottom:0;position:absolute;border-left:6px solid #0073b3;border-radius:4px 0 0 4px}example-root .example-base-components-list .example-component-list-item:focus,example-root .example-base-components-list mat-expansion-panel-header:focus{outline-width:0!important;outline-style:unset;background-color:rgba(112,141,170,.2)!important;border-radius:4px}example-root .example-base-components-list .example-component-list-item:hover,example-root .example-base-components-list mat-expansion-panel-header:hover{background-color:rgba(0,0,0,.2)!important;border-radius:4px}.lux-app-container,body,html{height:100%}.lux-app-container{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex}body{-webkit-overflow-scrolling:touch}div{font-family:Roboto,Helvetica Neue,sans-serif}.cdk-overlay-backdrop.cdk-overlay-backdrop-showing.lux-file-preview-backdrop{background:#000;opacity:.8!important}lux-card.lux-card-grow{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;width:400px;min-width:0}lux-card.lux-card-grow mat-card,lux-card.lux-card-grow mat-card-content{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0}.lux-crop{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.lux-label{color:rgba(0,0,0,.54);font-size:75%}.lux-hint{color:rgba(0,0,0,.6);font-size:12px}.lux-display-none{display:none}.lux-hidden{visibility:hidden}.lux-nowrap{white-space:nowrap}.lux-cursor{cursor:pointer}.lux-block-pointer-events{pointer-events:none}.lux-vertical-align-baseline{vertical-align:baseline!important}.lux-black-semi-transparent{color:rgba(0,0,0,.87)}.lux-semi-transparent{opacity:.6}.lux-overflow-y-hidden{overflow-y:hidden}.lux-overflow-y-auto{overflow-y:auto}.lux-overflow-wrap-break-word{overflow-wrap:break-word}.lux-bold{font-weight:700!important}.lux-uppercase{text-transform:uppercase!important}.lux-lowercase{text-transform:lowercase!important}.lux-hyphenate{overflow-wrap:break-word;word-wrap:break-word;word-break:normal;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow-x:auto}.lux-p-footer,.lux-p-header{padding:8px}.lux-snackbar{top:68px;right:8px;position:absolute;margin:0!important;min-width:unset!important;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-snack-bar-handset .lux-snackbar{left:8px;width:auto!important}.lux-mt-0{margin-top:0}.lux-pt-0{padding-top:0}.lux-mt-1{margin-top:2px}.lux-pt-1{padding-top:2px}.lux-mt-2{margin-top:4px}.lux-pt-2{padding-top:4px}.lux-mt-3{margin-top:8px}.lux-pt-3{padding-top:8px}.lux-mt-4{margin-top:16px}.lux-pt-4{padding-top:16px}.lux-mb-0{margin-bottom:0}.lux-pb-0{padding-bottom:0}.lux-mb-1{margin-bottom:2px}.lux-pb-1{padding-bottom:2px}.lux-mb-2{margin-bottom:4px}.lux-pb-2{padding-bottom:4px}.lux-mb-3{margin-bottom:8px}.lux-pb-3{padding-bottom:8px}.lux-mb-4{margin-bottom:16px}.lux-pb-4{padding-bottom:16px}.lux-ml-0{margin-left:0}.lux-pl-0{padding-left:0}.lux-ml-1{margin-left:2px}.lux-pl-1{padding-left:2px}.lux-ml-2{margin-left:4px}.lux-pl-2{padding-left:4px}.lux-ml-3{margin-left:8px}.lux-pl-3{padding-left:8px}.lux-ml-4{margin-left:16px}.lux-pl-4{padding-left:16px}.lux-m-0{margin:0}.lux-mr-0{margin-right:0}.lux-p-0{padding:0}.lux-pr-0{padding-right:0}.lux-m-1{margin:2px}.lux-mr-1{margin-right:2px}.lux-p-1{padding:2px}.lux-pr-1{padding-right:2px}.lux-m-2{margin:4px}.lux-mr-2{margin-right:4px}.lux-p-2{padding:4px}.lux-pr-2{padding-right:4px}.lux-m-3{margin:8px}.lux-mr-3{margin-right:8px}.lux-p-3{padding:8px}.lux-pr-3{padding-right:8px}.lux-m-4{margin:16px}.lux-mr-4{margin-right:16px}.lux-p-4{padding:16px}.lux-pr-4{padding-right:16px}.lux-flex-layout-gap-10[style*=row]>:not(:last-child){margin-right:10px}.lux-flex-layout-gap-10[style*=column]>:not(:last-child){margin-bottom:10px}.lux-flex-layout-gap-20[style*=row]>:not(:last-child){margin-right:20px}.lux-flex-layout-gap-20[style*=column]>:not(:last-child){margin-bottom:20px}.lux-flex-layout-gap-30[style*=row]>:not(:last-child){margin-right:30px}.lux-flex-layout-gap-30[style*=column]>:not(:last-child){margin-bottom:30px}.lux-z-index-100{z-index:100}.lux-z-index-500{z-index:500}.lux-z-index-1000{z-index:1000}.lux-uppercase>lux-button .lux-button-label,lux-button.lux-uppercase .lux-button-label{text-transform:uppercase}.lux-bg-color-red{background:#b01211}.lux-bg-color-green{background:#95bc4c}.lux-bg-color-yellow{background:#ebc000}.lux-bg-color-blue{background:#335c85}.lux-bg-color-gray{background:#c8c8c8}.lux-bg-color-orange{background:#ec9c1b}.lux-bg-color-brown{background:#783f04}.lux-font-color-black{color:#000}.lux-font-color-white{color:#fff}.lux-badge-notification.mat-badge-large .mat-badge-content{font-size:15px}.lux-badge-notification.lux-badge-color-default .mat-badge-content{color:#000;background:#fff;border:1px solid rgba(0,0,0,.87)}:host{position:relative;display:block}:host ::ng-deep .lux-stepper-content-section,:host ::ng-deep .mat-horizontal-stepper-content[aria-expanded=true],:host ::ng-deep .mat-vertical-stepper-content{padding:8px}:host ::ng-deep .mat-horizontal-stepper-header-container{padding:8px 8px 0}:host ::ng-deep .mat-vertical-stepper-header{margin:8px 8px 0}:host ::ng-deep mat-step-header .mat-step-icon,:host ::ng-deep mat-step-header .mat-step-icon-not-touched{width:40px;height:40px;font-size:2em;box-sizing:border-box}:host ::ng-deep mat-step-header .mat-step-icon .mat-icon{font-size:32px;width:32px;height:32px}:host ::ng-deep mat-step-header .mat-step-label{height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;font-weight:400}:host ::ng-deep mat-step-header lux-step-header{color:rgba(0,0,0,.38)!important}:host ::ng-deep mat-step-header .mat-step-icon{background:rgba(0,0,0,.38);color:#fff}:host ::ng-deep mat-step-header.lux-step-header-touched .mat-step-icon-state-edit+.mat-step-label lux-step-header,:host ::ng-deep mat-step-header.lux-step-header-touched[aria-selected=true] lux-step-header{color:rgba(0,0,0,.87)!important}:host ::ng-deep mat-step-header.lux-step-header-touched .mat-step-icon-state-edit+.mat-step-label .lux-stepper-edited-icon i,:host ::ng-deep mat-step-header.lux-step-header-touched .mat-step-icon-state-edit+.mat-step-label .lux-stepper-edited-icon mat-icon,:host ::ng-deep mat-step-header.lux-step-header-touched .mat-step-icon-state-edit+.mat-step-label .lux-stepper-normal-icon i,:host ::ng-deep mat-step-header.lux-step-header-touched .mat-step-icon-state-edit+.mat-step-label .lux-stepper-normal-icon mat-icon,:host ::ng-deep mat-step-header.lux-step-header-touched[aria-selected=true] .lux-stepper-edited-icon i,:host ::ng-deep mat-step-header.lux-step-header-touched[aria-selected=true] .lux-stepper-edited-icon mat-icon,:host ::ng-deep mat-step-header.lux-step-header-touched[aria-selected=true] .lux-stepper-normal-icon i,:host ::ng-deep mat-step-header.lux-step-header-touched[aria-selected=true] .lux-stepper-normal-icon mat-icon{background-color:#335c85}:host ::ng-deep mat-step-header.lux-step-header-touched .mat-step-icon-state-edit,:host ::ng-deep mat-step-header.lux-step-header-touched[aria-selected=true] .mat-step-icon-state-number{background:#335c85;color:#fff}:host ::ng-deep .lux-ignore-mat-step-icons ::ng-deep mat-step-header .mat-step-icon,:host ::ng-deep .lux-ignore-mat-step-icons ::ng-deep mat-step-header .mat-step-icon-not-touched{display:none}:host ::ng-deep .lux-ignore-mat-step-icons ::ng-deep mat-step-header lux-icon{margin-right:8px!important}:host ::ng-deep .lux-ignore-mat-step-icons ::ng-deep mat-step-header lux-icon>.lux-material-icon,:host ::ng-deep .lux-ignore-mat-step-icons ::ng-deep mat-step-header lux-icon>i{font-size:25px;width:32px;height:32px;text-align:center}:host ::ng-deep .lux-ignore-mat-step-icons ::ng-deep mat-step-header lux-icon.lux-stepper-edited-icon{display:none}:host ::ng-deep .lux-ignore-mat-step-icons ::ng-deep mat-step-header lux-icon.lux-stepper-normal-icon{display:block}:host ::ng-deep .lux-ignore-mat-step-icons ::ng-deep mat-step-header lux-icon>i,:host ::ng-deep .lux-ignore-mat-step-icons ::ng-deep mat-step-header lux-icon>mat-icon{background-color:rgba(0,0,0,.38);color:#fff}:host ::ng-deep .lux-ignore-mat-step-icons ::ng-deep mat-step-header lux-icon>i:before{padding-top:2px;display:block}:host ::ng-deep .lux-ignore-mat-step-icons ::ng-deep mat-step-header .mat-step-icon-state-edit+.mat-step-label lux-icon.lux-stepper-edited-icon{display:block}:host ::ng-deep .lux-ignore-mat-step-icons ::ng-deep mat-step-header .mat-step-icon-state-edit+.mat-step-label lux-icon.lux-stepper-normal-icon{display:none}:host ::ng-deep .mat-step-optional{position:absolute;bottom:15px;right:0;font-style:italic}:host ::ng-deep lux-step-content>lux-card>mat-card{margin:0!important}.lux-stepper-disabled-overlay{position:absolute;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.04)}.lux-stepper-mobile ::ng-deep .lux-stepper-content-section,.lux-stepper-mobile ::ng-deep .mat-horizontal-stepper-content[aria-expanded=true],.lux-stepper-mobile ::ng-deep .mat-vertical-stepper-content{padding:4px}.lux-stepper-mobile ::ng-deep .mat-vertical-stepper-content{padding-left:8px}.lux-stepper-mobile ::ng-deep .mat-horizontal-stepper-header-container{padding:4px 4px 0}.lux-stepper-mobile ::ng-deep .mat-vertical-stepper-header{margin:4px 4px 0}.lux-stepper-mobile ::ng-deep mat-horizontal-stepper lux-step-header{display:none}.lux-stepper-mobile ::ng-deep mat-horizontal-stepper .mat-stepper-horizontal-line{margin:0;min-width:16px}.lux-stepper-mobile ::ng-deep mat-horizontal-stepper mat-step-header{padding:0 8px}.lux-stepper-mobile ::ng-deep mat-horizontal-stepper.lux-ignore-mat-step-icons .mat-step-label{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;min-width:40px}.lux-stepper-mobile ::ng-deep mat-horizontal-stepper.lux-ignore-mat-step-icons .mat-step-label .lux-stepper-edited-icon,.lux-stepper-mobile ::ng-deep mat-horizontal-stepper.lux-ignore-mat-step-icons .mat-step-label .lux-stepper-normal-icon{margin:0!important}.lux-stepper-mobile ::ng-deep mat-horizontal-stepper:not(.lux-ignore-mat-step-icons) .mat-step-label{display:none}.lux-stepper-mobile ::ng-deep mat-horizontal-stepper:not(.lux-ignore-mat-step-icons) .mat-step-icon{margin:0!important}"]
    }),
    tslib_1.__metadata("design:paramtypes", [LuxStepperHelperService,
        ChangeDetectorRef,
        ComponentFactoryResolver,
        ElementRef])
], LuxStepperComponent);
export { LuxStepperComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibHV4LXN0ZXBwZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGloay1nZmkvbHV4LWNvbXBvbmVudHMvIiwic291cmNlcyI6WyJzcmMvYXBwL21vZHVsZXMvbHV4LWxheW91dC9sdXgtc3RlcHBlci9sdXgtc3RlcHBlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFDTCxhQUFhLEVBQ2IsaUJBQWlCLEVBQ2pCLFNBQVMsRUFDVCxnQkFBZ0IsRUFDaEIsd0JBQXdCLEVBQ3hCLFlBQVksRUFDWixlQUFlLEVBQ2YsVUFBVSxFQUNWLFlBQVksRUFDWixLQUFLLEVBQ0wsTUFBTSxFQUNOLFNBQVMsRUFDVCxnQkFBZ0IsRUFDakIsTUFBTSxlQUFlLENBQUM7QUFFdkIsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFDdkUsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sZ0RBQWdELENBQUM7QUFHbEYsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sNENBQTRDLENBQUM7QUFDOUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBUWxELElBQWEsbUJBQW1CLEdBQWhDLE1BQWEsbUJBQW1CO0lBNEI5QixZQUNTLGNBQXVDLEVBQ3RDLEdBQXNCLEVBQ3RCLEdBQTZCLEVBQzdCLFVBQXNCO1FBSHZCLG1CQUFjLEdBQWQsY0FBYyxDQUF5QjtRQUN0QyxRQUFHLEdBQUgsR0FBRyxDQUFtQjtRQUN0QixRQUFHLEdBQUgsR0FBRyxDQUEwQjtRQUM3QixlQUFVLEdBQVYsVUFBVSxDQUFZO1FBL0JmLDJCQUFzQixHQUE0QjtZQUNqRSxLQUFLLEVBQUUsUUFBUTtTQUNoQixDQUFDO1FBQ2UsMkJBQXNCLEdBQTRCO1lBQ2pFLEtBQUssRUFBRSxRQUFRO1NBQ2hCLENBQUM7UUFDZSwwQkFBcUIsR0FBNEI7WUFDaEUsS0FBSyxFQUFFLGFBQWE7WUFDcEIsS0FBSyxFQUFFLFNB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REFLUDtBQU9RO0lBQVIsS0FBSyxFQUFFOzs7NERBR1A7QUFPUTtJQUFSLEtBQUssRUFBRTs7OzZEQUVQO0FBT1E7SUFBUixLQUFLLEVBQUU7OztvREFFUDtBQU9RO0lBQVIsS0FBSyxFQUFFOzs7c0RBRVA7QUFPUTtJQUFSLEtBQUssRUFBRTs7O21FQUVQO0FBT1E7SUFBUixLQUFLLEVBQUU7OzsyRUFFUDtBQU9RO0lBQVIsS0FBSyxFQUFFOzs7a0VBRVA7QUFPUTtJQUFSLEtBQUssRUFBRTs7OzhEQUVQO0FBT1E7SUFBUixLQUFLLEVBQUU7OztnRUFFUDtBQTNTVSxtQkFBbUI7SUFML0IsU0FBUyxDQUFDO1FBQ1QsUUFBUSxFQUFFLGFBQWE7UUFDdkIsNDlDQUEyQzs7S0FFNUMsQ0FBQzs2Q0E4QnlCLHVCQUF1QjtRQUNqQyxpQkFBaUI7UUFDakIsd0JBQXdCO1FBQ2pCLFVBQVU7R0FoQ3JCLG1CQUFtQixDQThTL0I7U0E5U1ksbUJBQW1CIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQWZ0ZXJWaWV3SW5pdCxcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gIENvbXBvbmVudCxcbiAgQ29tcG9uZW50RmFjdG9yeSxcbiAgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLFxuICBDb21wb25lbnRSZWYsXG4gIENvbnRlbnRDaGlsZHJlbixcbiAgRWxlbWVudFJlZixcbiAgRXZlbnRFbWl0dGVyLFxuICBJbnB1dCxcbiAgT3V0cHV0LFxuICBRdWVyeUxpc3QsXG4gIFZpZXdDb250YWluZXJSZWZcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBJTHV4U3RlcHBlckJ1dHRvbkNvbmZpZyB9IGZyb20gJy4vbHV4LXN0ZXBwZXItbW9kZWwvbHV4LXN0ZXBwZXItYnV0dG9uLWNvbmZpZy5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgTHV4U3RlcHBlckhlbHBlclNlcnZpY2UgfSBmcm9tICcuL2x1eC1zdGVwcGVyLWhlbHBlci5zZXJ2aWNlJztcbmltcG9ydCB7IEx1eFN0ZXBDb21wb25lbnQgfSBmcm9tICcuL2x1eC1zdGVwcGVyLXN1YmNvbXBvbmVudHMvbHV4LXN0ZXAuY29tcG9uZW50JztcbmltcG9ydCB7IElMdXhTdGVwcGVyQ29uZmlndXJhdGlvbiB9IGZyb20gJy4vbHV4LXN0ZXBwZXItbW9kZWwvbHV4LXN0ZXBwZXItY29uZmlndXJhdGlvbi5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgTWF0SG9yaXpvbnRhbFN0ZXBwZXIsIE1hdFZlcnRpY2FsU3RlcHBlciB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsJztcbmltcG9ydCB7IEx1eEljb25Db21wb25lbnQgfSBmcm9tICcuLi8uLi9sdXgtaWNvbi9sdXgtaWNvbi9sdXgtaWNvbi5jb21wb25lbnQnO1xuaW1wb3J0IHsgTHV4VXRpbCB9IGZyb20gJy4uLy4uL2x1eC11dGlsL2x1eC11dGlsJztcbmltcG9ydCB7IFN0ZXBwZXJTZWxlY3Rpb25FdmVudCB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9zdGVwcGVyJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbHV4LXN0ZXBwZXInLFxuICB0ZW1wbGF0ZVVybDogJy4vbHV4LXN0ZXBwZXIuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9sdXgtc3RlcHBlci5jb21wb25lbnQuc2NzcyddXG59KVxuZXhwb3J0IGNsYXNzIEx1eFN0ZXBwZXJDb21wb25lbnQgaW1wbGVtZW50cyBBZnRlclZpZXdJbml0IHtcbiAgcHJpdmF0ZSByZWFkb25seSBfREVGQVVMVF9QUkVWX0JUTl9DT05GOiBJTHV4U3RlcHBlckJ1dHRvbkNvbmZpZyA9IHtcbiAgICBsYWJlbDogJ1p1csO8Y2snXG4gIH07XG4gIHByaXZhdGUgcmVhZG9ubHkgX0RFRkFVTFRfTkVYVF9CVE5fQ09ORjogSUx1eFN0ZXBwZXJCdXR0b25Db25maWcgPSB7XG4gICAgbGFiZWw6ICdXZWl0ZXInXG4gIH07XG4gIHByaXZhdGUgcmVhZG9ubHkgX0RFRkFVTFRfRklOX0JUTl9DT05GOiBJTHV4U3RlcHBlckJ1dHRvbkNvbmZpZyA9IHtcbiAgICBsYWJlbDogJ0Fic2NobGllw59lbicsXG4gICAgY29sb3I6ICdwcmltYXJ5J1xuICB9O1xuXG4gIEBDb250ZW50Q2hpbGRyZW4oTHV4U3RlcENvbXBvbmVudCkgbHV4U3RlcHM6IFF1ZXJ5TGlzdDxMdXhTdGVwQ29tcG9uZW50PjtcblxuICBAT3V0cHV0KCkgbHV4RmluaXNoQnV0dG9uQ2xpY2tlZDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gIEBPdXRwdXQoKSBsdXhTdGVwQ2hhbmdlZDogRXZlbnRFbWl0dGVyPFN0ZXBwZXJTZWxlY3Rpb25FdmVudD4gPSBuZXcgRXZlbnRFbWl0dGVyPFN0ZXBwZXJTZWxlY3Rpb25FdmVudD4oKTtcbiAgQE91dHB1dCgpIGx1eEN1cnJlbnRTdGVwTnVtYmVyQ2hhbmdlOiBFdmVudEVtaXR0ZXI8bnVtYmVyPiA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpO1xuXG4gIG1hdFN0ZXBwZXI6IE1hdEhvcml6b250YWxTdGVwcGVyIHwgTWF0VmVydGljYWxTdGVwcGVyO1xuICBtYXRTdGVwTGFiZWxzOiBWaWV3Q29udGFpbmVyUmVmW107XG5cbiAgc3RlcHBlckNvbmZpZ3VyYXRpb246IElMdXhTdGVwcGVyQ29uZmlndXJhdGlvbiA9IHtcbiAgICBsdXhDdXJyZW50U3RlcE51bWJlcjogMCxcbiAgICBsdXhTaG93TmF2aWdhdGlvbkJ1dHRvbnM6IHRydWUsXG4gICAgbHV4SG9yaXpvbnRhbFN0ZXBBbmltYXRpb25BY3RpdmU6IHRydWUsXG4gICAgbHV4RWRpdGVkSWNvbk5hbWU6ICdmYS1wZW5jaWwnXG4gIH07XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIHN0ZXBwZXJTZXJ2aWNlOiBMdXhTdGVwcGVySGVscGVyU2VydmljZSxcbiAgICBwcml2YXRlIGNkcjogQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgcHJpdmF0ZSBjZnI6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcbiAgICBwcml2YXRlIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWZcbiAgKSB7XG4gICAgLy8gRGllIERlZmF1bHQtS29uZmlndXJhdGlvbiBwcsOkdmVudGl2IGFscyBTdGFydHdlcnQgc2V0emVuXG4gICAgdGhpcy5sdXhQcmV2aW91c0J1dHRvbkNvbmZpZyA9IHRoaXMuX0RFRkFVTFRfUFJFVl9CVE5fQ09ORjtcbiAgICB0aGlzLmx1eE5leHRCdXR0b25Db25maWcgPSB0aGlzLl9ERUZBVUxUX05FWFRfQlROX0NPTkY7XG4gICAgdGhpcy5sdXhGaW5pc2hCdXR0b25Db25maWcgPSB0aGlzLl9ERUZBVUxUX0ZJTl9CVE5fQ09ORjtcbiAgICAvLyBEZW4gU3RlcHBlciBpbSBIZWxwZXItU2VydmljZSBiZWthbm50IG1hY2hlblxuICAgIHRoaXMuc3RlcHBlclNlcnZpY2UucmVnaXN0ZXJTdGVwcGVyKHRoaXMpO1xuICB9XG5cbiAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgIC8vIMOEbmRlcnVuZ2VuIGFuIGRlbiBsdXhTdGVwcyBzb2xsdGVuIGF1Y2ggZGVtIEtvbmZpZ3VyYXRpb25zb2JqZWt0IGJla2FubnQgZ2VtYWNodCB3ZXJkZW5cbiAgICB0aGlzLmx1eFN0ZXBzLmNoYW5nZXMuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgIHRoaXMuc3RlcHBlckNvbmZpZ3VyYXRpb24ubHV4U3RlcHMgPSB0aGlzLmx1eFN0ZXBzLnRvQXJyYXkoKTtcbiAgICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcbiAgICB9KTtcbiAgICAvLyBJbml0aWFsIGRpZSBha3R1ZWxsZW4gbHV4U3RlcHMgaW4gZGllIEtvbmZpZ3VyYXRpb24gc2NocmVpYmVuXG4gICAgdGhpcy5zdGVwcGVyQ29uZmlndXJhdGlvbi5sdXhTdGVwcyA9IHRoaXMubHV4U3RlcHMudG9BcnJheSgpO1xuICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcblxuICAgIC8vIEZhbGxzIGluaXRpYWwgYmVyZWl0cyBiZXN0aW1tdCB3dXJkZSwgZGFzcyBpbmRpdmlkdWVsbGUgSWNvbnMgZ2VudXR6dCB3ZXJkZW4sIGRpZXNlIGdlbmVyaWVyZW5cbiAgICBpZiAodGhpcy5zdGVwcGVyQ29uZmlndXJhdGlvbi5sdXhVc2VDdXN0b21JY29ucykge1xuICAgICAgdGhpcy5nZW5lcmF0ZUN1c3RvbUljb25zKCk7XG4gICAgfVxuXG4gICAgLy8gQXVmIG5leHQvcHJldmlvdXMgQXVmcnVmZSBhdXMgZGVtIFNlcnZpY2UgaG9yY2hlbiB1bmQgZW50c3ByZWNoZW5kIHJlYWdpZXJlblxuICAgIHRoaXMuc3RlcHBlclNlcnZpY2UuZ2V0T2JzZXJ2YWJsZSh0aGlzKS5zdWJzY3JpYmUoKG5leHQ6IGJvb2xlYW4pID0+IHtcbiAgICAgIC8vIFZvcmF1c3NldHp1bmc6IFN0ZXBwZXIgbmljaHQgZGVha3RpdmllcnRcbiAgICAgIGlmICghdGhpcy5zdGVwcGVyQ29uZmlndXJhdGlvbi5sdXhEaXNhYmxlZCkge1xuICAgICAgICBpZiAobmV4dCA9PT0gdHJ1ZSkge1xuICAgICAgICAgIHRoaXMuY2hlY2tWYWxpZGF0aW9uKCk7XG4gICAgICAgICAgdGhpcy5tYXRTdGVwcGVyLm5leHQoKTtcbiAgICAgICAgICB0aGlzLm1hdFN0ZXBwZXIuX3N0ZXBIZWFkZXIudG9BcnJheSgpW3RoaXMubWF0U3RlcHBlci5zZWxlY3RlZEluZGV4XS5mb2N1cygpO1xuICAgICAgICB9IGVsc2UgaWYgKG5leHQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgdGhpcy5tYXRTdGVwcGVyLnByZXZpb3VzKCk7XG4gICAgICAgICAgdGhpcy5tYXRTdGVwcGVyLl9zdGVwSGVhZGVyLnRvQXJyYXkoKVt0aGlzLm1hdFN0ZXBwZXIuc2VsZWN0ZWRJbmRleF0uZm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gw4RuZGVydW5nZW4gYW4gZGVuIEljb25zIGplZGVzIGVpbnplbG5lbiBTdGVwcyBmw7xocnQgenUgTmV1Z2VuZXJpZXJ1bmcgYWxsZXIgaW5kaXZpZHVlbGxlbiBJY29uc1xuICAgIC8vID09PiBNYXRlcmlhbCBlcmxhdWJ0IGxlaWRlciBudXIgYWxsZSBJY29ucyBpZGVudGlzY2ggenUgw6RuZGVybiwgbmljaHQgZsO8ciBqZWRlbiBTdGVwIGVpbnplbG4sIGRlc2hhbGJcbiAgICAvLyBnZW5lcmllcmVuIHdpciBzZWxic3QgZGllIEljb25zLlxuICAgIHRoaXMubHV4U3RlcHMudG9BcnJheSgpLmZvckVhY2goKGx1eFN0ZXA6IEx1eFN0ZXBDb21wb25lbnQpID0+IHtcbiAgICAgIGx1eFN0ZXAuZ2V0SWNvbkNoYW5nZU9ic3YoKS5zdWJzY3JpYmUoKGljb25DaGFuZ2U6IGJvb2xlYW4pID0+IHtcbiAgICAgICAgaWYgKHRoaXMuc3RlcHBlckNvbmZpZ3VyYXRpb24ubHV4VXNlQ3VzdG9tSWNvbnMgJiYgaWNvbkNoYW5nZSkge1xuICAgICAgICAgIHRoaXMuY2xlYXJDdXN0b21JY29ucygpO1xuICAgICAgICAgIHRoaXMuZ2VuZXJhdGVDdXN0b21JY29ucygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMuc2V0Rm9jdXNlZENTUyh0aGlzLmx1eEN1cnJlbnRTdGVwTnVtYmVyKTtcbiAgICB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XG4gIH1cblxuICAvKipcbiAgICogV2lyZCBiZWltIFdlY2hzZWwgZGVzIGFrdHVlbGxlbiBTdGVwcyAoS2xpY2sgYXVmIFRhYiBvZGVyIC5uZXh0KCkvLnByZXZpb3VzKCkgQXVmcnVmKSBhdWZnZXJ1ZmVuLlxuICAgKiBAcGFyYW0gJGV2ZW50XG4gICAqL1xuICBvblN0ZXBDaGFuZ2VkKCRldmVudDogU3RlcHBlclNlbGVjdGlvbkV2ZW50KSB7XG4gICAgdGhpcy5sdXhDdXJyZW50U3RlcE51bWJlciA9ICRldmVudC5zZWxlY3RlZEluZGV4O1xuICAgIHRoaXMubHV4U3RlcENoYW5nZWQuZW1pdCgkZXZlbnQpO1xuXG4gICAgY29uc3QgbWF0U3RlcEhlYWRlcnM6IE5vZGVMaXN0T2Y8YW55PiA9IHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ21hdC1zdGVwLWhlYWRlcicpO1xuICAgIGlmIChtYXRTdGVwSGVhZGVycy5pdGVtKCRldmVudC5zZWxlY3RlZEluZGV4KS5jbGFzc05hbWUuaW5kZXhPZignbHV4LXN0ZXAtaGVhZGVyLXRvdWNoZWQnKSA9PT0gLTEpIHtcbiAgICAgIG1hdFN0ZXBIZWFkZXJzLml0ZW0oJGV2ZW50LnNlbGVjdGVkSW5kZXgpLmNsYXNzTmFtZSArPSAnIGx1eC1zdGVwLWhlYWRlci10b3VjaGVkJztcbiAgICB9XG5cbiAgICB0aGlzLnNldEZvY3VzZWRDU1MoJGV2ZW50LnNlbGVjdGVkSW5kZXgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyaWVydCBkaWUgaW5kaXZpZHVlbGxlbiBJY29ucyBmdWVyIGRpZSBTdGVwcy5cbiAgICovXG4gIGdlbmVyYXRlQ3VzdG9tSWNvbnMoKSB7XG4gICAgY29uc3QgZmFjdG9yeSA9IHRoaXMuY2ZyLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KEx1eEljb25Db21wb25lbnQpO1xuICAgIGxldCBpbmRleCA9IDA7XG4gICAgdGhpcy5tYXRTdGVwTGFiZWxzLmZvckVhY2goKHN0ZXBMYWJlbDogVmlld0NvbnRhaW5lclJlZikgPT4ge1xuICAgICAgdGhpcy5nZW5lcmF0ZUN1c3RvbUljb25Gb3JTdGVwKHN0ZXBMYWJlbCwgdGhpcy5sdXhTdGVwcy50b0FycmF5KClbaW5kZXhdLCBmYWN0b3J5KTtcbiAgICAgIGluZGV4Kys7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRW50ZmVybnQgZGllIGVpZ2VuZW4gSWNvbnMgZnVlciBkaWUgU3RlcHMuXG4gICAqL1xuICBjbGVhckN1c3RvbUljb25zKCkge1xuICAgIHRoaXMubWF0U3RlcExhYmVscy5mb3JFYWNoKChzdGVwTGFiZWw6IFZpZXdDb250YWluZXJSZWYpID0+IHtcbiAgICAgIHN0ZXBMYWJlbC5jbGVhcigpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0w7bDn3QgZGllIFZhbGlkaWVydW5nc3Byw7xmdW5nIGbDvHIgZGVuIGFrdHVlbGwgc2ljaHRiYXJlbiBTdGVwIHVuZCBkZXNzZW4gU3RlcENvbnRyb2wgKHdlbm4gdm9yaGFuZGVuKSBhbi5cbiAgICovXG4gIGNoZWNrVmFsaWRhdGlvbigpIHtcbiAgICBjb25zdCBzdGVwQ29udHJvbCA9IHRoaXMubHV4U3RlcHMudG9BcnJheSgpW3RoaXMuc3RlcHBlckNvbmZpZ3VyYXRpb24ubHV4Q3VycmVudFN0ZXBOdW1iZXJdLmx1eFN0ZXBDb250cm9sO1xuICAgIGlmIChzdGVwQ29udHJvbCkge1xuICAgICAgTHV4VXRpbC5zaG93VmFsaWRhdGlvbkVycm9ycyhzdGVwQ29udHJvbCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyaWVydCBkaWUgSWNvbnMgZnVlciBlaW5lbiBlaW56ZWxuZW4gU3RlcFxuICAgKiBAcGFyYW0gc3RlcExhYmVsXG4gICAqIEBwYXJhbSBsdXhTdGVwXG4gICAqIEBwYXJhbSBmYWN0b3J5XG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlQ3VzdG9tSWNvbkZvclN0ZXAoXG4gICAgc3RlcExhYmVsOiBWaWV3Q29udGFpbmVyUmVmLFxuICAgIGx1eFN0ZXA6IEx1eFN0ZXBDb21wb25lbnQsXG4gICAgZmFjdG9yeTogQ29tcG9uZW50RmFjdG9yeTxMdXhJY29uQ29tcG9uZW50PlxuICApIHtcbiAgICBpZiAobHV4U3RlcCAmJiBsdXhTdGVwLmx1eEljb25OYW1lKSB7XG4gICAgICAvLyBEYXMgZWRpdGVkIHVuZCBub3JtYWwgSWNvbiBnZW5lcmllcmVuXG4gICAgICBjb25zdCBjb21wb25lbnRJY29uRWRpdGVkOiBDb21wb25lbnRSZWY8THV4SWNvbkNvbXBvbmVudD4gPSBzdGVwTGFiZWwuY3JlYXRlQ29tcG9uZW50KGZhY3RvcnkpO1xuICAgICAgY29uc3QgaW5zdGFuY2VJY29uRWRpdGVkOiBMdXhJY29uQ29tcG9uZW50ID0gY29tcG9uZW50SWNvbkVkaXRlZC5pbnN0YW5jZTtcblxuICAgICAgaW5zdGFuY2VJY29uRWRpdGVkLmx1eEljb25OYW1lID0gdGhpcy5sdXhFZGl0ZWRJY29uTmFtZTtcbiAgICAgIGluc3RhbmNlSWNvbkVkaXRlZC5sdXhJY29uU2l6ZSA9ICcyeCc7XG4gICAgICBpbnN0YW5jZUljb25FZGl0ZWQubHV4Um91bmRlZCA9IHRydWU7XG4gICAgICBpbnN0YW5jZUljb25FZGl0ZWQubHV4TWFyZ2luID0gJzAgOHB4IDAgMCc7XG4gICAgICBjb21wb25lbnRJY29uRWRpdGVkLmxvY2F0aW9uLm5hdGl2ZUVsZW1lbnQuY2xhc3NOYW1lICs9ICcgbHV4LXN0ZXBwZXItZWRpdGVkLWljb24nO1xuXG4gICAgICBjb25zdCBjb21wb25lbnRJY29uTm9ybWFsOiBDb21wb25lbnRSZWY8THV4SWNvbkNvbXBvbmVudD4gPSBzdGVwTGFiZWwuY3JlYXRlQ29tcG9uZW50KGZhY3RvcnkpO1xuICAgICAgY29uc3QgaW5zdGFuY2VJY29uTm9ybWFsOiBMdXhJY29uQ29tcG9uZW50ID0gY29tcG9uZW50SWNvbk5vcm1hbC5pbnN0YW5jZTtcbiAgICAgIGluc3RhbmNlSWNvbk5vcm1hbC5sdXhJY29uTmFtZSA9IGx1eFN0ZXAubHV4SWNvbk5hbWU7XG4gICAgICBpbnN0YW5jZUljb25Ob3JtYWwubHV4SWNvblNpemUgPSAnMngnO1xuICAgICAgaW5zdGFuY2VJY29uTm9ybWFsLmx1eFJvdW5kZWQgPSB0cnVlO1xuICAgICAgaW5zdGFuY2VJY29uTm9ybWFsLmx1eE1hcmdpbiA9ICcwIDhweCAwIDAnO1xuICAgICAgY29tcG9uZW50SWNvbk5vcm1hbC5sb2NhdGlvbi5uYXRpdmVFbGVtZW50LmNsYXNzTmFtZSArPSAnIGx1eC1zdGVwcGVyLW5vcm1hbC1pY29uJztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWt0dWFsaXNpZXJ0IGRpZSBha3R1ZWxsZW4gSWNvbnMsIGVudGZlcm50IHp1bsOkY2hzdCBkaWUgaW5kaXZpZHVlbGxlbiBJY29ucyB1bmRcbiAgICogdmVyc3VjaHQgYW5zY2hsaWXDn2VuZCBkaWVzZSBuZXUgenUgZ2VuZXJpZXJlbiAobsO2dGlnIGJlaSDDhG5kZXJ1bmdlbikuXG4gICAqL1xuICBwcml2YXRlIHVwZGF0ZUljb25zKCkge1xuICAgIGlmICh0aGlzLm1hdFN0ZXBMYWJlbHMpIHtcbiAgICAgIHRoaXMuY2xlYXJDdXN0b21JY29ucygpO1xuICAgICAgaWYgKHRoaXMuc3RlcHBlckNvbmZpZ3VyYXRpb24ubHV4VXNlQ3VzdG9tSWNvbnMpIHtcbiAgICAgICAgdGhpcy5nZW5lcmF0ZUN1c3RvbUljb25zKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzZXRGb2N1c2VkQ1NTKGluZGV4OiBudW1iZXIpIHtcbiAgICBjb25zdCBtYXRTdGVwSGVhZGVyczogTm9kZUxpc3RPZjxhbnk+ID0gdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnbWF0LXN0ZXAtaGVhZGVyJyk7XG4gICAgaWYgKG1hdFN0ZXBIZWFkZXJzLml0ZW0oaW5kZXgpLmNsYXNzTmFtZS5pbmRleE9mKCdsdXgtc3RlcC1oZWFkZXItdG91Y2hlZCcpID09PSAtMSkge1xuICAgICAgbWF0U3RlcEhlYWRlcnMuaXRlbShpbmRleCkuY2xhc3NOYW1lICs9ICcgbHV4LXN0ZXAtaGVhZGVyLXRvdWNoZWQnO1xuICAgIH1cbiAgfVxuXG4gIC8vIHJlZ2lvbiAjIyMjIyMgQWNjZXNzb3JlbiwgZGllIGF1ZiBkaWUgc3RlcHBlckNvbmZpZ3VyYXRpb24gdmVyd2Vpc2VuICMjIyMjI1xuXG4gIC8qKioqIEdldHRlci9TZXR0ZXIgbHV4Q3VycmVudFN0ZXBOdW1iZXIgKioqKi9cbiAgZ2V0IGx1eEN1cnJlbnRTdGVwTnVtYmVyKCkge1xuICAgIHJldHVybiB0aGlzLnN0ZXBwZXJDb25maWd1cmF0aW9uLmx1eEN1cnJlbnRTdGVwTnVtYmVyO1xuICB9XG5cbiAgQElucHV0KCkgc2V0IGx1eEN1cnJlbnRTdGVwTnVtYmVyKHN0ZXA6IG51bWJlcikge1xuICAgIGlmIChzdGVwICE9PSB0aGlzLmx1eEN1cnJlbnRTdGVwTnVtYmVyKSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgLy8gT3V0T2ZCb3VuZC1TdGVwcyBhYmZhbmdlblxuICAgICAgICBzdGVwID0gc3RlcCA8IDAgPyAwIDogc3RlcDtcbiAgICAgICAgc3RlcCA9IHN0ZXAgPj0gdGhpcy5sdXhTdGVwcy5sZW5ndGggPyB0aGlzLmx1eFN0ZXBzLmxlbmd0aCAtIDEgOiBzdGVwO1xuXG4gICAgICAgIHRoaXMuc3RlcHBlckNvbmZpZ3VyYXRpb24ubHV4Q3VycmVudFN0ZXBOdW1iZXIgPSBzdGVwO1xuICAgICAgICB0aGlzLmx1eEN1cnJlbnRTdGVwTnVtYmVyQ2hhbmdlLmVtaXQodGhpcy5zdGVwcGVyQ29uZmlndXJhdGlvbi5sdXhDdXJyZW50U3RlcE51bWJlcik7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKioqKiBHZXR0ZXIvU2V0dGVyIGx1eFVzZUN1c3RvbUljb25zICoqKiovXG4gIGdldCBsdXhVc2VDdXN0b21JY29ucygpIHtcbiAgICByZXR1cm4gdGhpcy5zdGVwcGVyQ29uZmlndXJhdGlvbi5sdXhVc2VDdXN0b21JY29ucztcbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBsdXhVc2VDdXN0b21JY29ucyh1c2U6IGJvb2xlYW4pIHtcbiAgICB0aGlzLnN0ZXBwZXJDb25maWd1cmF0aW9uLmx1eFVzZUN1c3RvbUljb25zID0gdXNlO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy51cGRhdGVJY29ucygpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqKiogR2V0dGVyL1NldHRlciBsdXhFZGl0ZWRJY29uTmFtZSAqKioqL1xuICBnZXQgbHV4RWRpdGVkSWNvbk5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RlcHBlckNvbmZpZ3VyYXRpb24ubHV4RWRpdGVkSWNvbk5hbWU7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgbHV4RWRpdGVkSWNvbk5hbWUoaWNvbk5hbWU6IHN0cmluZykge1xuICAgIHRoaXMuc3RlcHBlckNvbmZpZ3VyYXRpb24ubHV4RWRpdGVkSWNvbk5hbWUgPSBpY29uTmFtZTtcbiAgICB0aGlzLnVwZGF0ZUljb25zKCk7XG4gIH1cblxuICAvKioqKiBHZXR0ZXIvU2V0dGVyIGx1eFZlcnRpY2FsU3RlcHBlciAqKioqL1xuICBnZXQgbHV4VmVydGljYWxTdGVwcGVyKCkge1xuICAgIHJldHVybiB0aGlzLnN0ZXBwZXJDb25maWd1cmF0aW9uLmx1eFZlcnRpY2FsU3RlcHBlcjtcbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBsdXhWZXJ0aWNhbFN0ZXBwZXIodmVydGljYWw6IGJvb2xlYW4pIHtcbiAgICB0aGlzLnN0ZXBwZXJDb25maWd1cmF0aW9uLmx1eFZlcnRpY2FsU3RlcHBlciA9IHZlcnRpY2FsO1xuICB9XG5cbiAgLyoqKiogR2V0dGVyL1NldHRlciBsdXhMaW5lYXIgKioqKi9cbiAgZ2V0IGx1eExpbmVhcigpIHtcbiAgICByZXR1cm4gdGhpcy5zdGVwcGVyQ29uZmlndXJhdGlvbi5sdXhMaW5lYXI7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgbHV4TGluZWFyKGxpbmVhcjogYm9vbGVhbikge1xuICAgIHRoaXMuc3RlcHBlckNvbmZpZ3VyYXRpb24ubHV4TGluZWFyID0gbGluZWFyO1xuICB9XG5cbiAgLyoqKiogR2V0dGVyL1NldHRlciBsdXhEaXNhYmxlZCAqKioqL1xuICBnZXQgbHV4RGlzYWJsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RlcHBlckNvbmZpZ3VyYXRpb24ubHV4RGlzYWJsZWQ7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgbHV4RGlzYWJsZWQoZGlzYWJsZWQ6IGJvb2xlYW4pIHtcbiAgICB0aGlzLnN0ZXBwZXJDb25maWd1cmF0aW9uLmx1eERpc2FibGVkID0gZGlzYWJsZWQ7XG4gIH1cblxuICAvKioqKiBHZXR0ZXIvU2V0dGVyIGx1eFNob3dOYXZpZ2F0aW9uQnV0dG9ucyAqKioqL1xuICBnZXQgbHV4U2hvd05hdmlnYXRpb25CdXR0b25zKCkge1xuICAgIHJldHVybiB0aGlzLnN0ZXBwZXJDb25maWd1cmF0aW9uLmx1eFNob3dOYXZpZ2F0aW9uQnV0dG9ucztcbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBsdXhTaG93TmF2aWdhdGlvbkJ1dHRvbnMoc2hvd05hdkJ1dHRvbnM6IGJvb2xlYW4pIHtcbiAgICB0aGlzLnN0ZXBwZXJDb25maWd1cmF0aW9uLmx1eFNob3dOYXZpZ2F0aW9uQnV0dG9ucyA9IHNob3dOYXZCdXR0b25zO1xuICB9XG5cbiAgLyoqKiogR2V0dGVyL1NldHRlciBsdXhIb3Jpem9udGFsU3RlcEFuaW1hdGlvbkFjdGl2ZSAqKioqL1xuICBnZXQgbHV4SG9yaXpvbnRhbFN0ZXBBbmltYXRpb25BY3RpdmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RlcHBlckNvbmZpZ3VyYXRpb24ubHV4SG9yaXpvbnRhbFN0ZXBBbmltYXRpb25BY3RpdmU7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgbHV4SG9yaXpvbnRhbFN0ZXBBbmltYXRpb25BY3RpdmUoYW5pbWF0aW9uQWN0aXZlOiBib29sZWFuKSB7XG4gICAgdGhpcy5zdGVwcGVyQ29uZmlndXJhdGlvbi5sdXhIb3Jpem9udGFsU3RlcEFuaW1hdGlvbkFjdGl2ZSA9IGFuaW1hdGlvbkFjdGl2ZTtcbiAgfVxuXG4gIC8qKioqIEdldHRlci9TZXR0ZXIgbHV4UHJldmlvdXNCdXR0b25Db25maWcgKioqKi9cbiAgZ2V0IGx1eFByZXZpb3VzQnV0dG9uQ29uZmlnKCkge1xuICAgIHJldHVybiB0aGlzLnN0ZXBwZXJDb25maWd1cmF0aW9uLmx1eFByZXZpb3VzQnV0dG9uQ29uZmlnO1xuICB9XG5cbiAgQElucHV0KCkgc2V0IGx1eFByZXZpb3VzQnV0dG9uQ29uZmlnKGNvbmZpZzogSUx1eFN0ZXBwZXJCdXR0b25Db25maWcpIHtcbiAgICB0aGlzLnN0ZXBwZXJDb25maWd1cmF0aW9uLmx1eFByZXZpb3VzQnV0dG9uQ29uZmlnID0gY29uZmlnID8gY29uZmlnIDogdGhpcy5fREVGQVVMVF9QUkVWX0JUTl9DT05GO1xuICB9XG5cbiAgLyoqKiogR2V0dGVyL1NldHRlciBsdXhOZXh0QnV0dG9uQ29uZmlnICoqKiovXG4gIGdldCBsdXhOZXh0QnV0dG9uQ29uZmlnKCkge1xuICAgIHJldHVybiB0aGlzLnN0ZXBwZXJDb25maWd1cmF0aW9uLmx1eE5leHRCdXR0b25Db25maWc7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgbHV4TmV4dEJ1dHRvbkNvbmZpZyhjb25maWc6IElMdXhTdGVwcGVyQnV0dG9uQ29uZmlnKSB7XG4gICAgdGhpcy5zdGVwcGVyQ29uZmlndXJhdGlvbi5sdXhOZXh0QnV0dG9uQ29uZmlnID0gY29uZmlnID8gY29uZmlnIDogdGhpcy5fREVGQVVMVF9ORVhUX0JUTl9DT05GO1xuICB9XG5cbiAgLyoqKiogR2V0dGVyL1NldHRlciBsdXhGaW5pc2hCdXR0b25Db25maWcgKioqKi9cbiAgZ2V0IGx1eEZpbmlzaEJ1dHRvbkNvbmZpZygpIHtcbiAgICByZXR1cm4gdGhpcy5zdGVwcGVyQ29uZmlndXJhdGlvbi5sdXhGaW5pc2hCdXR0b25Db25maWc7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgbHV4RmluaXNoQnV0dG9uQ29uZmlnKGNvbmZpZzogSUx1eFN0ZXBwZXJCdXR0b25Db25maWcpIHtcbiAgICB0aGlzLnN0ZXBwZXJDb25maWd1cmF0aW9uLmx1eEZpbmlzaEJ1dHRvbkNvbmZpZyA9IGNvbmZpZyA/IGNvbmZpZyA6IHRoaXMuX0RFRkFVTFRfRklOX0JUTl9DT05GO1xuICB9XG5cbiAgLy8gZW5kcmVnaW9uXG59XG4iXX0=